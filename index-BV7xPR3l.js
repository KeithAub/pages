(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var ac={exports:{}},$s={},lc={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp;function D0(){if(hp)return ze;hp=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),d=Symbol.iterator;function x(k){return k===null||typeof k!="object"?null:(k=d&&k[d]||k["@@iterator"],typeof k=="function"?k:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,T={};function P(k,q,xe){this.props=k,this.context=q,this.refs=T,this.updater=xe||w}P.prototype.isReactComponent={},P.prototype.setState=function(k,q){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,q,"setState")},P.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function C(){}C.prototype=P.prototype;function L(k,q,xe){this.props=k,this.context=q,this.refs=T,this.updater=xe||w}var M=L.prototype=new C;M.constructor=L,E(M,P.prototype),M.isPureReactComponent=!0;var F=Array.isArray,$=Object.prototype.hasOwnProperty,X={current:null},y={key:!0,ref:!0,__self:!0,__source:!0};function S(k,q,xe){var se,fe={},he=null,me=null;if(q!=null)for(se in q.ref!==void 0&&(me=q.ref),q.key!==void 0&&(he=""+q.key),q)$.call(q,se)&&!y.hasOwnProperty(se)&&(fe[se]=q[se]);var pe=arguments.length-2;if(pe===1)fe.children=xe;else if(1<pe){for(var Ee=Array(pe),Le=0;Le<pe;Le++)Ee[Le]=arguments[Le+2];fe.children=Ee}if(k&&k.defaultProps)for(se in pe=k.defaultProps,pe)fe[se]===void 0&&(fe[se]=pe[se]);return{$$typeof:e,type:k,key:he,ref:me,props:fe,_owner:X.current}}function A(k,q){return{$$typeof:e,type:k.type,key:q,ref:k.ref,props:k.props,_owner:k._owner}}function _(k){return typeof k=="object"&&k!==null&&k.$$typeof===e}function R(k){var q={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(xe){return q[xe]})}var G=/\/+/g;function j(k,q){return typeof k=="object"&&k!==null&&k.key!=null?R(""+k.key):q.toString(36)}function J(k,q,xe,se,fe){var he=typeof k;(he==="undefined"||he==="boolean")&&(k=null);var me=!1;if(k===null)me=!0;else switch(he){case"string":case"number":me=!0;break;case"object":switch(k.$$typeof){case e:case t:me=!0}}if(me)return me=k,fe=fe(me),k=se===""?"."+j(me,0):se,F(fe)?(xe="",k!=null&&(xe=k.replace(G,"$&/")+"/"),J(fe,q,xe,"",function(Le){return Le})):fe!=null&&(_(fe)&&(fe=A(fe,xe+(!fe.key||me&&me.key===fe.key?"":(""+fe.key).replace(G,"$&/")+"/")+k)),q.push(fe)),1;if(me=0,se=se===""?".":se+":",F(k))for(var pe=0;pe<k.length;pe++){he=k[pe];var Ee=se+j(he,pe);me+=J(he,q,xe,Ee,fe)}else if(Ee=x(k),typeof Ee=="function")for(k=Ee.call(k),pe=0;!(he=k.next()).done;)he=he.value,Ee=se+j(he,pe++),me+=J(he,q,xe,Ee,fe);else if(he==="object")throw q=String(k),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return me}function re(k,q,xe){if(k==null)return k;var se=[],fe=0;return J(k,se,"","",function(he){return q.call(xe,he,fe++)}),se}function I(k){if(k._status===-1){var q=k._result;q=q(),q.then(function(xe){(k._status===0||k._status===-1)&&(k._status=1,k._result=xe)},function(xe){(k._status===0||k._status===-1)&&(k._status=2,k._result=xe)}),k._status===-1&&(k._status=0,k._result=q)}if(k._status===1)return k._result.default;throw k._result}var B={current:null},N={transition:null},D={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:N,ReactCurrentOwner:X};function H(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:re,forEach:function(k,q,xe){re(k,function(){q.apply(this,arguments)},xe)},count:function(k){var q=0;return re(k,function(){q++}),q},toArray:function(k){return re(k,function(q){return q})||[]},only:function(k){if(!_(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},ze.Component=P,ze.Fragment=n,ze.Profiler=s,ze.PureComponent=L,ze.StrictMode=r,ze.Suspense=f,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,ze.act=H,ze.cloneElement=function(k,q,xe){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var se=E({},k.props),fe=k.key,he=k.ref,me=k._owner;if(q!=null){if(q.ref!==void 0&&(he=q.ref,me=X.current),q.key!==void 0&&(fe=""+q.key),k.type&&k.type.defaultProps)var pe=k.type.defaultProps;for(Ee in q)$.call(q,Ee)&&!y.hasOwnProperty(Ee)&&(se[Ee]=q[Ee]===void 0&&pe!==void 0?pe[Ee]:q[Ee])}var Ee=arguments.length-2;if(Ee===1)se.children=xe;else if(1<Ee){pe=Array(Ee);for(var Le=0;Le<Ee;Le++)pe[Le]=arguments[Le+2];se.children=pe}return{$$typeof:e,type:k.type,key:fe,ref:he,props:se,_owner:me}},ze.createContext=function(k){return k={$$typeof:l,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:a,_context:k},k.Consumer=k},ze.createElement=S,ze.createFactory=function(k){var q=S.bind(null,k);return q.type=k,q},ze.createRef=function(){return{current:null}},ze.forwardRef=function(k){return{$$typeof:c,render:k}},ze.isValidElement=_,ze.lazy=function(k){return{$$typeof:g,_payload:{_status:-1,_result:k},_init:I}},ze.memo=function(k,q){return{$$typeof:p,type:k,compare:q===void 0?null:q}},ze.startTransition=function(k){var q=N.transition;N.transition={};try{k()}finally{N.transition=q}},ze.unstable_act=H,ze.useCallback=function(k,q){return B.current.useCallback(k,q)},ze.useContext=function(k){return B.current.useContext(k)},ze.useDebugValue=function(){},ze.useDeferredValue=function(k){return B.current.useDeferredValue(k)},ze.useEffect=function(k,q){return B.current.useEffect(k,q)},ze.useId=function(){return B.current.useId()},ze.useImperativeHandle=function(k,q,xe){return B.current.useImperativeHandle(k,q,xe)},ze.useInsertionEffect=function(k,q){return B.current.useInsertionEffect(k,q)},ze.useLayoutEffect=function(k,q){return B.current.useLayoutEffect(k,q)},ze.useMemo=function(k,q){return B.current.useMemo(k,q)},ze.useReducer=function(k,q,xe){return B.current.useReducer(k,q,xe)},ze.useRef=function(k){return B.current.useRef(k)},ze.useState=function(k){return B.current.useState(k)},ze.useSyncExternalStore=function(k,q,xe){return B.current.useSyncExternalStore(k,q,xe)},ze.useTransition=function(){return B.current.useTransition()},ze.version="18.3.1",ze}var dp;function Xc(){return dp||(dp=1,lc.exports=D0()),lc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp;function B0(){if(pp)return $s;pp=1;var e=Xc(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,f,p){var g,d={},x=null,w=null;p!==void 0&&(x=""+p),f.key!==void 0&&(x=""+f.key),f.ref!==void 0&&(w=f.ref);for(g in f)r.call(f,g)&&!a.hasOwnProperty(g)&&(d[g]=f[g]);if(c&&c.defaultProps)for(g in f=c.defaultProps,f)d[g]===void 0&&(d[g]=f[g]);return{$$typeof:t,type:c,key:x,ref:w,props:d,_owner:s.current}}return $s.Fragment=n,$s.jsx=l,$s.jsxs=l,$s}var gp;function z0(){return gp||(gp=1,ac.exports=B0()),ac.exports}var Wi=z0(),Ys=Xc(),_a={},uc={exports:{}},jt={},cc={exports:{}},fc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function V0(){return mp||(mp=1,function(e){function t(N,D){var H=N.length;N.push(D);e:for(;0<H;){var k=H-1>>>1,q=N[k];if(0<s(q,D))N[k]=D,N[H]=q,H=k;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var D=N[0],H=N.pop();if(H!==D){N[0]=H;e:for(var k=0,q=N.length,xe=q>>>1;k<xe;){var se=2*(k+1)-1,fe=N[se],he=se+1,me=N[he];if(0>s(fe,H))he<q&&0>s(me,fe)?(N[k]=me,N[he]=H,k=he):(N[k]=fe,N[se]=H,k=se);else if(he<q&&0>s(me,H))N[k]=me,N[he]=H,k=he;else break e}}return D}function s(N,D){var H=N.sortIndex-D.sortIndex;return H!==0?H:N.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var f=[],p=[],g=1,d=null,x=3,w=!1,E=!1,T=!1,P=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(N){for(var D=n(p);D!==null;){if(D.callback===null)r(p);else if(D.startTime<=N)r(p),D.sortIndex=D.expirationTime,t(f,D);else break;D=n(p)}}function F(N){if(T=!1,M(N),!E)if(n(f)!==null)E=!0,I($);else{var D=n(p);D!==null&&B(F,D.startTime-N)}}function $(N,D){E=!1,T&&(T=!1,C(S),S=-1),w=!0;var H=x;try{for(M(D),d=n(f);d!==null&&(!(d.expirationTime>D)||N&&!R());){var k=d.callback;if(typeof k=="function"){d.callback=null,x=d.priorityLevel;var q=k(d.expirationTime<=D);D=e.unstable_now(),typeof q=="function"?d.callback=q:d===n(f)&&r(f),M(D)}else r(f);d=n(f)}if(d!==null)var xe=!0;else{var se=n(p);se!==null&&B(F,se.startTime-D),xe=!1}return xe}finally{d=null,x=H,w=!1}}var X=!1,y=null,S=-1,A=5,_=-1;function R(){return!(e.unstable_now()-_<A)}function G(){if(y!==null){var N=e.unstable_now();_=N;var D=!0;try{D=y(!0,N)}finally{D?j():(X=!1,y=null)}}else X=!1}var j;if(typeof L=="function")j=function(){L(G)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,re=J.port2;J.port1.onmessage=G,j=function(){re.postMessage(null)}}else j=function(){P(G,0)};function I(N){y=N,X||(X=!0,j())}function B(N,D){S=P(function(){N(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){E||w||(E=!0,I($))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(N){switch(x){case 1:case 2:case 3:var D=3;break;default:D=x}var H=x;x=D;try{return N()}finally{x=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,D){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var H=x;x=N;try{return D()}finally{x=H}},e.unstable_scheduleCallback=function(N,D,H){var k=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?k+H:k):H=k,N){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=H+q,N={id:g++,callback:D,priorityLevel:N,startTime:H,expirationTime:q,sortIndex:-1},H>k?(N.sortIndex=H,t(p,N),n(f)===null&&N===n(p)&&(T?(C(S),S=-1):T=!0,B(F,H-k))):(N.sortIndex=q,t(f,N),E||w||(E=!0,I($))),N},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(N){var D=x;return function(){var H=x;x=D;try{return N.apply(this,arguments)}finally{x=H}}}}(fc)),fc}var vp;function U0(){return vp||(vp=1,cc.exports=V0()),cc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp;function G0(){if(yp)return jt;yp=1;var e=Xc(),t=U0();function n(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},d={};function x(i){return f.call(d,i)?!0:f.call(g,i)?!1:p.test(i)?d[i]=!0:(g[i]=!0,!1)}function w(i,o,u,h){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function E(i,o,u,h){if(o===null||typeof o>"u"||w(i,o,u,h))return!0;if(h)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function T(i,o,u,h,m,v,b){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=v,this.removeEmptyString=b}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){P[i]=new T(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];P[o]=new T(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){P[i]=new T(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){P[i]=new T(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){P[i]=new T(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){P[i]=new T(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){P[i]=new T(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){P[i]=new T(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){P[i]=new T(i,5,!1,i.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function L(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(C,L);P[o]=new T(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(C,L);P[o]=new T(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(C,L);P[o]=new T(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){P[i]=new T(i,1,!1,i.toLowerCase(),null,!1,!1)}),P.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){P[i]=new T(i,1,!1,i.toLowerCase(),null,!0,!0)});function M(i,o,u,h){var m=P.hasOwnProperty(o)?P[o]:null;(m!==null?m.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(E(o,u,m,h)&&(u=null),h||m===null?x(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):m.mustUseProperty?i[m.propertyName]=u===null?m.type===3?!1:"":u:(o=m.attributeName,h=m.attributeNamespace,u===null?i.removeAttribute(o):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,h?i.setAttributeNS(h,o,u):i.setAttribute(o,u))))}var F=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),X=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),R=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),N=Symbol.iterator;function D(i){return i===null||typeof i!="object"?null:(i=N&&i[N]||i["@@iterator"],typeof i=="function"?i:null)}var H=Object.assign,k;function q(i){if(k===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);k=o&&o[1]||""}return`
`+k+i}var xe=!1;function se(i,o){if(!i||xe)return"";xe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(ee){var h=ee}Reflect.construct(i,[],o)}else{try{o.call()}catch(ee){h=ee}i.call(o.prototype)}else{try{throw Error()}catch(ee){h=ee}i()}}catch(ee){if(ee&&h&&typeof ee.stack=="string"){for(var m=ee.stack.split(`
`),v=h.stack.split(`
`),b=m.length-1,O=v.length-1;1<=b&&0<=O&&m[b]!==v[O];)O--;for(;1<=b&&0<=O;b--,O--)if(m[b]!==v[O]){if(b!==1||O!==1)do if(b--,O--,0>O||m[b]!==v[O]){var U=`
`+m[b].replace(" at new "," at ");return i.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",i.displayName)),U}while(1<=b&&0<=O);break}}}finally{xe=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?q(i):""}function fe(i){switch(i.tag){case 5:return q(i.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return i=se(i.type,!1),i;case 11:return i=se(i.type.render,!1),i;case 1:return i=se(i.type,!0),i;default:return""}}function he(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case y:return"Fragment";case X:return"Portal";case A:return"Profiler";case S:return"StrictMode";case j:return"Suspense";case J:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case R:return(i.displayName||"Context")+".Consumer";case _:return(i._context.displayName||"Context")+".Provider";case G:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case re:return o=i.displayName||null,o!==null?o:he(i.type)||"Memo";case I:o=i._payload,i=i._init;try{return he(i(o))}catch{}}return null}function me(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(o);case 8:return o===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function pe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ee(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Le(i){var o=Ee(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,v=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(b){h=""+b,v.call(this,b)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(b){h=""+b},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function ke(i){i._valueTracker||(i._valueTracker=Le(i))}function Be(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return i&&(h=Ee(i)?i.checked?"true":"false":i.value),i=h,i!==u?(o.setValue(i),!0):!1}function Me(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function le(i,o){var u=o.checked;return H({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function we(i,o){var u=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;u=pe(o.value!=null?o.value:u),i._wrapperState={initialChecked:h,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ie(i,o){o=o.checked,o!=null&&M(i,"checked",o,!1)}function z(i,o){ie(i,o);var u=pe(o.value),h=o.type;if(u!=null)h==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?K(i,o.type,u):o.hasOwnProperty("defaultValue")&&K(i,o.type,pe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Z(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function K(i,o,u){(o!=="number"||Me(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var ye=Array.isArray;function Re(i,o,u,h){if(i=i.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=o.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&h&&(i[u].defaultSelected=!0)}else{for(u=""+pe(u),o=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,h&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function De(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return H({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function sn(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(n(92));if(ye(u)){if(1<u.length)throw Error(n(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:pe(u)}}function Mt(i,o){var u=pe(o.value),h=pe(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),h!=null&&(i.defaultValue=""+h)}function xt(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Ze(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function je(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Ze(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Pt,ci=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,h,m){MSApp.execUnsafeLocalFunction(function(){return i(o,u,h,m)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Pt=Pt||document.createElement("div"),Pt.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Pt.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Ir(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var Rr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},El=["Webkit","ms","Moz","O"];Object.keys(Rr).forEach(function(i){El.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Rr[o]=Rr[i]})});function yo(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Rr.hasOwnProperty(i)&&Rr[i]?(""+o).trim():o+"px"}function xo(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var h=u.indexOf("--")===0,m=yo(u,o[u],h);u==="float"&&(u="cssFloat"),h?i.setProperty(u,m):i[u]=m}}var Al=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fi(i,o){if(o){if(Al[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function hi(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var di=null;function pi(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Mn=null,Hn=null,Wn=null;function os(i){if(i=_s(i)){if(typeof Mn!="function")throw Error(n(280));var o=i.stateNode;o&&(o=$o(o),Mn(i.stateNode,i.type,o))}}function wo(i){Hn?Wn?Wn.push(i):Wn=[i]:Hn=i}function xn(){if(Hn){var i=Hn,o=Wn;if(Wn=Hn=null,os(i),o)for(i=0;i<o.length;i++)os(o[i])}}function Nf(i,o){return i(o)}function Of(){}var bl=!1;function If(i,o,u){if(bl)return i(o,u);bl=!0;try{return Nf(i,o,u)}finally{bl=!1,(Hn!==null||Wn!==null)&&(Of(),xn())}}function as(i,o){var u=i.stateNode;if(u===null)return null;var h=$o(u);if(h===null)return null;u=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var Pl=!1;if(c)try{var ls={};Object.defineProperty(ls,"passive",{get:function(){Pl=!0}}),window.addEventListener("test",ls,ls),window.removeEventListener("test",ls,ls)}catch{Pl=!1}function Hv(i,o,u,h,m,v,b,O,U){var ee=Array.prototype.slice.call(arguments,3);try{o.apply(u,ee)}catch(ae){this.onError(ae)}}var us=!1,So=null,Eo=!1,Tl=null,Wv={onError:function(i){us=!0,So=i}};function jv(i,o,u,h,m,v,b,O,U){us=!1,So=null,Hv.apply(Wv,arguments)}function qv(i,o,u,h,m,v,b,O,U){if(jv.apply(this,arguments),us){if(us){var ee=So;us=!1,So=null}else throw Error(n(198));Eo||(Eo=!0,Tl=ee)}}function Fr(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Rf(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Ff(i){if(Fr(i)!==i)throw Error(n(188))}function Yv(i){var o=i.alternate;if(!o){if(o=Fr(i),o===null)throw Error(n(188));return o!==i?null:i}for(var u=i,h=o;;){var m=u.return;if(m===null)break;var v=m.alternate;if(v===null){if(h=m.return,h!==null){u=h;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===u)return Ff(m),i;if(v===h)return Ff(m),o;v=v.sibling}throw Error(n(188))}if(u.return!==h.return)u=m,h=v;else{for(var b=!1,O=m.child;O;){if(O===u){b=!0,u=m,h=v;break}if(O===h){b=!0,h=m,u=v;break}O=O.sibling}if(!b){for(O=v.child;O;){if(O===u){b=!0,u=v,h=m;break}if(O===h){b=!0,h=v,u=m;break}O=O.sibling}if(!b)throw Error(n(189))}}if(u.alternate!==h)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?i:o}function Df(i){return i=Yv(i),i!==null?Bf(i):null}function Bf(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Bf(i);if(o!==null)return o;i=i.sibling}return null}var zf=t.unstable_scheduleCallback,Vf=t.unstable_cancelCallback,Xv=t.unstable_shouldYield,Zv=t.unstable_requestPaint,lt=t.unstable_now,Qv=t.unstable_getCurrentPriorityLevel,Cl=t.unstable_ImmediatePriority,Uf=t.unstable_UserBlockingPriority,Ao=t.unstable_NormalPriority,Kv=t.unstable_LowPriority,Gf=t.unstable_IdlePriority,bo=null,Nn=null;function Jv(i){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(bo,i,void 0,(i.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:ny,ey=Math.log,ty=Math.LN2;function ny(i){return i>>>=0,i===0?32:31-(ey(i)/ty|0)|0}var Po=64,To=4194304;function cs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Co(i,o){var u=i.pendingLanes;if(u===0)return 0;var h=0,m=i.suspendedLanes,v=i.pingedLanes,b=u&268435455;if(b!==0){var O=b&~m;O!==0?h=cs(O):(v&=b,v!==0&&(h=cs(v)))}else b=u&~m,b!==0?h=cs(b):v!==0&&(h=cs(v));if(h===0)return 0;if(o!==0&&o!==h&&!(o&m)&&(m=h&-h,v=o&-o,m>=v||m===16&&(v&4194240)!==0))return o;if(h&4&&(h|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)u=31-wn(o),m=1<<u,h|=i[u],o&=~m;return h}function ry(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iy(i,o){for(var u=i.suspendedLanes,h=i.pingedLanes,m=i.expirationTimes,v=i.pendingLanes;0<v;){var b=31-wn(v),O=1<<b,U=m[b];U===-1?(!(O&u)||O&h)&&(m[b]=ry(O,o)):U<=o&&(i.expiredLanes|=O),v&=~O}}function _l(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function $f(){var i=Po;return Po<<=1,!(Po&4194240)&&(Po=64),i}function kl(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function fs(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-wn(o),i[o]=u}function sy(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<u;){var m=31-wn(u),v=1<<m;o[m]=0,h[m]=-1,i[m]=-1,u&=~v}}function Ll(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var h=31-wn(u),m=1<<h;m&o|i[h]&o&&(i[h]|=o),u&=~m}}var Qe=0;function Hf(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Wf,Ml,jf,qf,Yf,Nl=!1,_o=[],ir=null,sr=null,or=null,hs=new Map,ds=new Map,ar=[],oy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xf(i,o){switch(i){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":hs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ds.delete(o.pointerId)}}function ps(i,o,u,h,m,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:v,targetContainers:[m]},o!==null&&(o=_s(o),o!==null&&Ml(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function ay(i,o,u,h,m){switch(o){case"focusin":return ir=ps(ir,i,o,u,h,m),!0;case"dragenter":return sr=ps(sr,i,o,u,h,m),!0;case"mouseover":return or=ps(or,i,o,u,h,m),!0;case"pointerover":var v=m.pointerId;return hs.set(v,ps(hs.get(v)||null,i,o,u,h,m)),!0;case"gotpointercapture":return v=m.pointerId,ds.set(v,ps(ds.get(v)||null,i,o,u,h,m)),!0}return!1}function Zf(i){var o=Dr(i.target);if(o!==null){var u=Fr(o);if(u!==null){if(o=u.tag,o===13){if(o=Rf(u),o!==null){i.blockedOn=o,Yf(i.priority,function(){jf(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ko(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Il(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var h=new u.constructor(u.type,u);di=h,u.target.dispatchEvent(h),di=null}else return o=_s(u),o!==null&&Ml(o),i.blockedOn=u,!1;o.shift()}return!0}function Qf(i,o,u){ko(i)&&u.delete(o)}function ly(){Nl=!1,ir!==null&&ko(ir)&&(ir=null),sr!==null&&ko(sr)&&(sr=null),or!==null&&ko(or)&&(or=null),hs.forEach(Qf),ds.forEach(Qf)}function gs(i,o){i.blockedOn===o&&(i.blockedOn=null,Nl||(Nl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ly)))}function ms(i){function o(m){return gs(m,i)}if(0<_o.length){gs(_o[0],i);for(var u=1;u<_o.length;u++){var h=_o[u];h.blockedOn===i&&(h.blockedOn=null)}}for(ir!==null&&gs(ir,i),sr!==null&&gs(sr,i),or!==null&&gs(or,i),hs.forEach(o),ds.forEach(o),u=0;u<ar.length;u++)h=ar[u],h.blockedOn===i&&(h.blockedOn=null);for(;0<ar.length&&(u=ar[0],u.blockedOn===null);)Zf(u),u.blockedOn===null&&ar.shift()}var gi=F.ReactCurrentBatchConfig,Lo=!0;function uy(i,o,u,h){var m=Qe,v=gi.transition;gi.transition=null;try{Qe=1,Ol(i,o,u,h)}finally{Qe=m,gi.transition=v}}function cy(i,o,u,h){var m=Qe,v=gi.transition;gi.transition=null;try{Qe=4,Ol(i,o,u,h)}finally{Qe=m,gi.transition=v}}function Ol(i,o,u,h){if(Lo){var m=Il(i,o,u,h);if(m===null)Ql(i,o,h,Mo,u),Xf(i,h);else if(ay(m,i,o,u,h))h.stopPropagation();else if(Xf(i,h),o&4&&-1<oy.indexOf(i)){for(;m!==null;){var v=_s(m);if(v!==null&&Wf(v),v=Il(i,o,u,h),v===null&&Ql(i,o,h,Mo,u),v===m)break;m=v}m!==null&&h.stopPropagation()}else Ql(i,o,h,null,u)}}var Mo=null;function Il(i,o,u,h){if(Mo=null,i=pi(h),i=Dr(i),i!==null)if(o=Fr(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Rf(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Mo=i,null}function Kf(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qv()){case Cl:return 1;case Uf:return 4;case Ao:case Kv:return 16;case Gf:return 536870912;default:return 16}default:return 16}}var lr=null,Rl=null,No=null;function Jf(){if(No)return No;var i,o=Rl,u=o.length,h,m="value"in lr?lr.value:lr.textContent,v=m.length;for(i=0;i<u&&o[i]===m[i];i++);var b=u-i;for(h=1;h<=b&&o[u-h]===m[v-h];h++);return No=m.slice(i,1<h?1-h:void 0)}function Oo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Io(){return!0}function eh(){return!1}function Zt(i){function o(u,h,m,v,b){this._reactName=u,this._targetInst=m,this.type=h,this.nativeEvent=v,this.target=b,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(u=i[O],this[O]=u?u(v):v[O]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Io:eh,this.isPropagationStopped=eh,this}return H(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Io)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Io)},persist:function(){},isPersistent:Io}),o}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fl=Zt(mi),vs=H({},mi,{view:0,detail:0}),fy=Zt(vs),Dl,Bl,ys,Ro=H({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vl,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ys&&(ys&&i.type==="mousemove"?(Dl=i.screenX-ys.screenX,Bl=i.screenY-ys.screenY):Bl=Dl=0,ys=i),Dl)},movementY:function(i){return"movementY"in i?i.movementY:Bl}}),th=Zt(Ro),hy=H({},Ro,{dataTransfer:0}),dy=Zt(hy),py=H({},vs,{relatedTarget:0}),zl=Zt(py),gy=H({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),my=Zt(gy),vy=H({},mi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),yy=Zt(vy),xy=H({},mi,{data:0}),nh=Zt(xy),wy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ey={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ay(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Ey[i])?!!o[i]:!1}function Vl(){return Ay}var by=H({},vs,{key:function(i){if(i.key){var o=wy[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Oo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Sy[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vl,charCode:function(i){return i.type==="keypress"?Oo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Oo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Py=Zt(by),Ty=H({},Ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rh=Zt(Ty),Cy=H({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vl}),_y=Zt(Cy),ky=H({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ly=Zt(ky),My=H({},Ro,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ny=Zt(My),Oy=[9,13,27,32],Ul=c&&"CompositionEvent"in window,xs=null;c&&"documentMode"in document&&(xs=document.documentMode);var Iy=c&&"TextEvent"in window&&!xs,ih=c&&(!Ul||xs&&8<xs&&11>=xs),sh=" ",oh=!1;function ah(i,o){switch(i){case"keyup":return Oy.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lh(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var vi=!1;function Ry(i,o){switch(i){case"compositionend":return lh(o);case"keypress":return o.which!==32?null:(oh=!0,sh);case"textInput":return i=o.data,i===sh&&oh?null:i;default:return null}}function Fy(i,o){if(vi)return i==="compositionend"||!Ul&&ah(i,o)?(i=Jf(),No=Rl=lr=null,vi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ih&&o.locale!=="ko"?null:o.data;default:return null}}var Dy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Dy[i.type]:o==="textarea"}function ch(i,o,u,h){wo(h),o=Vo(o,"onChange"),0<o.length&&(u=new Fl("onChange","change",null,u,h),i.push({event:u,listeners:o}))}var ws=null,Ss=null;function By(i){_h(i,0)}function Fo(i){var o=Ei(i);if(Be(o))return i}function zy(i,o){if(i==="change")return o}var fh=!1;if(c){var Gl;if(c){var $l="oninput"in document;if(!$l){var hh=document.createElement("div");hh.setAttribute("oninput","return;"),$l=typeof hh.oninput=="function"}Gl=$l}else Gl=!1;fh=Gl&&(!document.documentMode||9<document.documentMode)}function dh(){ws&&(ws.detachEvent("onpropertychange",ph),Ss=ws=null)}function ph(i){if(i.propertyName==="value"&&Fo(Ss)){var o=[];ch(o,Ss,i,pi(i)),If(By,o)}}function Vy(i,o,u){i==="focusin"?(dh(),ws=o,Ss=u,ws.attachEvent("onpropertychange",ph)):i==="focusout"&&dh()}function Uy(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Fo(Ss)}function Gy(i,o){if(i==="click")return Fo(o)}function $y(i,o){if(i==="input"||i==="change")return Fo(o)}function Hy(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Sn=typeof Object.is=="function"?Object.is:Hy;function Es(i,o){if(Sn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var m=u[h];if(!f.call(o,m)||!Sn(i[m],o[m]))return!1}return!0}function gh(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function mh(i,o){var u=gh(i);i=0;for(var h;u;){if(u.nodeType===3){if(h=i+u.textContent.length,i<=o&&h>=o)return{node:u,offset:o-i};i=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=gh(u)}}function vh(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?vh(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function yh(){for(var i=window,o=Me();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Me(i.document)}return o}function Hl(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Wy(i){var o=yh(),u=i.focusedElem,h=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&vh(u.ownerDocument.documentElement,u)){if(h!==null&&Hl(u)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var m=u.textContent.length,v=Math.min(h.start,m);h=h.end===void 0?v:Math.min(h.end,m),!i.extend&&v>h&&(m=h,h=v,v=m),m=mh(u,v);var b=mh(u,h);m&&b&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==b.node||i.focusOffset!==b.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),i.removeAllRanges(),v>h?(i.addRange(o),i.extend(b.node,b.offset)):(o.setEnd(b.node,b.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var jy=c&&"documentMode"in document&&11>=document.documentMode,yi=null,Wl=null,As=null,jl=!1;function xh(i,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;jl||yi==null||yi!==Me(h)||(h=yi,"selectionStart"in h&&Hl(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),As&&Es(As,h)||(As=h,h=Vo(Wl,"onSelect"),0<h.length&&(o=new Fl("onSelect","select",null,o,u),i.push({event:o,listeners:h}),o.target=yi)))}function Do(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var xi={animationend:Do("Animation","AnimationEnd"),animationiteration:Do("Animation","AnimationIteration"),animationstart:Do("Animation","AnimationStart"),transitionend:Do("Transition","TransitionEnd")},ql={},wh={};c&&(wh=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);function Bo(i){if(ql[i])return ql[i];if(!xi[i])return i;var o=xi[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in wh)return ql[i]=o[u];return i}var Sh=Bo("animationend"),Eh=Bo("animationiteration"),Ah=Bo("animationstart"),bh=Bo("transitionend"),Ph=new Map,Th="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(i,o){Ph.set(i,o),a(o,[i])}for(var Yl=0;Yl<Th.length;Yl++){var Xl=Th[Yl],qy=Xl.toLowerCase(),Yy=Xl[0].toUpperCase()+Xl.slice(1);ur(qy,"on"+Yy)}ur(Sh,"onAnimationEnd"),ur(Eh,"onAnimationIteration"),ur(Ah,"onAnimationStart"),ur("dblclick","onDoubleClick"),ur("focusin","onFocus"),ur("focusout","onBlur"),ur(bh,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xy=new Set("cancel close invalid load scroll toggle".split(" ").concat(bs));function Ch(i,o,u){var h=i.type||"unknown-event";i.currentTarget=u,qv(h,o,void 0,i),i.currentTarget=null}function _h(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var h=i[u],m=h.event;h=h.listeners;e:{var v=void 0;if(o)for(var b=h.length-1;0<=b;b--){var O=h[b],U=O.instance,ee=O.currentTarget;if(O=O.listener,U!==v&&m.isPropagationStopped())break e;Ch(m,O,ee),v=U}else for(b=0;b<h.length;b++){if(O=h[b],U=O.instance,ee=O.currentTarget,O=O.listener,U!==v&&m.isPropagationStopped())break e;Ch(m,O,ee),v=U}}}if(Eo)throw i=Tl,Eo=!1,Tl=null,i}function tt(i,o){var u=o[ru];u===void 0&&(u=o[ru]=new Set);var h=i+"__bubble";u.has(h)||(kh(o,i,2,!1),u.add(h))}function Zl(i,o,u){var h=0;o&&(h|=4),kh(u,i,h,o)}var zo="_reactListening"+Math.random().toString(36).slice(2);function Ps(i){if(!i[zo]){i[zo]=!0,r.forEach(function(u){u!=="selectionchange"&&(Xy.has(u)||Zl(u,!1,i),Zl(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[zo]||(o[zo]=!0,Zl("selectionchange",!1,o))}}function kh(i,o,u,h){switch(Kf(o)){case 1:var m=uy;break;case 4:m=cy;break;default:m=Ol}u=m.bind(null,o,u,i),m=void 0,!Pl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),h?m!==void 0?i.addEventListener(o,u,{capture:!0,passive:m}):i.addEventListener(o,u,!0):m!==void 0?i.addEventListener(o,u,{passive:m}):i.addEventListener(o,u,!1)}function Ql(i,o,u,h,m){var v=h;if(!(o&1)&&!(o&2)&&h!==null)e:for(;;){if(h===null)return;var b=h.tag;if(b===3||b===4){var O=h.stateNode.containerInfo;if(O===m||O.nodeType===8&&O.parentNode===m)break;if(b===4)for(b=h.return;b!==null;){var U=b.tag;if((U===3||U===4)&&(U=b.stateNode.containerInfo,U===m||U.nodeType===8&&U.parentNode===m))return;b=b.return}for(;O!==null;){if(b=Dr(O),b===null)return;if(U=b.tag,U===5||U===6){h=v=b;continue e}O=O.parentNode}}h=h.return}If(function(){var ee=v,ae=pi(u),ue=[];e:{var oe=Ph.get(i);if(oe!==void 0){var Ae=Fl,Pe=i;switch(i){case"keypress":if(Oo(u)===0)break e;case"keydown":case"keyup":Ae=Py;break;case"focusin":Pe="focus",Ae=zl;break;case"focusout":Pe="blur",Ae=zl;break;case"beforeblur":case"afterblur":Ae=zl;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=th;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=dy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=_y;break;case Sh:case Eh:case Ah:Ae=my;break;case bh:Ae=Ly;break;case"scroll":Ae=fy;break;case"wheel":Ae=Ny;break;case"copy":case"cut":case"paste":Ae=yy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=rh}var Te=(o&4)!==0,ut=!Te&&i==="scroll",Y=Te?oe!==null?oe+"Capture":null:oe;Te=[];for(var W=ee,Q;W!==null;){Q=W;var ge=Q.stateNode;if(Q.tag===5&&ge!==null&&(Q=ge,Y!==null&&(ge=as(W,Y),ge!=null&&Te.push(Ts(W,ge,Q)))),ut)break;W=W.return}0<Te.length&&(oe=new Ae(oe,Pe,null,u,ae),ue.push({event:oe,listeners:Te}))}}if(!(o&7)){e:{if(oe=i==="mouseover"||i==="pointerover",Ae=i==="mouseout"||i==="pointerout",oe&&u!==di&&(Pe=u.relatedTarget||u.fromElement)&&(Dr(Pe)||Pe[jn]))break e;if((Ae||oe)&&(oe=ae.window===ae?ae:(oe=ae.ownerDocument)?oe.defaultView||oe.parentWindow:window,Ae?(Pe=u.relatedTarget||u.toElement,Ae=ee,Pe=Pe?Dr(Pe):null,Pe!==null&&(ut=Fr(Pe),Pe!==ut||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(Ae=null,Pe=ee),Ae!==Pe)){if(Te=th,ge="onMouseLeave",Y="onMouseEnter",W="mouse",(i==="pointerout"||i==="pointerover")&&(Te=rh,ge="onPointerLeave",Y="onPointerEnter",W="pointer"),ut=Ae==null?oe:Ei(Ae),Q=Pe==null?oe:Ei(Pe),oe=new Te(ge,W+"leave",Ae,u,ae),oe.target=ut,oe.relatedTarget=Q,ge=null,Dr(ae)===ee&&(Te=new Te(Y,W+"enter",Pe,u,ae),Te.target=Q,Te.relatedTarget=ut,ge=Te),ut=ge,Ae&&Pe)t:{for(Te=Ae,Y=Pe,W=0,Q=Te;Q;Q=wi(Q))W++;for(Q=0,ge=Y;ge;ge=wi(ge))Q++;for(;0<W-Q;)Te=wi(Te),W--;for(;0<Q-W;)Y=wi(Y),Q--;for(;W--;){if(Te===Y||Y!==null&&Te===Y.alternate)break t;Te=wi(Te),Y=wi(Y)}Te=null}else Te=null;Ae!==null&&Lh(ue,oe,Ae,Te,!1),Pe!==null&&ut!==null&&Lh(ue,ut,Pe,Te,!0)}}e:{if(oe=ee?Ei(ee):window,Ae=oe.nodeName&&oe.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&oe.type==="file")var _e=zy;else if(uh(oe))if(fh)_e=$y;else{_e=Uy;var Ne=Vy}else(Ae=oe.nodeName)&&Ae.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(_e=Gy);if(_e&&(_e=_e(i,ee))){ch(ue,_e,u,ae);break e}Ne&&Ne(i,oe,ee),i==="focusout"&&(Ne=oe._wrapperState)&&Ne.controlled&&oe.type==="number"&&K(oe,"number",oe.value)}switch(Ne=ee?Ei(ee):window,i){case"focusin":(uh(Ne)||Ne.contentEditable==="true")&&(yi=Ne,Wl=ee,As=null);break;case"focusout":As=Wl=yi=null;break;case"mousedown":jl=!0;break;case"contextmenu":case"mouseup":case"dragend":jl=!1,xh(ue,u,ae);break;case"selectionchange":if(jy)break;case"keydown":case"keyup":xh(ue,u,ae)}var Oe;if(Ul)e:{switch(i){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else vi?ah(i,u)&&(Ie="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ie="onCompositionStart");Ie&&(ih&&u.locale!=="ko"&&(vi||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&vi&&(Oe=Jf()):(lr=ae,Rl="value"in lr?lr.value:lr.textContent,vi=!0)),Ne=Vo(ee,Ie),0<Ne.length&&(Ie=new nh(Ie,i,null,u,ae),ue.push({event:Ie,listeners:Ne}),Oe?Ie.data=Oe:(Oe=lh(u),Oe!==null&&(Ie.data=Oe)))),(Oe=Iy?Ry(i,u):Fy(i,u))&&(ee=Vo(ee,"onBeforeInput"),0<ee.length&&(ae=new nh("onBeforeInput","beforeinput",null,u,ae),ue.push({event:ae,listeners:ee}),ae.data=Oe))}_h(ue,o)})}function Ts(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Vo(i,o){for(var u=o+"Capture",h=[];i!==null;){var m=i,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=as(i,u),v!=null&&h.unshift(Ts(i,v,m)),v=as(i,o),v!=null&&h.push(Ts(i,v,m))),i=i.return}return h}function wi(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Lh(i,o,u,h,m){for(var v=o._reactName,b=[];u!==null&&u!==h;){var O=u,U=O.alternate,ee=O.stateNode;if(U!==null&&U===h)break;O.tag===5&&ee!==null&&(O=ee,m?(U=as(u,v),U!=null&&b.unshift(Ts(u,U,O))):m||(U=as(u,v),U!=null&&b.push(Ts(u,U,O)))),u=u.return}b.length!==0&&i.push({event:o,listeners:b})}var Zy=/\r\n?/g,Qy=/\u0000|\uFFFD/g;function Mh(i){return(typeof i=="string"?i:""+i).replace(Zy,`
`).replace(Qy,"")}function Uo(i,o,u){if(o=Mh(o),Mh(i)!==o&&u)throw Error(n(425))}function Go(){}var Kl=null,Jl=null;function eu(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var tu=typeof setTimeout=="function"?setTimeout:void 0,Ky=typeof clearTimeout=="function"?clearTimeout:void 0,Nh=typeof Promise=="function"?Promise:void 0,Jy=typeof queueMicrotask=="function"?queueMicrotask:typeof Nh<"u"?function(i){return Nh.resolve(null).then(i).catch(e0)}:tu;function e0(i){setTimeout(function(){throw i})}function nu(i,o){var u=o,h=0;do{var m=u.nextSibling;if(i.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(h===0){i.removeChild(m),ms(o);return}h--}else u!=="$"&&u!=="$?"&&u!=="$!"||h++;u=m}while(u);ms(o)}function cr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Oh(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Si=Math.random().toString(36).slice(2),On="__reactFiber$"+Si,Cs="__reactProps$"+Si,jn="__reactContainer$"+Si,ru="__reactEvents$"+Si,t0="__reactListeners$"+Si,n0="__reactHandles$"+Si;function Dr(i){var o=i[On];if(o)return o;for(var u=i.parentNode;u;){if(o=u[jn]||u[On]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=Oh(i);i!==null;){if(u=i[On])return u;i=Oh(i)}return o}i=u,u=i.parentNode}return null}function _s(i){return i=i[On]||i[jn],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ei(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function $o(i){return i[Cs]||null}var iu=[],Ai=-1;function fr(i){return{current:i}}function nt(i){0>Ai||(i.current=iu[Ai],iu[Ai]=null,Ai--)}function et(i,o){Ai++,iu[Ai]=i.current,i.current=o}var hr={},Tt=fr(hr),Ut=fr(!1),Br=hr;function bi(i,o){var u=i.type.contextTypes;if(!u)return hr;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in u)m[v]=o[v];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=m),m}function Gt(i){return i=i.childContextTypes,i!=null}function Ho(){nt(Ut),nt(Tt)}function Ih(i,o,u){if(Tt.current!==hr)throw Error(n(168));et(Tt,o),et(Ut,u)}function Rh(i,o,u){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return u;h=h.getChildContext();for(var m in h)if(!(m in o))throw Error(n(108,me(i)||"Unknown",m));return H({},u,h)}function Wo(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||hr,Br=Tt.current,et(Tt,i),et(Ut,Ut.current),!0}function Fh(i,o,u){var h=i.stateNode;if(!h)throw Error(n(169));u?(i=Rh(i,o,Br),h.__reactInternalMemoizedMergedChildContext=i,nt(Ut),nt(Tt),et(Tt,i)):nt(Ut),et(Ut,u)}var qn=null,jo=!1,su=!1;function Dh(i){qn===null?qn=[i]:qn.push(i)}function r0(i){jo=!0,Dh(i)}function dr(){if(!su&&qn!==null){su=!0;var i=0,o=Qe;try{var u=qn;for(Qe=1;i<u.length;i++){var h=u[i];do h=h(!0);while(h!==null)}qn=null,jo=!1}catch(m){throw qn!==null&&(qn=qn.slice(i+1)),zf(Cl,dr),m}finally{Qe=o,su=!1}}return null}var Pi=[],Ti=0,qo=null,Yo=0,on=[],an=0,zr=null,Yn=1,Xn="";function Vr(i,o){Pi[Ti++]=Yo,Pi[Ti++]=qo,qo=i,Yo=o}function Bh(i,o,u){on[an++]=Yn,on[an++]=Xn,on[an++]=zr,zr=i;var h=Yn;i=Xn;var m=32-wn(h)-1;h&=~(1<<m),u+=1;var v=32-wn(o)+m;if(30<v){var b=m-m%5;v=(h&(1<<b)-1).toString(32),h>>=b,m-=b,Yn=1<<32-wn(o)+m|u<<m|h,Xn=v+i}else Yn=1<<v|u<<m|h,Xn=i}function ou(i){i.return!==null&&(Vr(i,1),Bh(i,1,0))}function au(i){for(;i===qo;)qo=Pi[--Ti],Pi[Ti]=null,Yo=Pi[--Ti],Pi[Ti]=null;for(;i===zr;)zr=on[--an],on[an]=null,Xn=on[--an],on[an]=null,Yn=on[--an],on[an]=null}var Qt=null,Kt=null,rt=!1,En=null;function zh(i,o){var u=fn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function Vh(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Qt=i,Kt=cr(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Qt=i,Kt=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=zr!==null?{id:Yn,overflow:Xn}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=fn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Qt=i,Kt=null,!0):!1;default:return!1}}function lu(i){return(i.mode&1)!==0&&(i.flags&128)===0}function uu(i){if(rt){var o=Kt;if(o){var u=o;if(!Vh(i,o)){if(lu(i))throw Error(n(418));o=cr(u.nextSibling);var h=Qt;o&&Vh(i,o)?zh(h,u):(i.flags=i.flags&-4097|2,rt=!1,Qt=i)}}else{if(lu(i))throw Error(n(418));i.flags=i.flags&-4097|2,rt=!1,Qt=i}}}function Uh(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Qt=i}function Xo(i){if(i!==Qt)return!1;if(!rt)return Uh(i),rt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!eu(i.type,i.memoizedProps)),o&&(o=Kt)){if(lu(i))throw Gh(),Error(n(418));for(;o;)zh(i,o),o=cr(o.nextSibling)}if(Uh(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){Kt=cr(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}Kt=null}}else Kt=Qt?cr(i.stateNode.nextSibling):null;return!0}function Gh(){for(var i=Kt;i;)i=cr(i.nextSibling)}function Ci(){Kt=Qt=null,rt=!1}function cu(i){En===null?En=[i]:En.push(i)}var i0=F.ReactCurrentBatchConfig;function ks(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(n(309));var h=u.stateNode}if(!h)throw Error(n(147,i));var m=h,v=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(b){var O=m.refs;b===null?delete O[v]:O[v]=b},o._stringRef=v,o)}if(typeof i!="string")throw Error(n(284));if(!u._owner)throw Error(n(290,i))}return i}function Zo(i,o){throw i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function $h(i){var o=i._init;return o(i._payload)}function Hh(i){function o(Y,W){if(i){var Q=Y.deletions;Q===null?(Y.deletions=[W],Y.flags|=16):Q.push(W)}}function u(Y,W){if(!i)return null;for(;W!==null;)o(Y,W),W=W.sibling;return null}function h(Y,W){for(Y=new Map;W!==null;)W.key!==null?Y.set(W.key,W):Y.set(W.index,W),W=W.sibling;return Y}function m(Y,W){return Y=Sr(Y,W),Y.index=0,Y.sibling=null,Y}function v(Y,W,Q){return Y.index=Q,i?(Q=Y.alternate,Q!==null?(Q=Q.index,Q<W?(Y.flags|=2,W):Q):(Y.flags|=2,W)):(Y.flags|=1048576,W)}function b(Y){return i&&Y.alternate===null&&(Y.flags|=2),Y}function O(Y,W,Q,ge){return W===null||W.tag!==6?(W=tc(Q,Y.mode,ge),W.return=Y,W):(W=m(W,Q),W.return=Y,W)}function U(Y,W,Q,ge){var _e=Q.type;return _e===y?ae(Y,W,Q.props.children,ge,Q.key):W!==null&&(W.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===I&&$h(_e)===W.type)?(ge=m(W,Q.props),ge.ref=ks(Y,W,Q),ge.return=Y,ge):(ge=wa(Q.type,Q.key,Q.props,null,Y.mode,ge),ge.ref=ks(Y,W,Q),ge.return=Y,ge)}function ee(Y,W,Q,ge){return W===null||W.tag!==4||W.stateNode.containerInfo!==Q.containerInfo||W.stateNode.implementation!==Q.implementation?(W=nc(Q,Y.mode,ge),W.return=Y,W):(W=m(W,Q.children||[]),W.return=Y,W)}function ae(Y,W,Q,ge,_e){return W===null||W.tag!==7?(W=Yr(Q,Y.mode,ge,_e),W.return=Y,W):(W=m(W,Q),W.return=Y,W)}function ue(Y,W,Q){if(typeof W=="string"&&W!==""||typeof W=="number")return W=tc(""+W,Y.mode,Q),W.return=Y,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case $:return Q=wa(W.type,W.key,W.props,null,Y.mode,Q),Q.ref=ks(Y,null,W),Q.return=Y,Q;case X:return W=nc(W,Y.mode,Q),W.return=Y,W;case I:var ge=W._init;return ue(Y,ge(W._payload),Q)}if(ye(W)||D(W))return W=Yr(W,Y.mode,Q,null),W.return=Y,W;Zo(Y,W)}return null}function oe(Y,W,Q,ge){var _e=W!==null?W.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return _e!==null?null:O(Y,W,""+Q,ge);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:return Q.key===_e?U(Y,W,Q,ge):null;case X:return Q.key===_e?ee(Y,W,Q,ge):null;case I:return _e=Q._init,oe(Y,W,_e(Q._payload),ge)}if(ye(Q)||D(Q))return _e!==null?null:ae(Y,W,Q,ge,null);Zo(Y,Q)}return null}function Ae(Y,W,Q,ge,_e){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return Y=Y.get(Q)||null,O(W,Y,""+ge,_e);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case $:return Y=Y.get(ge.key===null?Q:ge.key)||null,U(W,Y,ge,_e);case X:return Y=Y.get(ge.key===null?Q:ge.key)||null,ee(W,Y,ge,_e);case I:var Ne=ge._init;return Ae(Y,W,Q,Ne(ge._payload),_e)}if(ye(ge)||D(ge))return Y=Y.get(Q)||null,ae(W,Y,ge,_e,null);Zo(W,ge)}return null}function Pe(Y,W,Q,ge){for(var _e=null,Ne=null,Oe=W,Ie=W=0,yt=null;Oe!==null&&Ie<Q.length;Ie++){Oe.index>Ie?(yt=Oe,Oe=null):yt=Oe.sibling;var qe=oe(Y,Oe,Q[Ie],ge);if(qe===null){Oe===null&&(Oe=yt);break}i&&Oe&&qe.alternate===null&&o(Y,Oe),W=v(qe,W,Ie),Ne===null?_e=qe:Ne.sibling=qe,Ne=qe,Oe=yt}if(Ie===Q.length)return u(Y,Oe),rt&&Vr(Y,Ie),_e;if(Oe===null){for(;Ie<Q.length;Ie++)Oe=ue(Y,Q[Ie],ge),Oe!==null&&(W=v(Oe,W,Ie),Ne===null?_e=Oe:Ne.sibling=Oe,Ne=Oe);return rt&&Vr(Y,Ie),_e}for(Oe=h(Y,Oe);Ie<Q.length;Ie++)yt=Ae(Oe,Y,Ie,Q[Ie],ge),yt!==null&&(i&&yt.alternate!==null&&Oe.delete(yt.key===null?Ie:yt.key),W=v(yt,W,Ie),Ne===null?_e=yt:Ne.sibling=yt,Ne=yt);return i&&Oe.forEach(function(Er){return o(Y,Er)}),rt&&Vr(Y,Ie),_e}function Te(Y,W,Q,ge){var _e=D(Q);if(typeof _e!="function")throw Error(n(150));if(Q=_e.call(Q),Q==null)throw Error(n(151));for(var Ne=_e=null,Oe=W,Ie=W=0,yt=null,qe=Q.next();Oe!==null&&!qe.done;Ie++,qe=Q.next()){Oe.index>Ie?(yt=Oe,Oe=null):yt=Oe.sibling;var Er=oe(Y,Oe,qe.value,ge);if(Er===null){Oe===null&&(Oe=yt);break}i&&Oe&&Er.alternate===null&&o(Y,Oe),W=v(Er,W,Ie),Ne===null?_e=Er:Ne.sibling=Er,Ne=Er,Oe=yt}if(qe.done)return u(Y,Oe),rt&&Vr(Y,Ie),_e;if(Oe===null){for(;!qe.done;Ie++,qe=Q.next())qe=ue(Y,qe.value,ge),qe!==null&&(W=v(qe,W,Ie),Ne===null?_e=qe:Ne.sibling=qe,Ne=qe);return rt&&Vr(Y,Ie),_e}for(Oe=h(Y,Oe);!qe.done;Ie++,qe=Q.next())qe=Ae(Oe,Y,Ie,qe.value,ge),qe!==null&&(i&&qe.alternate!==null&&Oe.delete(qe.key===null?Ie:qe.key),W=v(qe,W,Ie),Ne===null?_e=qe:Ne.sibling=qe,Ne=qe);return i&&Oe.forEach(function(F0){return o(Y,F0)}),rt&&Vr(Y,Ie),_e}function ut(Y,W,Q,ge){if(typeof Q=="object"&&Q!==null&&Q.type===y&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:e:{for(var _e=Q.key,Ne=W;Ne!==null;){if(Ne.key===_e){if(_e=Q.type,_e===y){if(Ne.tag===7){u(Y,Ne.sibling),W=m(Ne,Q.props.children),W.return=Y,Y=W;break e}}else if(Ne.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===I&&$h(_e)===Ne.type){u(Y,Ne.sibling),W=m(Ne,Q.props),W.ref=ks(Y,Ne,Q),W.return=Y,Y=W;break e}u(Y,Ne);break}else o(Y,Ne);Ne=Ne.sibling}Q.type===y?(W=Yr(Q.props.children,Y.mode,ge,Q.key),W.return=Y,Y=W):(ge=wa(Q.type,Q.key,Q.props,null,Y.mode,ge),ge.ref=ks(Y,W,Q),ge.return=Y,Y=ge)}return b(Y);case X:e:{for(Ne=Q.key;W!==null;){if(W.key===Ne)if(W.tag===4&&W.stateNode.containerInfo===Q.containerInfo&&W.stateNode.implementation===Q.implementation){u(Y,W.sibling),W=m(W,Q.children||[]),W.return=Y,Y=W;break e}else{u(Y,W);break}else o(Y,W);W=W.sibling}W=nc(Q,Y.mode,ge),W.return=Y,Y=W}return b(Y);case I:return Ne=Q._init,ut(Y,W,Ne(Q._payload),ge)}if(ye(Q))return Pe(Y,W,Q,ge);if(D(Q))return Te(Y,W,Q,ge);Zo(Y,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,W!==null&&W.tag===6?(u(Y,W.sibling),W=m(W,Q),W.return=Y,Y=W):(u(Y,W),W=tc(Q,Y.mode,ge),W.return=Y,Y=W),b(Y)):u(Y,W)}return ut}var _i=Hh(!0),Wh=Hh(!1),Qo=fr(null),Ko=null,ki=null,fu=null;function hu(){fu=ki=Ko=null}function du(i){var o=Qo.current;nt(Qo),i._currentValue=o}function pu(i,o,u){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===u)break;i=i.return}}function Li(i,o){Ko=i,fu=ki=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&($t=!0),i.firstContext=null)}function ln(i){var o=i._currentValue;if(fu!==i)if(i={context:i,memoizedValue:o,next:null},ki===null){if(Ko===null)throw Error(n(308));ki=i,Ko.dependencies={lanes:0,firstContext:i}}else ki=ki.next=i;return o}var Ur=null;function gu(i){Ur===null?Ur=[i]:Ur.push(i)}function jh(i,o,u,h){var m=o.interleaved;return m===null?(u.next=u,gu(o)):(u.next=m.next,m.next=u),o.interleaved=u,Zn(i,h)}function Zn(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var pr=!1;function mu(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qh(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Qn(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function gr(i,o,u){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,We&2){var m=h.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),h.pending=o,Zn(i,u)}return m=h.interleaved,m===null?(o.next=o,gu(h)):(o.next=m.next,m.next=o),h.interleaved=o,Zn(i,u)}function Jo(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,Ll(i,u)}}function Yh(i,o){var u=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var m=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var b={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?m=v=b:v=v.next=b,u=u.next}while(u!==null);v===null?m=v=o:v=v.next=o}else m=v=o;u={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:h.shared,effects:h.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function ea(i,o,u,h){var m=i.updateQueue;pr=!1;var v=m.firstBaseUpdate,b=m.lastBaseUpdate,O=m.shared.pending;if(O!==null){m.shared.pending=null;var U=O,ee=U.next;U.next=null,b===null?v=ee:b.next=ee,b=U;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,O=ae.lastBaseUpdate,O!==b&&(O===null?ae.firstBaseUpdate=ee:O.next=ee,ae.lastBaseUpdate=U))}if(v!==null){var ue=m.baseState;b=0,ae=ee=U=null,O=v;do{var oe=O.lane,Ae=O.eventTime;if((h&oe)===oe){ae!==null&&(ae=ae.next={eventTime:Ae,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Pe=i,Te=O;switch(oe=o,Ae=u,Te.tag){case 1:if(Pe=Te.payload,typeof Pe=="function"){ue=Pe.call(Ae,ue,oe);break e}ue=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Te.payload,oe=typeof Pe=="function"?Pe.call(Ae,ue,oe):Pe,oe==null)break e;ue=H({},ue,oe);break e;case 2:pr=!0}}O.callback!==null&&O.lane!==0&&(i.flags|=64,oe=m.effects,oe===null?m.effects=[O]:oe.push(O))}else Ae={eventTime:Ae,lane:oe,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ae===null?(ee=ae=Ae,U=ue):ae=ae.next=Ae,b|=oe;if(O=O.next,O===null){if(O=m.shared.pending,O===null)break;oe=O,O=oe.next,oe.next=null,m.lastBaseUpdate=oe,m.shared.pending=null}}while(!0);if(ae===null&&(U=ue),m.baseState=U,m.firstBaseUpdate=ee,m.lastBaseUpdate=ae,o=m.shared.interleaved,o!==null){m=o;do b|=m.lane,m=m.next;while(m!==o)}else v===null&&(m.shared.lanes=0);Hr|=b,i.lanes=b,i.memoizedState=ue}}function Xh(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],m=h.callback;if(m!==null){if(h.callback=null,h=u,typeof m!="function")throw Error(n(191,m));m.call(h)}}}var Ls={},In=fr(Ls),Ms=fr(Ls),Ns=fr(Ls);function Gr(i){if(i===Ls)throw Error(n(174));return i}function vu(i,o){switch(et(Ns,o),et(Ms,i),et(In,Ls),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:je(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=je(o,i)}nt(In),et(In,o)}function Mi(){nt(In),nt(Ms),nt(Ns)}function Zh(i){Gr(Ns.current);var o=Gr(In.current),u=je(o,i.type);o!==u&&(et(Ms,i),et(In,u))}function yu(i){Ms.current===i&&(nt(In),nt(Ms))}var it=fr(0);function ta(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var xu=[];function wu(){for(var i=0;i<xu.length;i++)xu[i]._workInProgressVersionPrimary=null;xu.length=0}var na=F.ReactCurrentDispatcher,Su=F.ReactCurrentBatchConfig,$r=0,st=null,dt=null,mt=null,ra=!1,Os=!1,Is=0,s0=0;function Ct(){throw Error(n(321))}function Eu(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Sn(i[u],o[u]))return!1;return!0}function Au(i,o,u,h,m,v){if($r=v,st=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,na.current=i===null||i.memoizedState===null?u0:c0,i=u(h,m),Os){v=0;do{if(Os=!1,Is=0,25<=v)throw Error(n(301));v+=1,mt=dt=null,o.updateQueue=null,na.current=f0,i=u(h,m)}while(Os)}if(na.current=oa,o=dt!==null&&dt.next!==null,$r=0,mt=dt=st=null,ra=!1,o)throw Error(n(300));return i}function bu(){var i=Is!==0;return Is=0,i}function Rn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?st.memoizedState=mt=i:mt=mt.next=i,mt}function un(){if(dt===null){var i=st.alternate;i=i!==null?i.memoizedState:null}else i=dt.next;var o=mt===null?st.memoizedState:mt.next;if(o!==null)mt=o,dt=i;else{if(i===null)throw Error(n(310));dt=i,i={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},mt===null?st.memoizedState=mt=i:mt=mt.next=i}return mt}function Rs(i,o){return typeof o=="function"?o(i):o}function Pu(i){var o=un(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var h=dt,m=h.baseQueue,v=u.pending;if(v!==null){if(m!==null){var b=m.next;m.next=v.next,v.next=b}h.baseQueue=m=v,u.pending=null}if(m!==null){v=m.next,h=h.baseState;var O=b=null,U=null,ee=v;do{var ae=ee.lane;if(($r&ae)===ae)U!==null&&(U=U.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),h=ee.hasEagerState?ee.eagerState:i(h,ee.action);else{var ue={lane:ae,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};U===null?(O=U=ue,b=h):U=U.next=ue,st.lanes|=ae,Hr|=ae}ee=ee.next}while(ee!==null&&ee!==v);U===null?b=h:U.next=O,Sn(h,o.memoizedState)||($t=!0),o.memoizedState=h,o.baseState=b,o.baseQueue=U,u.lastRenderedState=h}if(i=u.interleaved,i!==null){m=i;do v=m.lane,st.lanes|=v,Hr|=v,m=m.next;while(m!==i)}else m===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Tu(i){var o=un(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var h=u.dispatch,m=u.pending,v=o.memoizedState;if(m!==null){u.pending=null;var b=m=m.next;do v=i(v,b.action),b=b.next;while(b!==m);Sn(v,o.memoizedState)||($t=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),u.lastRenderedState=v}return[v,h]}function Qh(){}function Kh(i,o){var u=st,h=un(),m=o(),v=!Sn(h.memoizedState,m);if(v&&(h.memoizedState=m,$t=!0),h=h.queue,Cu(td.bind(null,u,h,i),[i]),h.getSnapshot!==o||v||mt!==null&&mt.memoizedState.tag&1){if(u.flags|=2048,Fs(9,ed.bind(null,u,h,m,o),void 0,null),vt===null)throw Error(n(349));$r&30||Jh(u,o,m)}return m}function Jh(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=st.updateQueue,o===null?(o={lastEffect:null,stores:null},st.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function ed(i,o,u,h){o.value=u,o.getSnapshot=h,nd(o)&&rd(i)}function td(i,o,u){return u(function(){nd(o)&&rd(i)})}function nd(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Sn(i,u)}catch{return!0}}function rd(i){var o=Zn(i,1);o!==null&&Tn(o,i,1,-1)}function id(i){var o=Rn();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:i},o.queue=i,i=i.dispatch=l0.bind(null,st,i),[o.memoizedState,i]}function Fs(i,o,u,h){return i={tag:i,create:o,destroy:u,deps:h,next:null},o=st.updateQueue,o===null?(o={lastEffect:null,stores:null},st.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(h=u.next,u.next=i,i.next=h,o.lastEffect=i)),i}function sd(){return un().memoizedState}function ia(i,o,u,h){var m=Rn();st.flags|=i,m.memoizedState=Fs(1|o,u,void 0,h===void 0?null:h)}function sa(i,o,u,h){var m=un();h=h===void 0?null:h;var v=void 0;if(dt!==null){var b=dt.memoizedState;if(v=b.destroy,h!==null&&Eu(h,b.deps)){m.memoizedState=Fs(o,u,v,h);return}}st.flags|=i,m.memoizedState=Fs(1|o,u,v,h)}function od(i,o){return ia(8390656,8,i,o)}function Cu(i,o){return sa(2048,8,i,o)}function ad(i,o){return sa(4,2,i,o)}function ld(i,o){return sa(4,4,i,o)}function ud(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function cd(i,o,u){return u=u!=null?u.concat([i]):null,sa(4,4,ud.bind(null,o,i),u)}function _u(){}function fd(i,o){var u=un();o=o===void 0?null:o;var h=u.memoizedState;return h!==null&&o!==null&&Eu(o,h[1])?h[0]:(u.memoizedState=[i,o],i)}function hd(i,o){var u=un();o=o===void 0?null:o;var h=u.memoizedState;return h!==null&&o!==null&&Eu(o,h[1])?h[0]:(i=i(),u.memoizedState=[i,o],i)}function dd(i,o,u){return $r&21?(Sn(u,o)||(u=$f(),st.lanes|=u,Hr|=u,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,$t=!0),i.memoizedState=u)}function o0(i,o){var u=Qe;Qe=u!==0&&4>u?u:4,i(!0);var h=Su.transition;Su.transition={};try{i(!1),o()}finally{Qe=u,Su.transition=h}}function pd(){return un().memoizedState}function a0(i,o,u){var h=xr(i);if(u={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null},gd(i))md(o,u);else if(u=jh(i,o,u,h),u!==null){var m=Ot();Tn(u,i,h,m),vd(u,o,h)}}function l0(i,o,u){var h=xr(i),m={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null};if(gd(i))md(o,m);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var b=o.lastRenderedState,O=v(b,u);if(m.hasEagerState=!0,m.eagerState=O,Sn(O,b)){var U=o.interleaved;U===null?(m.next=m,gu(o)):(m.next=U.next,U.next=m),o.interleaved=m;return}}catch{}finally{}u=jh(i,o,m,h),u!==null&&(m=Ot(),Tn(u,i,h,m),vd(u,o,h))}}function gd(i){var o=i.alternate;return i===st||o!==null&&o===st}function md(i,o){Os=ra=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function vd(i,o,u){if(u&4194240){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,Ll(i,u)}}var oa={readContext:ln,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},u0={readContext:ln,useCallback:function(i,o){return Rn().memoizedState=[i,o===void 0?null:o],i},useContext:ln,useEffect:od,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,ia(4194308,4,ud.bind(null,o,i),u)},useLayoutEffect:function(i,o){return ia(4194308,4,i,o)},useInsertionEffect:function(i,o){return ia(4,2,i,o)},useMemo:function(i,o){var u=Rn();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var h=Rn();return o=u!==void 0?u(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=a0.bind(null,st,i),[h.memoizedState,i]},useRef:function(i){var o=Rn();return i={current:i},o.memoizedState=i},useState:id,useDebugValue:_u,useDeferredValue:function(i){return Rn().memoizedState=i},useTransition:function(){var i=id(!1),o=i[0];return i=o0.bind(null,i[1]),Rn().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var h=st,m=Rn();if(rt){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),vt===null)throw Error(n(349));$r&30||Jh(h,o,u)}m.memoizedState=u;var v={value:u,getSnapshot:o};return m.queue=v,od(td.bind(null,h,v,i),[i]),h.flags|=2048,Fs(9,ed.bind(null,h,v,u,o),void 0,null),u},useId:function(){var i=Rn(),o=vt.identifierPrefix;if(rt){var u=Xn,h=Yn;u=(h&~(1<<32-wn(h)-1)).toString(32)+u,o=":"+o+"R"+u,u=Is++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=s0++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},c0={readContext:ln,useCallback:fd,useContext:ln,useEffect:Cu,useImperativeHandle:cd,useInsertionEffect:ad,useLayoutEffect:ld,useMemo:hd,useReducer:Pu,useRef:sd,useState:function(){return Pu(Rs)},useDebugValue:_u,useDeferredValue:function(i){var o=un();return dd(o,dt.memoizedState,i)},useTransition:function(){var i=Pu(Rs)[0],o=un().memoizedState;return[i,o]},useMutableSource:Qh,useSyncExternalStore:Kh,useId:pd,unstable_isNewReconciler:!1},f0={readContext:ln,useCallback:fd,useContext:ln,useEffect:Cu,useImperativeHandle:cd,useInsertionEffect:ad,useLayoutEffect:ld,useMemo:hd,useReducer:Tu,useRef:sd,useState:function(){return Tu(Rs)},useDebugValue:_u,useDeferredValue:function(i){var o=un();return dt===null?o.memoizedState=i:dd(o,dt.memoizedState,i)},useTransition:function(){var i=Tu(Rs)[0],o=un().memoizedState;return[i,o]},useMutableSource:Qh,useSyncExternalStore:Kh,useId:pd,unstable_isNewReconciler:!1};function An(i,o){if(i&&i.defaultProps){o=H({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function ku(i,o,u,h){o=i.memoizedState,u=u(h,o),u=u==null?o:H({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var aa={isMounted:function(i){return(i=i._reactInternals)?Fr(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var h=Ot(),m=xr(i),v=Qn(h,m);v.payload=o,u!=null&&(v.callback=u),o=gr(i,v,m),o!==null&&(Tn(o,i,m,h),Jo(o,i,m))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var h=Ot(),m=xr(i),v=Qn(h,m);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=gr(i,v,m),o!==null&&(Tn(o,i,m,h),Jo(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Ot(),h=xr(i),m=Qn(u,h);m.tag=2,o!=null&&(m.callback=o),o=gr(i,m,h),o!==null&&(Tn(o,i,h,u),Jo(o,i,h))}};function yd(i,o,u,h,m,v,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,v,b):o.prototype&&o.prototype.isPureReactComponent?!Es(u,h)||!Es(m,v):!0}function xd(i,o,u){var h=!1,m=hr,v=o.contextType;return typeof v=="object"&&v!==null?v=ln(v):(m=Gt(o)?Br:Tt.current,h=o.contextTypes,v=(h=h!=null)?bi(i,m):hr),o=new o(u,v),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=aa,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=v),o}function wd(i,o,u,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==i&&aa.enqueueReplaceState(o,o.state,null)}function Lu(i,o,u,h){var m=i.stateNode;m.props=u,m.state=i.memoizedState,m.refs={},mu(i);var v=o.contextType;typeof v=="object"&&v!==null?m.context=ln(v):(v=Gt(o)?Br:Tt.current,m.context=bi(i,v)),m.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(ku(i,o,v,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&aa.enqueueReplaceState(m,m.state,null),ea(i,u,m,h),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function Ni(i,o){try{var u="",h=o;do u+=fe(h),h=h.return;while(h);var m=u}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:i,source:o,stack:m,digest:null}}function Mu(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Nu(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var h0=typeof WeakMap=="function"?WeakMap:Map;function Sd(i,o,u){u=Qn(-1,u),u.tag=3,u.payload={element:null};var h=o.value;return u.callback=function(){pa||(pa=!0,qu=h),Nu(i,o)},u}function Ed(i,o,u){u=Qn(-1,u),u.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var m=o.value;u.payload=function(){return h(m)},u.callback=function(){Nu(i,o)}}var v=i.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){Nu(i,o),typeof h!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})}),u}function Ad(i,o,u){var h=i.pingCache;if(h===null){h=i.pingCache=new h0;var m=new Set;h.set(o,m)}else m=h.get(o),m===void 0&&(m=new Set,h.set(o,m));m.has(u)||(m.add(u),i=T0.bind(null,i,o,u),o.then(i,i))}function bd(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Pd(i,o,u,h,m){return i.mode&1?(i.flags|=65536,i.lanes=m,i):(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Qn(-1,1),o.tag=2,gr(u,o,1))),u.lanes|=1),i)}var d0=F.ReactCurrentOwner,$t=!1;function Nt(i,o,u,h){o.child=i===null?Wh(o,null,u,h):_i(o,i.child,u,h)}function Td(i,o,u,h,m){u=u.render;var v=o.ref;return Li(o,m),h=Au(i,o,u,h,v,m),u=bu(),i!==null&&!$t?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,Kn(i,o,m)):(rt&&u&&ou(o),o.flags|=1,Nt(i,o,h,m),o.child)}function Cd(i,o,u,h,m){if(i===null){var v=u.type;return typeof v=="function"&&!ec(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=v,_d(i,o,v,h,m)):(i=wa(u.type,null,h,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,!(i.lanes&m)){var b=v.memoizedProps;if(u=u.compare,u=u!==null?u:Es,u(b,h)&&i.ref===o.ref)return Kn(i,o,m)}return o.flags|=1,i=Sr(v,h),i.ref=o.ref,i.return=o,o.child=i}function _d(i,o,u,h,m){if(i!==null){var v=i.memoizedProps;if(Es(v,h)&&i.ref===o.ref)if($t=!1,o.pendingProps=h=v,(i.lanes&m)!==0)i.flags&131072&&($t=!0);else return o.lanes=i.lanes,Kn(i,o,m)}return Ou(i,o,u,h,m)}function kd(i,o,u){var h=o.pendingProps,m=h.children,v=i!==null?i.memoizedState:null;if(h.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Ii,Jt),Jt|=u;else{if(!(u&1073741824))return i=v!==null?v.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,et(Ii,Jt),Jt|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:u,et(Ii,Jt),Jt|=h}else v!==null?(h=v.baseLanes|u,o.memoizedState=null):h=u,et(Ii,Jt),Jt|=h;return Nt(i,o,m,u),o.child}function Ld(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Ou(i,o,u,h,m){var v=Gt(u)?Br:Tt.current;return v=bi(o,v),Li(o,m),u=Au(i,o,u,h,v,m),h=bu(),i!==null&&!$t?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,Kn(i,o,m)):(rt&&h&&ou(o),o.flags|=1,Nt(i,o,u,m),o.child)}function Md(i,o,u,h,m){if(Gt(u)){var v=!0;Wo(o)}else v=!1;if(Li(o,m),o.stateNode===null)ua(i,o),xd(o,u,h),Lu(o,u,h,m),h=!0;else if(i===null){var b=o.stateNode,O=o.memoizedProps;b.props=O;var U=b.context,ee=u.contextType;typeof ee=="object"&&ee!==null?ee=ln(ee):(ee=Gt(u)?Br:Tt.current,ee=bi(o,ee));var ae=u.getDerivedStateFromProps,ue=typeof ae=="function"||typeof b.getSnapshotBeforeUpdate=="function";ue||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(O!==h||U!==ee)&&wd(o,b,h,ee),pr=!1;var oe=o.memoizedState;b.state=oe,ea(o,h,b,m),U=o.memoizedState,O!==h||oe!==U||Ut.current||pr?(typeof ae=="function"&&(ku(o,u,ae,h),U=o.memoizedState),(O=pr||yd(o,u,O,h,oe,U,ee))?(ue||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=U),b.props=h,b.state=U,b.context=ee,h=O):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{b=o.stateNode,qh(i,o),O=o.memoizedProps,ee=o.type===o.elementType?O:An(o.type,O),b.props=ee,ue=o.pendingProps,oe=b.context,U=u.contextType,typeof U=="object"&&U!==null?U=ln(U):(U=Gt(u)?Br:Tt.current,U=bi(o,U));var Ae=u.getDerivedStateFromProps;(ae=typeof Ae=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(O!==ue||oe!==U)&&wd(o,b,h,U),pr=!1,oe=o.memoizedState,b.state=oe,ea(o,h,b,m);var Pe=o.memoizedState;O!==ue||oe!==Pe||Ut.current||pr?(typeof Ae=="function"&&(ku(o,u,Ae,h),Pe=o.memoizedState),(ee=pr||yd(o,u,ee,h,oe,Pe,U)||!1)?(ae||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,Pe,U),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,Pe,U)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||O===i.memoizedProps&&oe===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&oe===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=Pe),b.props=h,b.state=Pe,b.context=U,h=ee):(typeof b.componentDidUpdate!="function"||O===i.memoizedProps&&oe===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&oe===i.memoizedState||(o.flags|=1024),h=!1)}return Iu(i,o,u,h,v,m)}function Iu(i,o,u,h,m,v){Ld(i,o);var b=(o.flags&128)!==0;if(!h&&!b)return m&&Fh(o,u,!1),Kn(i,o,v);h=o.stateNode,d0.current=o;var O=b&&typeof u.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&b?(o.child=_i(o,i.child,null,v),o.child=_i(o,null,O,v)):Nt(i,o,O,v),o.memoizedState=h.state,m&&Fh(o,u,!0),o.child}function Nd(i){var o=i.stateNode;o.pendingContext?Ih(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Ih(i,o.context,!1),vu(i,o.containerInfo)}function Od(i,o,u,h,m){return Ci(),cu(m),o.flags|=256,Nt(i,o,u,h),o.child}var Ru={dehydrated:null,treeContext:null,retryLane:0};function Fu(i){return{baseLanes:i,cachePool:null,transitions:null}}function Id(i,o,u){var h=o.pendingProps,m=it.current,v=!1,b=(o.flags&128)!==0,O;if((O=b)||(O=i!==null&&i.memoizedState===null?!1:(m&2)!==0),O?(v=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),et(it,m&1),i===null)return uu(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(b=h.children,i=h.fallback,v?(h=o.mode,v=o.child,b={mode:"hidden",children:b},!(h&1)&&v!==null?(v.childLanes=0,v.pendingProps=b):v=Sa(b,h,0,null),i=Yr(i,h,u,null),v.return=o,i.return=o,v.sibling=i,o.child=v,o.child.memoizedState=Fu(u),o.memoizedState=Ru,i):Du(o,b));if(m=i.memoizedState,m!==null&&(O=m.dehydrated,O!==null))return p0(i,o,b,h,O,m,u);if(v){v=h.fallback,b=o.mode,m=i.child,O=m.sibling;var U={mode:"hidden",children:h.children};return!(b&1)&&o.child!==m?(h=o.child,h.childLanes=0,h.pendingProps=U,o.deletions=null):(h=Sr(m,U),h.subtreeFlags=m.subtreeFlags&14680064),O!==null?v=Sr(O,v):(v=Yr(v,b,u,null),v.flags|=2),v.return=o,h.return=o,h.sibling=v,o.child=h,h=v,v=o.child,b=i.child.memoizedState,b=b===null?Fu(u):{baseLanes:b.baseLanes|u,cachePool:null,transitions:b.transitions},v.memoizedState=b,v.childLanes=i.childLanes&~u,o.memoizedState=Ru,h}return v=i.child,i=v.sibling,h=Sr(v,{mode:"visible",children:h.children}),!(o.mode&1)&&(h.lanes=u),h.return=o,h.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=h,o.memoizedState=null,h}function Du(i,o){return o=Sa({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function la(i,o,u,h){return h!==null&&cu(h),_i(o,i.child,null,u),i=Du(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function p0(i,o,u,h,m,v,b){if(u)return o.flags&256?(o.flags&=-257,h=Mu(Error(n(422))),la(i,o,b,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(v=h.fallback,m=o.mode,h=Sa({mode:"visible",children:h.children},m,0,null),v=Yr(v,m,b,null),v.flags|=2,h.return=o,v.return=o,h.sibling=v,o.child=h,o.mode&1&&_i(o,i.child,null,b),o.child.memoizedState=Fu(b),o.memoizedState=Ru,v);if(!(o.mode&1))return la(i,o,b,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var O=h.dgst;return h=O,v=Error(n(419)),h=Mu(v,h,void 0),la(i,o,b,h)}if(O=(b&i.childLanes)!==0,$t||O){if(h=vt,h!==null){switch(b&-b){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(h.suspendedLanes|b)?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,Zn(i,m),Tn(h,i,m,-1))}return Ju(),h=Mu(Error(n(421))),la(i,o,b,h)}return m.data==="$?"?(o.flags|=128,o.child=i.child,o=C0.bind(null,i),m._reactRetry=o,null):(i=v.treeContext,Kt=cr(m.nextSibling),Qt=o,rt=!0,En=null,i!==null&&(on[an++]=Yn,on[an++]=Xn,on[an++]=zr,Yn=i.id,Xn=i.overflow,zr=o),o=Du(o,h.children),o.flags|=4096,o)}function Rd(i,o,u){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),pu(i.return,o,u)}function Bu(i,o,u,h,m){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:m}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=u,v.tailMode=m)}function Fd(i,o,u){var h=o.pendingProps,m=h.revealOrder,v=h.tail;if(Nt(i,o,h.children,u),h=it.current,h&2)h=h&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Rd(i,u,o);else if(i.tag===19)Rd(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(et(it,h),!(o.mode&1))o.memoizedState=null;else switch(m){case"forwards":for(u=o.child,m=null;u!==null;)i=u.alternate,i!==null&&ta(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),Bu(o,!1,m,u,v);break;case"backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&ta(i)===null){o.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}Bu(o,!0,u,null,v);break;case"together":Bu(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ua(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Kn(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Hr|=o.lanes,!(u&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,u=Sr(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Sr(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function g0(i,o,u){switch(o.tag){case 3:Nd(o),Ci();break;case 5:Zh(o);break;case 1:Gt(o.type)&&Wo(o);break;case 4:vu(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,m=o.memoizedProps.value;et(Qo,h._currentValue),h._currentValue=m;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(et(it,it.current&1),o.flags|=128,null):u&o.child.childLanes?Id(i,o,u):(et(it,it.current&1),i=Kn(i,o,u),i!==null?i.sibling:null);et(it,it.current&1);break;case 19:if(h=(u&o.childLanes)!==0,i.flags&128){if(h)return Fd(i,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),et(it,it.current),h)break;return null;case 22:case 23:return o.lanes=0,kd(i,o,u)}return Kn(i,o,u)}var Dd,zu,Bd,zd;Dd=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},zu=function(){},Bd=function(i,o,u,h){var m=i.memoizedProps;if(m!==h){i=o.stateNode,Gr(In.current);var v=null;switch(u){case"input":m=le(i,m),h=le(i,h),v=[];break;case"select":m=H({},m,{value:void 0}),h=H({},h,{value:void 0}),v=[];break;case"textarea":m=De(i,m),h=De(i,h),v=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=Go)}fi(u,h);var b;u=null;for(ee in m)if(!h.hasOwnProperty(ee)&&m.hasOwnProperty(ee)&&m[ee]!=null)if(ee==="style"){var O=m[ee];for(b in O)O.hasOwnProperty(b)&&(u||(u={}),u[b]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(s.hasOwnProperty(ee)?v||(v=[]):(v=v||[]).push(ee,null));for(ee in h){var U=h[ee];if(O=m!=null?m[ee]:void 0,h.hasOwnProperty(ee)&&U!==O&&(U!=null||O!=null))if(ee==="style")if(O){for(b in O)!O.hasOwnProperty(b)||U&&U.hasOwnProperty(b)||(u||(u={}),u[b]="");for(b in U)U.hasOwnProperty(b)&&O[b]!==U[b]&&(u||(u={}),u[b]=U[b])}else u||(v||(v=[]),v.push(ee,u)),u=U;else ee==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,O=O?O.__html:void 0,U!=null&&O!==U&&(v=v||[]).push(ee,U)):ee==="children"?typeof U!="string"&&typeof U!="number"||(v=v||[]).push(ee,""+U):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(s.hasOwnProperty(ee)?(U!=null&&ee==="onScroll"&&tt("scroll",i),v||O===U||(v=[])):(v=v||[]).push(ee,U))}u&&(v=v||[]).push("style",u);var ee=v;(o.updateQueue=ee)&&(o.flags|=4)}},zd=function(i,o,u,h){u!==h&&(o.flags|=4)};function Ds(i,o){if(!rt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function _t(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,h=0;if(o)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=h,i.childLanes=u,o}function m0(i,o,u){var h=o.pendingProps;switch(au(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(o),null;case 1:return Gt(o.type)&&Ho(),_t(o),null;case 3:return h=o.stateNode,Mi(),nt(Ut),nt(Tt),wu(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(Xo(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,En!==null&&(Zu(En),En=null))),zu(i,o),_t(o),null;case 5:yu(o);var m=Gr(Ns.current);if(u=o.type,i!==null&&o.stateNode!=null)Bd(i,o,u,h,m),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(n(166));return _t(o),null}if(i=Gr(In.current),Xo(o)){h=o.stateNode,u=o.type;var v=o.memoizedProps;switch(h[On]=o,h[Cs]=v,i=(o.mode&1)!==0,u){case"dialog":tt("cancel",h),tt("close",h);break;case"iframe":case"object":case"embed":tt("load",h);break;case"video":case"audio":for(m=0;m<bs.length;m++)tt(bs[m],h);break;case"source":tt("error",h);break;case"img":case"image":case"link":tt("error",h),tt("load",h);break;case"details":tt("toggle",h);break;case"input":we(h,v),tt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},tt("invalid",h);break;case"textarea":sn(h,v),tt("invalid",h)}fi(u,v),m=null;for(var b in v)if(v.hasOwnProperty(b)){var O=v[b];b==="children"?typeof O=="string"?h.textContent!==O&&(v.suppressHydrationWarning!==!0&&Uo(h.textContent,O,i),m=["children",O]):typeof O=="number"&&h.textContent!==""+O&&(v.suppressHydrationWarning!==!0&&Uo(h.textContent,O,i),m=["children",""+O]):s.hasOwnProperty(b)&&O!=null&&b==="onScroll"&&tt("scroll",h)}switch(u){case"input":ke(h),Z(h,v,!0);break;case"textarea":ke(h),xt(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=Go)}h=m,o.updateQueue=h,h!==null&&(o.flags|=4)}else{b=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ze(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=b.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=b.createElement(u,{is:h.is}):(i=b.createElement(u),u==="select"&&(b=i,h.multiple?b.multiple=!0:h.size&&(b.size=h.size))):i=b.createElementNS(i,u),i[On]=o,i[Cs]=h,Dd(i,o,!1,!1),o.stateNode=i;e:{switch(b=hi(u,h),u){case"dialog":tt("cancel",i),tt("close",i),m=h;break;case"iframe":case"object":case"embed":tt("load",i),m=h;break;case"video":case"audio":for(m=0;m<bs.length;m++)tt(bs[m],i);m=h;break;case"source":tt("error",i),m=h;break;case"img":case"image":case"link":tt("error",i),tt("load",i),m=h;break;case"details":tt("toggle",i),m=h;break;case"input":we(i,h),m=le(i,h),tt("invalid",i);break;case"option":m=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},m=H({},h,{value:void 0}),tt("invalid",i);break;case"textarea":sn(i,h),m=De(i,h),tt("invalid",i);break;default:m=h}fi(u,m),O=m;for(v in O)if(O.hasOwnProperty(v)){var U=O[v];v==="style"?xo(i,U):v==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&ci(i,U)):v==="children"?typeof U=="string"?(u!=="textarea"||U!=="")&&Ir(i,U):typeof U=="number"&&Ir(i,""+U):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?U!=null&&v==="onScroll"&&tt("scroll",i):U!=null&&M(i,v,U,b))}switch(u){case"input":ke(i),Z(i,h,!1);break;case"textarea":ke(i),xt(i);break;case"option":h.value!=null&&i.setAttribute("value",""+pe(h.value));break;case"select":i.multiple=!!h.multiple,v=h.value,v!=null?Re(i,!!h.multiple,v,!1):h.defaultValue!=null&&Re(i,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=Go)}switch(u){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return _t(o),null;case 6:if(i&&o.stateNode!=null)zd(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(n(166));if(u=Gr(Ns.current),Gr(In.current),Xo(o)){if(h=o.stateNode,u=o.memoizedProps,h[On]=o,(v=h.nodeValue!==u)&&(i=Qt,i!==null))switch(i.tag){case 3:Uo(h.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Uo(h.nodeValue,u,(i.mode&1)!==0)}v&&(o.flags|=4)}else h=(u.nodeType===9?u:u.ownerDocument).createTextNode(h),h[On]=o,o.stateNode=h}return _t(o),null;case 13:if(nt(it),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(rt&&Kt!==null&&o.mode&1&&!(o.flags&128))Gh(),Ci(),o.flags|=98560,v=!1;else if(v=Xo(o),h!==null&&h.dehydrated!==null){if(i===null){if(!v)throw Error(n(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[On]=o}else Ci(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;_t(o),v=!1}else En!==null&&(Zu(En),En=null),v=!0;if(!v)return o.flags&65536?o:null}return o.flags&128?(o.lanes=u,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,o.mode&1&&(i===null||it.current&1?pt===0&&(pt=3):Ju())),o.updateQueue!==null&&(o.flags|=4),_t(o),null);case 4:return Mi(),zu(i,o),i===null&&Ps(o.stateNode.containerInfo),_t(o),null;case 10:return du(o.type._context),_t(o),null;case 17:return Gt(o.type)&&Ho(),_t(o),null;case 19:if(nt(it),v=o.memoizedState,v===null)return _t(o),null;if(h=(o.flags&128)!==0,b=v.rendering,b===null)if(h)Ds(v,!1);else{if(pt!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(b=ta(i),b!==null){for(o.flags|=128,Ds(v,!1),h=b.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=u,u=o.child;u!==null;)v=u,i=h,v.flags&=14680066,b=v.alternate,b===null?(v.childLanes=0,v.lanes=i,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=b.childLanes,v.lanes=b.lanes,v.child=b.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=b.memoizedProps,v.memoizedState=b.memoizedState,v.updateQueue=b.updateQueue,v.type=b.type,i=b.dependencies,v.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return et(it,it.current&1|2),o.child}i=i.sibling}v.tail!==null&&lt()>Ri&&(o.flags|=128,h=!0,Ds(v,!1),o.lanes=4194304)}else{if(!h)if(i=ta(b),i!==null){if(o.flags|=128,h=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Ds(v,!0),v.tail===null&&v.tailMode==="hidden"&&!b.alternate&&!rt)return _t(o),null}else 2*lt()-v.renderingStartTime>Ri&&u!==1073741824&&(o.flags|=128,h=!0,Ds(v,!1),o.lanes=4194304);v.isBackwards?(b.sibling=o.child,o.child=b):(u=v.last,u!==null?u.sibling=b:o.child=b,v.last=b)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=lt(),o.sibling=null,u=it.current,et(it,h?u&1|2:u&1),o):(_t(o),null);case 22:case 23:return Ku(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&o.mode&1?Jt&1073741824&&(_t(o),o.subtreeFlags&6&&(o.flags|=8192)):_t(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function v0(i,o){switch(au(o),o.tag){case 1:return Gt(o.type)&&Ho(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Mi(),nt(Ut),nt(Tt),wu(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return yu(o),null;case 13:if(nt(it),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Ci()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return nt(it),null;case 4:return Mi(),null;case 10:return du(o.type._context),null;case 22:case 23:return Ku(),null;case 24:return null;default:return null}}var ca=!1,kt=!1,y0=typeof WeakSet=="function"?WeakSet:Set,be=null;function Oi(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(h){ot(i,o,h)}else u.current=null}function Vu(i,o,u){try{u()}catch(h){ot(i,o,h)}}var Vd=!1;function x0(i,o){if(Kl=Lo,i=yh(),Hl(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var m=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var b=0,O=-1,U=-1,ee=0,ae=0,ue=i,oe=null;t:for(;;){for(var Ae;ue!==u||m!==0&&ue.nodeType!==3||(O=b+m),ue!==v||h!==0&&ue.nodeType!==3||(U=b+h),ue.nodeType===3&&(b+=ue.nodeValue.length),(Ae=ue.firstChild)!==null;)oe=ue,ue=Ae;for(;;){if(ue===i)break t;if(oe===u&&++ee===m&&(O=b),oe===v&&++ae===h&&(U=b),(Ae=ue.nextSibling)!==null)break;ue=oe,oe=ue.parentNode}ue=Ae}u=O===-1||U===-1?null:{start:O,end:U}}else u=null}u=u||{start:0,end:0}}else u=null;for(Jl={focusedElem:i,selectionRange:u},Lo=!1,be=o;be!==null;)if(o=be,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,be=i;else for(;be!==null;){o=be;try{var Pe=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var Te=Pe.memoizedProps,ut=Pe.memoizedState,Y=o.stateNode,W=Y.getSnapshotBeforeUpdate(o.elementType===o.type?Te:An(o.type,Te),ut);Y.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Q=o.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ge){ot(o,o.return,ge)}if(i=o.sibling,i!==null){i.return=o.return,be=i;break}be=o.return}return Pe=Vd,Vd=!1,Pe}function Bs(i,o,u){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&i)===i){var v=m.destroy;m.destroy=void 0,v!==void 0&&Vu(o,u,v)}m=m.next}while(m!==h)}}function fa(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var h=u.create;u.destroy=h()}u=u.next}while(u!==o)}}function Uu(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function Ud(i){var o=i.alternate;o!==null&&(i.alternate=null,Ud(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[On],delete o[Cs],delete o[ru],delete o[t0],delete o[n0])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Gd(i){return i.tag===5||i.tag===3||i.tag===4}function $d(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Gd(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Gu(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Go));else if(h!==4&&(i=i.child,i!==null))for(Gu(i,o,u),i=i.sibling;i!==null;)Gu(i,o,u),i=i.sibling}function $u(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for($u(i,o,u),i=i.sibling;i!==null;)$u(i,o,u),i=i.sibling}var wt=null,bn=!1;function mr(i,o,u){for(u=u.child;u!==null;)Hd(i,o,u),u=u.sibling}function Hd(i,o,u){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(bo,u)}catch{}switch(u.tag){case 5:kt||Oi(u,o);case 6:var h=wt,m=bn;wt=null,mr(i,o,u),wt=h,bn=m,wt!==null&&(bn?(i=wt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):wt.removeChild(u.stateNode));break;case 18:wt!==null&&(bn?(i=wt,u=u.stateNode,i.nodeType===8?nu(i.parentNode,u):i.nodeType===1&&nu(i,u),ms(i)):nu(wt,u.stateNode));break;case 4:h=wt,m=bn,wt=u.stateNode.containerInfo,bn=!0,mr(i,o,u),wt=h,bn=m;break;case 0:case 11:case 14:case 15:if(!kt&&(h=u.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var v=m,b=v.destroy;v=v.tag,b!==void 0&&(v&2||v&4)&&Vu(u,o,b),m=m.next}while(m!==h)}mr(i,o,u);break;case 1:if(!kt&&(Oi(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=u.memoizedProps,h.state=u.memoizedState,h.componentWillUnmount()}catch(O){ot(u,o,O)}mr(i,o,u);break;case 21:mr(i,o,u);break;case 22:u.mode&1?(kt=(h=kt)||u.memoizedState!==null,mr(i,o,u),kt=h):mr(i,o,u);break;default:mr(i,o,u)}}function Wd(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new y0),o.forEach(function(h){var m=_0.bind(null,i,h);u.has(h)||(u.add(h),h.then(m,m))})}}function Pn(i,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];try{var v=i,b=o,O=b;e:for(;O!==null;){switch(O.tag){case 5:wt=O.stateNode,bn=!1;break e;case 3:wt=O.stateNode.containerInfo,bn=!0;break e;case 4:wt=O.stateNode.containerInfo,bn=!0;break e}O=O.return}if(wt===null)throw Error(n(160));Hd(v,b,m),wt=null,bn=!1;var U=m.alternate;U!==null&&(U.return=null),m.return=null}catch(ee){ot(m,o,ee)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)jd(o,i),o=o.sibling}function jd(i,o){var u=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Pn(o,i),Fn(i),h&4){try{Bs(3,i,i.return),fa(3,i)}catch(Te){ot(i,i.return,Te)}try{Bs(5,i,i.return)}catch(Te){ot(i,i.return,Te)}}break;case 1:Pn(o,i),Fn(i),h&512&&u!==null&&Oi(u,u.return);break;case 5:if(Pn(o,i),Fn(i),h&512&&u!==null&&Oi(u,u.return),i.flags&32){var m=i.stateNode;try{Ir(m,"")}catch(Te){ot(i,i.return,Te)}}if(h&4&&(m=i.stateNode,m!=null)){var v=i.memoizedProps,b=u!==null?u.memoizedProps:v,O=i.type,U=i.updateQueue;if(i.updateQueue=null,U!==null)try{O==="input"&&v.type==="radio"&&v.name!=null&&ie(m,v),hi(O,b);var ee=hi(O,v);for(b=0;b<U.length;b+=2){var ae=U[b],ue=U[b+1];ae==="style"?xo(m,ue):ae==="dangerouslySetInnerHTML"?ci(m,ue):ae==="children"?Ir(m,ue):M(m,ae,ue,ee)}switch(O){case"input":z(m,v);break;case"textarea":Mt(m,v);break;case"select":var oe=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var Ae=v.value;Ae!=null?Re(m,!!v.multiple,Ae,!1):oe!==!!v.multiple&&(v.defaultValue!=null?Re(m,!!v.multiple,v.defaultValue,!0):Re(m,!!v.multiple,v.multiple?[]:"",!1))}m[Cs]=v}catch(Te){ot(i,i.return,Te)}}break;case 6:if(Pn(o,i),Fn(i),h&4){if(i.stateNode===null)throw Error(n(162));m=i.stateNode,v=i.memoizedProps;try{m.nodeValue=v}catch(Te){ot(i,i.return,Te)}}break;case 3:if(Pn(o,i),Fn(i),h&4&&u!==null&&u.memoizedState.isDehydrated)try{ms(o.containerInfo)}catch(Te){ot(i,i.return,Te)}break;case 4:Pn(o,i),Fn(i);break;case 13:Pn(o,i),Fn(i),m=i.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(ju=lt())),h&4&&Wd(i);break;case 22:if(ae=u!==null&&u.memoizedState!==null,i.mode&1?(kt=(ee=kt)||ae,Pn(o,i),kt=ee):Pn(o,i),Fn(i),h&8192){if(ee=i.memoizedState!==null,(i.stateNode.isHidden=ee)&&!ae&&i.mode&1)for(be=i,ae=i.child;ae!==null;){for(ue=be=ae;be!==null;){switch(oe=be,Ae=oe.child,oe.tag){case 0:case 11:case 14:case 15:Bs(4,oe,oe.return);break;case 1:Oi(oe,oe.return);var Pe=oe.stateNode;if(typeof Pe.componentWillUnmount=="function"){h=oe,u=oe.return;try{o=h,Pe.props=o.memoizedProps,Pe.state=o.memoizedState,Pe.componentWillUnmount()}catch(Te){ot(h,u,Te)}}break;case 5:Oi(oe,oe.return);break;case 22:if(oe.memoizedState!==null){Xd(ue);continue}}Ae!==null?(Ae.return=oe,be=Ae):Xd(ue)}ae=ae.sibling}e:for(ae=null,ue=i;;){if(ue.tag===5){if(ae===null){ae=ue;try{m=ue.stateNode,ee?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(O=ue.stateNode,U=ue.memoizedProps.style,b=U!=null&&U.hasOwnProperty("display")?U.display:null,O.style.display=yo("display",b))}catch(Te){ot(i,i.return,Te)}}}else if(ue.tag===6){if(ae===null)try{ue.stateNode.nodeValue=ee?"":ue.memoizedProps}catch(Te){ot(i,i.return,Te)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===i)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===i)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===i)break e;ae===ue&&(ae=null),ue=ue.return}ae===ue&&(ae=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Pn(o,i),Fn(i),h&4&&Wd(i);break;case 21:break;default:Pn(o,i),Fn(i)}}function Fn(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(Gd(u)){var h=u;break e}u=u.return}throw Error(n(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(Ir(m,""),h.flags&=-33);var v=$d(i);$u(i,v,m);break;case 3:case 4:var b=h.stateNode.containerInfo,O=$d(i);Gu(i,O,b);break;default:throw Error(n(161))}}catch(U){ot(i,i.return,U)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function w0(i,o,u){be=i,qd(i)}function qd(i,o,u){for(var h=(i.mode&1)!==0;be!==null;){var m=be,v=m.child;if(m.tag===22&&h){var b=m.memoizedState!==null||ca;if(!b){var O=m.alternate,U=O!==null&&O.memoizedState!==null||kt;O=ca;var ee=kt;if(ca=b,(kt=U)&&!ee)for(be=m;be!==null;)b=be,U=b.child,b.tag===22&&b.memoizedState!==null?Zd(m):U!==null?(U.return=b,be=U):Zd(m);for(;v!==null;)be=v,qd(v),v=v.sibling;be=m,ca=O,kt=ee}Yd(i)}else m.subtreeFlags&8772&&v!==null?(v.return=m,be=v):Yd(i)}}function Yd(i){for(;be!==null;){var o=be;if(o.flags&8772){var u=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:kt||fa(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!kt)if(u===null)h.componentDidMount();else{var m=o.elementType===o.type?u.memoizedProps:An(o.type,u.memoizedProps);h.componentDidUpdate(m,u.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&Xh(o,v,h);break;case 3:var b=o.updateQueue;if(b!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}Xh(o,b,u)}break;case 5:var O=o.stateNode;if(u===null&&o.flags&4){u=O;var U=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&u.focus();break;case"img":U.src&&(u.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var ee=o.alternate;if(ee!==null){var ae=ee.memoizedState;if(ae!==null){var ue=ae.dehydrated;ue!==null&&ms(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}kt||o.flags&512&&Uu(o)}catch(oe){ot(o,o.return,oe)}}if(o===i){be=null;break}if(u=o.sibling,u!==null){u.return=o.return,be=u;break}be=o.return}}function Xd(i){for(;be!==null;){var o=be;if(o===i){be=null;break}var u=o.sibling;if(u!==null){u.return=o.return,be=u;break}be=o.return}}function Zd(i){for(;be!==null;){var o=be;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{fa(4,o)}catch(U){ot(o,u,U)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var m=o.return;try{h.componentDidMount()}catch(U){ot(o,m,U)}}var v=o.return;try{Uu(o)}catch(U){ot(o,v,U)}break;case 5:var b=o.return;try{Uu(o)}catch(U){ot(o,b,U)}}}catch(U){ot(o,o.return,U)}if(o===i){be=null;break}var O=o.sibling;if(O!==null){O.return=o.return,be=O;break}be=o.return}}var S0=Math.ceil,ha=F.ReactCurrentDispatcher,Hu=F.ReactCurrentOwner,cn=F.ReactCurrentBatchConfig,We=0,vt=null,ht=null,St=0,Jt=0,Ii=fr(0),pt=0,zs=null,Hr=0,da=0,Wu=0,Vs=null,Ht=null,ju=0,Ri=1/0,Jn=null,pa=!1,qu=null,vr=null,ga=!1,yr=null,ma=0,Us=0,Yu=null,va=-1,ya=0;function Ot(){return We&6?lt():va!==-1?va:va=lt()}function xr(i){return i.mode&1?We&2&&St!==0?St&-St:i0.transition!==null?(ya===0&&(ya=$f()),ya):(i=Qe,i!==0||(i=window.event,i=i===void 0?16:Kf(i.type)),i):1}function Tn(i,o,u,h){if(50<Us)throw Us=0,Yu=null,Error(n(185));fs(i,u,h),(!(We&2)||i!==vt)&&(i===vt&&(!(We&2)&&(da|=u),pt===4&&wr(i,St)),Wt(i,h),u===1&&We===0&&!(o.mode&1)&&(Ri=lt()+500,jo&&dr()))}function Wt(i,o){var u=i.callbackNode;iy(i,o);var h=Co(i,i===vt?St:0);if(h===0)u!==null&&Vf(u),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(u!=null&&Vf(u),o===1)i.tag===0?r0(Kd.bind(null,i)):Dh(Kd.bind(null,i)),Jy(function(){!(We&6)&&dr()}),u=null;else{switch(Hf(h)){case 1:u=Cl;break;case 4:u=Uf;break;case 16:u=Ao;break;case 536870912:u=Gf;break;default:u=Ao}u=op(u,Qd.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function Qd(i,o){if(va=-1,ya=0,We&6)throw Error(n(327));var u=i.callbackNode;if(Fi()&&i.callbackNode!==u)return null;var h=Co(i,i===vt?St:0);if(h===0)return null;if(h&30||h&i.expiredLanes||o)o=xa(i,h);else{o=h;var m=We;We|=2;var v=ep();(vt!==i||St!==o)&&(Jn=null,Ri=lt()+500,jr(i,o));do try{b0();break}catch(O){Jd(i,O)}while(!0);hu(),ha.current=v,We=m,ht!==null?o=0:(vt=null,St=0,o=pt)}if(o!==0){if(o===2&&(m=_l(i),m!==0&&(h=m,o=Xu(i,m))),o===1)throw u=zs,jr(i,0),wr(i,h),Wt(i,lt()),u;if(o===6)wr(i,h);else{if(m=i.current.alternate,!(h&30)&&!E0(m)&&(o=xa(i,h),o===2&&(v=_l(i),v!==0&&(h=v,o=Xu(i,v))),o===1))throw u=zs,jr(i,0),wr(i,h),Wt(i,lt()),u;switch(i.finishedWork=m,i.finishedLanes=h,o){case 0:case 1:throw Error(n(345));case 2:qr(i,Ht,Jn);break;case 3:if(wr(i,h),(h&130023424)===h&&(o=ju+500-lt(),10<o)){if(Co(i,0)!==0)break;if(m=i.suspendedLanes,(m&h)!==h){Ot(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=tu(qr.bind(null,i,Ht,Jn),o);break}qr(i,Ht,Jn);break;case 4:if(wr(i,h),(h&4194240)===h)break;for(o=i.eventTimes,m=-1;0<h;){var b=31-wn(h);v=1<<b,b=o[b],b>m&&(m=b),h&=~v}if(h=m,h=lt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*S0(h/1960))-h,10<h){i.timeoutHandle=tu(qr.bind(null,i,Ht,Jn),h);break}qr(i,Ht,Jn);break;case 5:qr(i,Ht,Jn);break;default:throw Error(n(329))}}}return Wt(i,lt()),i.callbackNode===u?Qd.bind(null,i):null}function Xu(i,o){var u=Vs;return i.current.memoizedState.isDehydrated&&(jr(i,o).flags|=256),i=xa(i,o),i!==2&&(o=Ht,Ht=u,o!==null&&Zu(o)),i}function Zu(i){Ht===null?Ht=i:Ht.push.apply(Ht,i)}function E0(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var h=0;h<u.length;h++){var m=u[h],v=m.getSnapshot;m=m.value;try{if(!Sn(v(),m))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function wr(i,o){for(o&=~Wu,o&=~da,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-wn(o),h=1<<u;i[u]=-1,o&=~h}}function Kd(i){if(We&6)throw Error(n(327));Fi();var o=Co(i,0);if(!(o&1))return Wt(i,lt()),null;var u=xa(i,o);if(i.tag!==0&&u===2){var h=_l(i);h!==0&&(o=h,u=Xu(i,h))}if(u===1)throw u=zs,jr(i,0),wr(i,o),Wt(i,lt()),u;if(u===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,qr(i,Ht,Jn),Wt(i,lt()),null}function Qu(i,o){var u=We;We|=1;try{return i(o)}finally{We=u,We===0&&(Ri=lt()+500,jo&&dr())}}function Wr(i){yr!==null&&yr.tag===0&&!(We&6)&&Fi();var o=We;We|=1;var u=cn.transition,h=Qe;try{if(cn.transition=null,Qe=1,i)return i()}finally{Qe=h,cn.transition=u,We=o,!(We&6)&&dr()}}function Ku(){Jt=Ii.current,nt(Ii)}function jr(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,Ky(u)),ht!==null)for(u=ht.return;u!==null;){var h=u;switch(au(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Ho();break;case 3:Mi(),nt(Ut),nt(Tt),wu();break;case 5:yu(h);break;case 4:Mi();break;case 13:nt(it);break;case 19:nt(it);break;case 10:du(h.type._context);break;case 22:case 23:Ku()}u=u.return}if(vt=i,ht=i=Sr(i.current,null),St=Jt=o,pt=0,zs=null,Wu=da=Hr=0,Ht=Vs=null,Ur!==null){for(o=0;o<Ur.length;o++)if(u=Ur[o],h=u.interleaved,h!==null){u.interleaved=null;var m=h.next,v=u.pending;if(v!==null){var b=v.next;v.next=m,h.next=b}u.pending=h}Ur=null}return i}function Jd(i,o){do{var u=ht;try{if(hu(),na.current=oa,ra){for(var h=st.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}ra=!1}if($r=0,mt=dt=st=null,Os=!1,Is=0,Hu.current=null,u===null||u.return===null){pt=1,zs=o,ht=null;break}e:{var v=i,b=u.return,O=u,U=o;if(o=St,O.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var ee=U,ae=O,ue=ae.tag;if(!(ae.mode&1)&&(ue===0||ue===11||ue===15)){var oe=ae.alternate;oe?(ae.updateQueue=oe.updateQueue,ae.memoizedState=oe.memoizedState,ae.lanes=oe.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var Ae=bd(b);if(Ae!==null){Ae.flags&=-257,Pd(Ae,b,O,v,o),Ae.mode&1&&Ad(v,ee,o),o=Ae,U=ee;var Pe=o.updateQueue;if(Pe===null){var Te=new Set;Te.add(U),o.updateQueue=Te}else Pe.add(U);break e}else{if(!(o&1)){Ad(v,ee,o),Ju();break e}U=Error(n(426))}}else if(rt&&O.mode&1){var ut=bd(b);if(ut!==null){!(ut.flags&65536)&&(ut.flags|=256),Pd(ut,b,O,v,o),cu(Ni(U,O));break e}}v=U=Ni(U,O),pt!==4&&(pt=2),Vs===null?Vs=[v]:Vs.push(v),v=b;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o;var Y=Sd(v,U,o);Yh(v,Y);break e;case 1:O=U;var W=v.type,Q=v.stateNode;if(!(v.flags&128)&&(typeof W.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(vr===null||!vr.has(Q)))){v.flags|=65536,o&=-o,v.lanes|=o;var ge=Ed(v,O,o);Yh(v,ge);break e}}v=v.return}while(v!==null)}np(u)}catch(_e){o=_e,ht===u&&u!==null&&(ht=u=u.return);continue}break}while(!0)}function ep(){var i=ha.current;return ha.current=oa,i===null?oa:i}function Ju(){(pt===0||pt===3||pt===2)&&(pt=4),vt===null||!(Hr&268435455)&&!(da&268435455)||wr(vt,St)}function xa(i,o){var u=We;We|=2;var h=ep();(vt!==i||St!==o)&&(Jn=null,jr(i,o));do try{A0();break}catch(m){Jd(i,m)}while(!0);if(hu(),We=u,ha.current=h,ht!==null)throw Error(n(261));return vt=null,St=0,pt}function A0(){for(;ht!==null;)tp(ht)}function b0(){for(;ht!==null&&!Xv();)tp(ht)}function tp(i){var o=sp(i.alternate,i,Jt);i.memoizedProps=i.pendingProps,o===null?np(i):ht=o,Hu.current=null}function np(i){var o=i;do{var u=o.alternate;if(i=o.return,o.flags&32768){if(u=v0(u,o),u!==null){u.flags&=32767,ht=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{pt=6,ht=null;return}}else if(u=m0(u,o,Jt),u!==null){ht=u;return}if(o=o.sibling,o!==null){ht=o;return}ht=o=i}while(o!==null);pt===0&&(pt=5)}function qr(i,o,u){var h=Qe,m=cn.transition;try{cn.transition=null,Qe=1,P0(i,o,u,h)}finally{cn.transition=m,Qe=h}return null}function P0(i,o,u,h){do Fi();while(yr!==null);if(We&6)throw Error(n(327));u=i.finishedWork;var m=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var v=u.lanes|u.childLanes;if(sy(i,v),i===vt&&(ht=vt=null,St=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||ga||(ga=!0,op(Ao,function(){return Fi(),null})),v=(u.flags&15990)!==0,u.subtreeFlags&15990||v){v=cn.transition,cn.transition=null;var b=Qe;Qe=1;var O=We;We|=4,Hu.current=null,x0(i,u),jd(u,i),Wy(Jl),Lo=!!Kl,Jl=Kl=null,i.current=u,w0(u),Zv(),We=O,Qe=b,cn.transition=v}else i.current=u;if(ga&&(ga=!1,yr=i,ma=m),v=i.pendingLanes,v===0&&(vr=null),Jv(u.stateNode),Wt(i,lt()),o!==null)for(h=i.onRecoverableError,u=0;u<o.length;u++)m=o[u],h(m.value,{componentStack:m.stack,digest:m.digest});if(pa)throw pa=!1,i=qu,qu=null,i;return ma&1&&i.tag!==0&&Fi(),v=i.pendingLanes,v&1?i===Yu?Us++:(Us=0,Yu=i):Us=0,dr(),null}function Fi(){if(yr!==null){var i=Hf(ma),o=cn.transition,u=Qe;try{if(cn.transition=null,Qe=16>i?16:i,yr===null)var h=!1;else{if(i=yr,yr=null,ma=0,We&6)throw Error(n(331));var m=We;for(We|=4,be=i.current;be!==null;){var v=be,b=v.child;if(be.flags&16){var O=v.deletions;if(O!==null){for(var U=0;U<O.length;U++){var ee=O[U];for(be=ee;be!==null;){var ae=be;switch(ae.tag){case 0:case 11:case 15:Bs(8,ae,v)}var ue=ae.child;if(ue!==null)ue.return=ae,be=ue;else for(;be!==null;){ae=be;var oe=ae.sibling,Ae=ae.return;if(Ud(ae),ae===ee){be=null;break}if(oe!==null){oe.return=Ae,be=oe;break}be=Ae}}}var Pe=v.alternate;if(Pe!==null){var Te=Pe.child;if(Te!==null){Pe.child=null;do{var ut=Te.sibling;Te.sibling=null,Te=ut}while(Te!==null)}}be=v}}if(v.subtreeFlags&2064&&b!==null)b.return=v,be=b;else e:for(;be!==null;){if(v=be,v.flags&2048)switch(v.tag){case 0:case 11:case 15:Bs(9,v,v.return)}var Y=v.sibling;if(Y!==null){Y.return=v.return,be=Y;break e}be=v.return}}var W=i.current;for(be=W;be!==null;){b=be;var Q=b.child;if(b.subtreeFlags&2064&&Q!==null)Q.return=b,be=Q;else e:for(b=W;be!==null;){if(O=be,O.flags&2048)try{switch(O.tag){case 0:case 11:case 15:fa(9,O)}}catch(_e){ot(O,O.return,_e)}if(O===b){be=null;break e}var ge=O.sibling;if(ge!==null){ge.return=O.return,be=ge;break e}be=O.return}}if(We=m,dr(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(bo,i)}catch{}h=!0}return h}finally{Qe=u,cn.transition=o}}return!1}function rp(i,o,u){o=Ni(u,o),o=Sd(i,o,1),i=gr(i,o,1),o=Ot(),i!==null&&(fs(i,1,o),Wt(i,o))}function ot(i,o,u){if(i.tag===3)rp(i,i,u);else for(;o!==null;){if(o.tag===3){rp(o,i,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(vr===null||!vr.has(h))){i=Ni(u,i),i=Ed(o,i,1),o=gr(o,i,1),i=Ot(),o!==null&&(fs(o,1,i),Wt(o,i));break}}o=o.return}}function T0(i,o,u){var h=i.pingCache;h!==null&&h.delete(o),o=Ot(),i.pingedLanes|=i.suspendedLanes&u,vt===i&&(St&u)===u&&(pt===4||pt===3&&(St&130023424)===St&&500>lt()-ju?jr(i,0):Wu|=u),Wt(i,o)}function ip(i,o){o===0&&(i.mode&1?(o=To,To<<=1,!(To&130023424)&&(To=4194304)):o=1);var u=Ot();i=Zn(i,o),i!==null&&(fs(i,o,u),Wt(i,u))}function C0(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),ip(i,u)}function _0(i,o){var u=0;switch(i.tag){case 13:var h=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(n(314))}h!==null&&h.delete(o),ip(i,u)}var sp;sp=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||Ut.current)$t=!0;else{if(!(i.lanes&u)&&!(o.flags&128))return $t=!1,g0(i,o,u);$t=!!(i.flags&131072)}else $t=!1,rt&&o.flags&1048576&&Bh(o,Yo,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;ua(i,o),i=o.pendingProps;var m=bi(o,Tt.current);Li(o,u),m=Au(null,o,h,i,m,u);var v=bu();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Gt(h)?(v=!0,Wo(o)):v=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,mu(o),m.updater=aa,o.stateNode=m,m._reactInternals=o,Lu(o,h,i,u),o=Iu(null,o,h,!0,v,u)):(o.tag=0,rt&&v&&ou(o),Nt(null,o,m,u),o=o.child),o;case 16:h=o.elementType;e:{switch(ua(i,o),i=o.pendingProps,m=h._init,h=m(h._payload),o.type=h,m=o.tag=L0(h),i=An(h,i),m){case 0:o=Ou(null,o,h,i,u);break e;case 1:o=Md(null,o,h,i,u);break e;case 11:o=Td(null,o,h,i,u);break e;case 14:o=Cd(null,o,h,An(h.type,i),u);break e}throw Error(n(306,h,""))}return o;case 0:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:An(h,m),Ou(i,o,h,m,u);case 1:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:An(h,m),Md(i,o,h,m,u);case 3:e:{if(Nd(o),i===null)throw Error(n(387));h=o.pendingProps,v=o.memoizedState,m=v.element,qh(i,o),ea(o,h,null,u);var b=o.memoizedState;if(h=b.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){m=Ni(Error(n(423)),o),o=Od(i,o,h,u,m);break e}else if(h!==m){m=Ni(Error(n(424)),o),o=Od(i,o,h,u,m);break e}else for(Kt=cr(o.stateNode.containerInfo.firstChild),Qt=o,rt=!0,En=null,u=Wh(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ci(),h===m){o=Kn(i,o,u);break e}Nt(i,o,h,u)}o=o.child}return o;case 5:return Zh(o),i===null&&uu(o),h=o.type,m=o.pendingProps,v=i!==null?i.memoizedProps:null,b=m.children,eu(h,m)?b=null:v!==null&&eu(h,v)&&(o.flags|=32),Ld(i,o),Nt(i,o,b,u),o.child;case 6:return i===null&&uu(o),null;case 13:return Id(i,o,u);case 4:return vu(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=_i(o,null,h,u):Nt(i,o,h,u),o.child;case 11:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:An(h,m),Td(i,o,h,m,u);case 7:return Nt(i,o,o.pendingProps,u),o.child;case 8:return Nt(i,o,o.pendingProps.children,u),o.child;case 12:return Nt(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(h=o.type._context,m=o.pendingProps,v=o.memoizedProps,b=m.value,et(Qo,h._currentValue),h._currentValue=b,v!==null)if(Sn(v.value,b)){if(v.children===m.children&&!Ut.current){o=Kn(i,o,u);break e}}else for(v=o.child,v!==null&&(v.return=o);v!==null;){var O=v.dependencies;if(O!==null){b=v.child;for(var U=O.firstContext;U!==null;){if(U.context===h){if(v.tag===1){U=Qn(-1,u&-u),U.tag=2;var ee=v.updateQueue;if(ee!==null){ee=ee.shared;var ae=ee.pending;ae===null?U.next=U:(U.next=ae.next,ae.next=U),ee.pending=U}}v.lanes|=u,U=v.alternate,U!==null&&(U.lanes|=u),pu(v.return,u,o),O.lanes|=u;break}U=U.next}}else if(v.tag===10)b=v.type===o.type?null:v.child;else if(v.tag===18){if(b=v.return,b===null)throw Error(n(341));b.lanes|=u,O=b.alternate,O!==null&&(O.lanes|=u),pu(b,u,o),b=v.sibling}else b=v.child;if(b!==null)b.return=v;else for(b=v;b!==null;){if(b===o){b=null;break}if(v=b.sibling,v!==null){v.return=b.return,b=v;break}b=b.return}v=b}Nt(i,o,m.children,u),o=o.child}return o;case 9:return m=o.type,h=o.pendingProps.children,Li(o,u),m=ln(m),h=h(m),o.flags|=1,Nt(i,o,h,u),o.child;case 14:return h=o.type,m=An(h,o.pendingProps),m=An(h.type,m),Cd(i,o,h,m,u);case 15:return _d(i,o,o.type,o.pendingProps,u);case 17:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:An(h,m),ua(i,o),o.tag=1,Gt(h)?(i=!0,Wo(o)):i=!1,Li(o,u),xd(o,h,m),Lu(o,h,m,u),Iu(null,o,h,!0,i,u);case 19:return Fd(i,o,u);case 22:return kd(i,o,u)}throw Error(n(156,o.tag))};function op(i,o){return zf(i,o)}function k0(i,o,u,h){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(i,o,u,h){return new k0(i,o,u,h)}function ec(i){return i=i.prototype,!(!i||!i.isReactComponent)}function L0(i){if(typeof i=="function")return ec(i)?1:0;if(i!=null){if(i=i.$$typeof,i===G)return 11;if(i===re)return 14}return 2}function Sr(i,o){var u=i.alternate;return u===null?(u=fn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function wa(i,o,u,h,m,v){var b=2;if(h=i,typeof i=="function")ec(i)&&(b=1);else if(typeof i=="string")b=5;else e:switch(i){case y:return Yr(u.children,m,v,o);case S:b=8,m|=8;break;case A:return i=fn(12,u,o,m|2),i.elementType=A,i.lanes=v,i;case j:return i=fn(13,u,o,m),i.elementType=j,i.lanes=v,i;case J:return i=fn(19,u,o,m),i.elementType=J,i.lanes=v,i;case B:return Sa(u,m,v,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case _:b=10;break e;case R:b=9;break e;case G:b=11;break e;case re:b=14;break e;case I:b=16,h=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return o=fn(b,u,o,m),o.elementType=i,o.type=h,o.lanes=v,o}function Yr(i,o,u,h){return i=fn(7,i,h,o),i.lanes=u,i}function Sa(i,o,u,h){return i=fn(22,i,h,o),i.elementType=B,i.lanes=u,i.stateNode={isHidden:!1},i}function tc(i,o,u){return i=fn(6,i,null,o),i.lanes=u,i}function nc(i,o,u){return o=fn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function M0(i,o,u,h,m){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kl(0),this.expirationTimes=kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kl(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function rc(i,o,u,h,m,v,b,O,U){return i=new M0(i,o,u,O,U),o===1?(o=1,v===!0&&(o|=8)):o=0,v=fn(3,null,null,o),i.current=v,v.stateNode=i,v.memoizedState={element:h,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},mu(v),i}function N0(i,o,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:h==null?null:""+h,children:i,containerInfo:o,implementation:u}}function ap(i){if(!i)return hr;i=i._reactInternals;e:{if(Fr(i)!==i||i.tag!==1)throw Error(n(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Gt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(i.tag===1){var u=i.type;if(Gt(u))return Rh(i,u,o)}return o}function lp(i,o,u,h,m,v,b,O,U){return i=rc(u,h,!0,i,m,v,b,O,U),i.context=ap(null),u=i.current,h=Ot(),m=xr(u),v=Qn(h,m),v.callback=o??null,gr(u,v,m),i.current.lanes=m,fs(i,m,h),Wt(i,h),i}function Ea(i,o,u,h){var m=o.current,v=Ot(),b=xr(m);return u=ap(u),o.context===null?o.context=u:o.pendingContext=u,o=Qn(v,b),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=gr(m,o,b),i!==null&&(Tn(i,m,b,v),Jo(i,m,b)),b}function Aa(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function up(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function ic(i,o){up(i,o),(i=i.alternate)&&up(i,o)}var cp=typeof reportError=="function"?reportError:function(i){console.error(i)};function sc(i){this._internalRoot=i}ba.prototype.render=sc.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));Ea(i,o,null,null)},ba.prototype.unmount=sc.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Wr(function(){Ea(null,i,null,null)}),o[jn]=null}};function ba(i){this._internalRoot=i}ba.prototype.unstable_scheduleHydration=function(i){if(i){var o=qf();i={blockedOn:null,target:i,priority:o};for(var u=0;u<ar.length&&o!==0&&o<ar[u].priority;u++);ar.splice(u,0,i),u===0&&Zf(i)}};function oc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Pa(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function fp(){}function O0(i,o,u,h,m){if(m){if(typeof h=="function"){var v=h;h=function(){var ee=Aa(b);v.call(ee)}}var b=lp(o,h,i,0,null,!1,!1,"",fp);return i._reactRootContainer=b,i[jn]=b.current,Ps(i.nodeType===8?i.parentNode:i),Wr(),b}for(;m=i.lastChild;)i.removeChild(m);if(typeof h=="function"){var O=h;h=function(){var ee=Aa(U);O.call(ee)}}var U=rc(i,0,!1,null,null,!1,!1,"",fp);return i._reactRootContainer=U,i[jn]=U.current,Ps(i.nodeType===8?i.parentNode:i),Wr(function(){Ea(o,U,u,h)}),U}function Ta(i,o,u,h,m){var v=u._reactRootContainer;if(v){var b=v;if(typeof m=="function"){var O=m;m=function(){var U=Aa(b);O.call(U)}}Ea(o,b,i,m)}else b=O0(u,o,i,m,h);return Aa(b)}Wf=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=cs(o.pendingLanes);u!==0&&(Ll(o,u|1),Wt(o,lt()),!(We&6)&&(Ri=lt()+500,dr()))}break;case 13:Wr(function(){var h=Zn(i,1);if(h!==null){var m=Ot();Tn(h,i,1,m)}}),ic(i,1)}},Ml=function(i){if(i.tag===13){var o=Zn(i,134217728);if(o!==null){var u=Ot();Tn(o,i,134217728,u)}ic(i,134217728)}},jf=function(i){if(i.tag===13){var o=xr(i),u=Zn(i,o);if(u!==null){var h=Ot();Tn(u,i,o,h)}ic(i,o)}},qf=function(){return Qe},Yf=function(i,o){var u=Qe;try{return Qe=i,o()}finally{Qe=u}},Mn=function(i,o,u){switch(o){case"input":if(z(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==i&&h.form===i.form){var m=$o(h);if(!m)throw Error(n(90));Be(h),z(h,m)}}}break;case"textarea":Mt(i,u);break;case"select":o=u.value,o!=null&&Re(i,!!u.multiple,o,!1)}},Nf=Qu,Of=Wr;var I0={usingClientEntryPoint:!1,Events:[_s,Ei,$o,wo,xn,Qu]},Gs={findFiberByHostInstance:Dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},R0={bundleType:Gs.bundleType,version:Gs.version,rendererPackageName:Gs.rendererPackageName,rendererConfig:Gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Df(i),i===null?null:i.stateNode},findFiberByHostInstance:Gs.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ca.isDisabled&&Ca.supportsFiber)try{bo=Ca.inject(R0),Nn=Ca}catch{}}return jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I0,jt.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oc(o))throw Error(n(200));return N0(i,o,null,u)},jt.createRoot=function(i,o){if(!oc(i))throw Error(n(299));var u=!1,h="",m=cp;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=rc(i,1,!1,null,null,u,!1,h,m),i[jn]=o.current,Ps(i.nodeType===8?i.parentNode:i),new sc(o)},jt.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Df(o),i=i===null?null:i.stateNode,i},jt.flushSync=function(i){return Wr(i)},jt.hydrate=function(i,o,u){if(!Pa(o))throw Error(n(200));return Ta(null,i,o,!0,u)},jt.hydrateRoot=function(i,o,u){if(!oc(i))throw Error(n(405));var h=u!=null&&u.hydratedSources||null,m=!1,v="",b=cp;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(b=u.onRecoverableError)),o=lp(o,null,i,1,u??null,m,!1,v,b),i[jn]=o.current,Ps(i),h)for(i=0;i<h.length;i++)u=h[i],m=u._getVersion,m=m(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,m]:o.mutableSourceEagerHydrationData.push(u,m);return new ba(o)},jt.render=function(i,o,u){if(!Pa(o))throw Error(n(200));return Ta(null,i,o,!1,u)},jt.unmountComponentAtNode=function(i){if(!Pa(i))throw Error(n(40));return i._reactRootContainer?(Wr(function(){Ta(null,null,i,!1,function(){i._reactRootContainer=null,i[jn]=null})}),!0):!1},jt.unstable_batchedUpdates=Qu,jt.unstable_renderSubtreeIntoContainer=function(i,o,u,h){if(!Pa(u))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Ta(i,o,u,!1,h)},jt.version="18.3.1-next-f1338f8080-20240426",jt}var xp;function $0(){if(xp)return uc.exports;xp=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),uc.exports=G0(),uc.exports}var wp;function H0(){if(wp)return _a;wp=1;var e=$0();return _a.createRoot=e.createRoot,_a.hydrateRoot=e.hydrateRoot,_a}var W0=H0();const{round:j0,floor:q0,PI:Dg}=Math,Y0={linear:function(e,t,n){var r=e[1]-e[0],s=t[1]-t[0];return(n-e[0])/r*s+t[0]||0}},mn=function(e){return e%360+(e<0?360:0)},ni=function(e,t){return t*j0(e/t)},sl=function(e){return 180*e/Dg%360},qt=function(e,t){return t=t||!1,e=t?e:e%360,e*Dg/180},Lc=function(e,t){if(t===void 0)t=e===void 0?1:e,e=0;else if(t<e){const n=e;e=t,t=n}return q0(Math.random()*(t-e+1)+e)},{cos:ka,sin:hc,atan2:X0}=Math,Bg=function(e,t){var n=qt(e.y),r=qt(t.y),s=e.x,a=t.x,l=qt(a-s),c=hc(l)*ka(r),f=ka(n)*hc(r)-hc(n)*ka(r)*ka(l),p=sl(X0(c,f)),g=["NE","E","SE","S","SW","W","NW","N"],d=p-22.5;return d<0&&(d+=360),d=parseInt(d/45),g[d]},Zc=function(e,t){var n=e.x,r=e.y,s=t.x,a=t.y;return(n-=s)*n+(r-=a)*r},zg=function(e,t){return Math.sqrt(Zc(e,t))},Fe={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Za,cos:Mc,sin:Nc,sqrt:Sp,min:Ep,max:Ap,atan2:Z0,round:bp,pow:Q0,PI:Pp}=Math,V=function(e,t){if(!(this instanceof V))return new V(e,t);if(typeof e=="string"){var n=e.split(e.indexOf("@")===-1?" ":"@");e=parseFloat(n[0]),t=parseFloat(n[1])}else Object(e)===e&&(t=e.y,e=e.x);this.x=e===void 0?0:e,this.y=t===void 0?0:t};V.fromPolar=function(e,t,n){n=new V(n);var r=Za(e*Mc(t)),s=Za(e*Nc(t)),a=mn(sl(t));return a<90?s=-s:a<180?(r=-r,s=-s):a<270&&(r=-r),new V(n.x+r,n.y+s)};V.random=function(e,t,n,r){return new V(Lc(e,t),Lc(n,r))};V.prototype={type:Fe.Point,chooseClosest:function(e){var t=e.length;if(t===1)return new V(e[0]);for(var n=null,r=1/0,s=0;s<t;s++){var a=new V(e[s]),l=this.squaredDistance(a);l<r&&(n=a,r=l)}return n},adhereToRect:function(e){return e.containsPoint(this)?this:(this.x=Ep(Ap(this.x,e.x),e.x+e.width),this.y=Ep(Ap(this.y,e.y),e.y+e.height),this)},angleBetween:function(e,t){var n=this.equals(e)||this.equals(t)?NaN:this.theta(t)-this.theta(e);return n<0&&(n+=360),n},bearing:function(e){return Bg(this,e)},changeInAngle:function(e,t,n){return this.clone().offset(-e,-t).theta(n)-this.theta(n)},clone:function(){return new V(this)},cross:function(e,t){return e&&t?(t.x-this.x)*(e.y-this.y)-(t.y-this.y)*(e.x-this.x):NaN},difference:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),new V(this.x-(e||0),this.y-(t||0))},distance:function(e){return zg(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,t){var n=this.x,r=this.y;return new V((1-t)*n+t*e.x,(1-t)*r+t*e.y)},magnitude:function(){return Sp(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return Za(e.x-this.x)+Za(e.y-this.y)},move:function(e,t){var n=qt(new V(e).theta(this)),r=this.offset(Mc(n)*t,-Nc(n)*t);return r},normalize:function(e){var t=(e||1)/this.magnitude();return this.scale(t,t)},offset:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x+=e||0,this.y+=t||0,this},reflection:function(e){return new V(e).move(this,this.distance(e))},rotate:function(e,t){if(t===0)return this;e=e||new V(0,0),t=qt(mn(-t));var n=Mc(t),r=Nc(t),s=n*(this.x-e.x)-r*(this.y-e.y)+e.x,a=r*(this.x-e.x)+n*(this.y-e.y)+e.y;return this.x=s,this.y=a,this},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=Q0(10,e);break}return this.x=bp(this.x*t)/t,this.y=bp(this.y*t)/t,this},scale:function(e,t,n){return n=n&&new V(n)||new V(0,0),this.x=n.x+e*(this.x-n.x),this.y=n.y+t*(this.y-n.y),this},snapToGrid:function(e,t){return this.x=ni(this.x,e),this.y=ni(this.y,t||e),this},squaredDistance:function(e){return Zc(this,e)},theta:function(e){e=new V(e);var t=-(e.y-this.y),n=e.x-this.x,r=Z0(t,n);return r<0&&(r=2*Pp+r),180*r/Pp},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new V(e)||new V(0,0);var t=this.x,n=this.y;return this.x=Sp((t-e.x)*(t-e.x)+(n-e.y)*(n-e.y)),this.y=qt(e.theta(new V(t,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x=e||0,this.y=t||0,this},vectorAngle:function(e){var t=new V(0,0);return t.angleBetween(this,e)}};V.prototype.translate=V.prototype.offset;const Qa=V,{max:dc,min:pc}=Math,ve=function(e,t){if(!(this instanceof ve))return new ve(e,t);if(e instanceof ve)return new ve(e.start,e.end);this.start=new V(e),this.end=new V(t)};ve.prototype={type:Fe.Line,angle:function(){var e=new V(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=pc(this.start.x,this.end.x),t=pc(this.start.y,this.end.y),n=dc(this.start.x,this.end.x),r=dc(this.start.y,this.end.y);return new de(e,t,n-e,r-t)},bearing:function(){return Bg(this.start,this.end)},clone:function(){return new ve(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var t=this.vector().dot(new ve(this.start,e).vector()),n=pc(1,dc(0,t/this.squaredLength()));return n!==n?0:n},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var t=this.start,n=this.end;if(t.cross(e,n)!==0)return!1;var r=this.length();return!(new ve(t,e).length()>r||new ve(e,n).length()>r)},divideAt:function(e){var t=this.pointAt(e);return[new ve(this.start,t),new ve(t,this.end)]},divideAtLength:function(e){var t=this.pointAtLength(e);return[new ve(this.start,t),new ve(t,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,t){if(e&&e.intersectionWithLine){var n=e.intersectionWithLine(this,t);return n&&e instanceof ve&&(n=n[0]),n}return null},intersectionWithLine:function(e){var t=new V(this.end.x-this.start.x,this.end.y-this.start.y),n=new V(e.end.x-e.start.x,e.end.y-e.start.y),r=t.x*n.y-t.y*n.x,s=new V(e.start.x-this.start.x,e.start.y-this.start.y),a=s.x*n.y-s.y*n.x,l=s.x*t.y-s.y*t.x;if(r===0||a*r<0||l*r<0)return null;if(r>0){if(a>r||l>r)return null}else if(a<r||l<r)return null;return[new V(this.start.x+a*t.x/r,this.start.y+a*t.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return zg(this.start,this.end)},midpoint:function(){return new V((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const t=this.clone();if(!this.isDifferentiable())return t;const{start:n,end:r}=t,s=n.clone().rotate(r,270),a=r.clone().rotate(n,90);return n.move(a,e),r.move(s,e),t},pointAt:function(e){var t=this.start,n=this.end;return e<=0?t.clone():e>=1?n.clone():t.lerp(n,e)},pointAtLength:function(e){var t=this.start,n=this.end,r=!0;e<0&&(r=!1,e=-e);var s=this.length();return e>=s?r?n.clone():t.clone():this.pointAt((r?e:s-e)/s)},pointOffset:function(e){e=new V(e);var t=this.start,n=this.end,r=(n.x-t.x)*(e.y-t.y)-(n.y-t.y)*(e.x-t.x);return r/this.length()},rotate:function(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,t,n){return this.start.scale(e,t,n),this.end.scale(e,t,n),this},setLength:function(e){var t=this.length();if(!t)return this;var n=e/t;return this.scale(n,n,this.start)},squaredLength:function(){return Zc(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var t=this.start,n=this.end,r=this.pointAt(e),s=new ve(t,n);return s.translate(r.x-t.x,r.y-t.y),s},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var t=this.start,n=this.end,r=this.pointAtLength(e),s=new ve(t,n);return s.translate(r.x-t.x,r.y-t.y),s},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,t){return this.start.translate(e,t),this.end.translate(e,t),this},vector:function(){return new V(this.end.x-this.start.x,this.end.y-this.start.y)}};ve.prototype.intersection=ve.prototype.intersect;const ei=ve,{sqrt:Tp,round:La,pow:K0}=Math,Dt=function(e,t,n){if(!(this instanceof Dt))return new Dt(e,t,n);if(e instanceof Dt)return new Dt(new V(e.x,e.y),e.a,e.b);e=new V(e),this.x=e.x,this.y=e.y,this.a=t,this.b=n};Dt.fromRect=function(e){return e=new de(e),new Dt(e.center(),e.width/2,e.height/2)};Dt.prototype={type:Fe.Ellipse,bbox:function(){return new de(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new V(this.x,this.y)},clone:function(){return new Dt(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.a+=2*e,this.b+=2*t,this},intersectionWithLine:function(e){var t=[],n=e.start,r=e.end,s=this.a,a=this.b,l=e.vector(),c=n.difference(new V(this)),f=new V(l.x/(s*s),l.y/(a*a)),p=new V(c.x/(s*s),c.y/(a*a)),g=l.dot(f),d=l.dot(p),x=c.dot(p)-1,w=d*d-g*x;if(w<0)return null;if(w>0){var E=Tp(w),T=(-d-E)/g,P=(-d+E)/g;if((T<0||1<T)&&(P<0||1<P))return null;0<=T&&T<=1&&t.push(n.lerp(r,T)),0<=P&&P<=1&&t.push(n.lerp(r,P))}else{var C=-d/g;if(0<=C&&C<=1)t.push(n.lerp(r,C));else return null}return t},intersectionWithLineFromCenterToPoint:function(e,t){e=new V(e),t&&e.rotate(new V(this.x,this.y),t);var n=e.x-this.x,r=e.y-this.y,s;if(n===0)return s=this.bbox().pointNearestToPoint(e),t?s.rotate(new V(this.x,this.y),-t):s;var a=r/n,l=a*a,c=this.a*this.a,f=this.b*this.b,p=Tp(1/(1/c+l/f));p=n<0?-p:p;var g=a*p;return s=new V(this.x+p,this.y+g),t?s.rotate(new V(this.x,this.y),-t):s},normalizedDistance:function(e){var t=e.x,n=e.y,r=this.a,s=this.b,a=this.x,l=this.y;return(t-a)*(t-a)/(r*r)+(n-l)*(n-l)/(s*s)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=K0(10,e);break}return this.x=La(this.x*t)/t,this.y=La(this.y*t)/t,this.a=La(this.a*t)/t,this.b=La(this.b*t)/t,this},tangentTheta:function(e){var t=30,n=e.x,r=e.y,s=this.a,a=this.b,l=this.bbox().center(),c=l.x,f=l.y,p=n>l.x+s/2,g=n<l.x-s/2,d,x;return p||g?(d=n>l.x?r-t:r+t,x=s*s/(n-c)-s*s*(r-f)*(d-f)/(a*a*(n-c))+c):(x=r>l.y?n+t:n-t,d=a*a/(r-f)-a*a*(n-c)*(x-c)/(s*s*(r-f))+f),new V(x,d).theta(e)},toString:function(){return new V(this.x,this.y).toString()+" "+this.a+" "+this.b}};const J0=Dt,{abs:Cp,cos:e1,sin:t1,min:Hs,max:_p,round:Ma,pow:n1}=Math,de=function(e,t,n,r){if(!(this instanceof de))return new de(e,t,n,r);Object(e)===e&&(t=e.y,n=e.width,r=e.height,e=e.x),this.x=e===void 0?0:e,this.y=t===void 0?0:t,this.width=n===void 0?0:n,this.height=r===void 0?0:r};de.fromEllipse=function(e){return e=new Dt(e),new de(e.x-e.a,e.y-e.b,2*e.a,2*e.b)};de.fromPointUnion=function(...e){if(e.length===0)return null;const t=new V;let n,r,s,a;n=r=1/0,s=a=-1/0;for(let l=0;l<e.length;l++){t.update(e[l]);const c=t.x,f=t.y;c<n&&(n=c),c>s&&(s=c),f<r&&(r=f),f>a&&(a=f)}return new de(n,r,s-n,a-r)};de.fromRectUnion=function(...e){if(e.length===0)return null;const t=new de;let n,r,s,a;n=r=1/0,s=a=-1/0;for(let l=0;l<e.length;l++){t.update(e[l]);const c=t.x,f=t.y,p=c+t.width,g=f+t.height;c<n&&(n=c),p>s&&(s=p),f<r&&(r=f),g>a&&(a=g)}return new de(n,r,s-n,a-r)};de.prototype={type:Fe.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:t,height:n}=this,r=qt(e),s=Cp(t1(r)),a=Cp(e1(r)),l=t*a+n*s,c=t*s+n*a;return this.x+=(t-l)/2,this.y+=(n-c)/2,this.width=l,this.height=c,this},bottomLeft:function(){return new V(this.x,this.y+this.height)},bottomLine:function(){return new ve(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new V(this.x+this.width/2,this.y+this.height)},center:function(){return new V(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new de(this)},containsPoint:function(e,t){let n,r;return!e||typeof e=="string"?{x:n,y:r}=new V(e):{x:n=0,y:r=0}=e,t&&t.strict?n>this.x&&n<this.x+this.width&&r>this.y&&r<this.y+this.height:n>=this.x&&n<=this.x+this.width&&r>=this.y&&r<=this.y+this.height},containsRect:function(e){var t=new de(this).normalize(),n=new de(e).normalize(),r=t.width,s=t.height,a=n.width,l=n.height;if(!r||!s||!a||!l)return!1;var c=t.x,f=t.y,p=n.x,g=n.y;return a+=p,r+=c,l+=g,s+=f,c<=p&&a<=r&&f<=g&&l<=s},corner:function(){return new V(this.x+this.width,this.y+this.height)},equals:function(e){var t=new de(this).normalize(),n=new de(e).normalize();return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height},inflate:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},intersect:function(e){var t=this.origin(),n=this.corner(),r=e.origin(),s=e.corner();if(s.x<=t.x||s.y<=t.y||r.x>=n.x||r.y>=n.y)return null;var a=_p(t.x,r.x),l=_p(t.y,r.y);return new de(a,l,Hs(n.x,s.x)-a,Hs(n.y,s.y)-l)},intersectionWithLine:function(e){var t=this,n=[t.topLine(),t.rightLine(),t.bottomLine(),t.leftLine()],r=[],s=[],a,l,c=n.length;for(l=0;l<c;l++)a=e.intersect(n[l]),a!==null&&s.indexOf(a.toString())<0&&(r.push(a),s.push(a.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(e,t){e=new V(e);var n=new V(this.x+this.width/2,this.y+this.height/2),r;t&&e.rotate(n,t);for(var s=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],a=new ve(n,e),l=s.length-1;l>=0;--l){var c=s[l].intersection(a);if(c!==null){r=c;break}}return r&&t&&r.rotate(n,-t),r},leftLine:function(){return new ve(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new V(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,t){e=new de(e),t||(t=e.center());var n,r,s,a,l,c,f,p,g=t.x,d=t.y;n=r=s=a=l=c=f=p=1/0;var x=e.topLeft();x.x<g&&(n=(this.x-g)/(x.x-g)),x.y<d&&(l=(this.y-d)/(x.y-d));var w=e.bottomRight();w.x>g&&(r=(this.x+this.width-g)/(w.x-g)),w.y>d&&(c=(this.y+this.height-d)/(w.y-d));var E=e.topRight();E.x>g&&(s=(this.x+this.width-g)/(E.x-g)),E.y<d&&(f=(this.y-d)/(E.y-d));var T=e.bottomLeft();return T.x<g&&(a=(this.x-g)/(T.x-g)),T.y>d&&(p=(this.y+this.height-d)/(T.y-d)),{sx:Hs(n,r,s,a),sy:Hs(l,c,f,p)}},maxRectUniformScaleToFit:function(e,t){var n=this.maxRectScaleToFit(e,t);return Hs(n.sx,n.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,t=this.y,n=this.width,r=this.height;return this.width<0&&(e=this.x+this.width,n=-this.width),this.height<0&&(t=this.y+this.height,r=-this.height),this.x=e,this.y=t,this.width=n,this.height=r,this},offset:function(e,t){return V.prototype.offset.call(this,e,t)},origin:function(){return new V(this.x,this.y)},pointNearestToPoint:function(e){if(e=new V(e),this.containsPoint(e)){var t=this.sideNearestToPoint(e);switch(t){case"right":return new V(this.x+this.width,e.y);case"left":return new V(this.x,e.y);case"bottom":return new V(e.x,this.y+this.height);case"top":return new V(e.x,this.y)}}return e.adhereToRect(this)},rightLine:function(){return new ve(this.topRight(),this.bottomRight())},rightMiddle:function(){return new V(this.x+this.width,this.y+this.height/2)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=n1(10,e);break}return this.x=Ma(this.x*t)/t,this.y=Ma(this.y*t)/t,this.width=Ma(this.width*t)/t,this.height=Ma(this.height*t)/t,this},scale:function(e,t,n){return n=this.origin().scale(e,t,n),this.x=n.x,this.y=n.y,this.width*=e,this.height*=t,this},sideNearestToPoint:function(e){e=new V(e);var t=e.x-this.x,n=this.x+this.width-e.x,r=e.y-this.y,s=this.y+this.height-e.y,a=t,l="left";return n<a&&(a=n,l="right"),r<a&&(a=r,l="top"),s<a&&(l="bottom"),l},snapToGrid:function(e,t){var n=this.origin().snapToGrid(e,t),r=this.corner().snapToGrid(e,t);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new ve(this.topLeft(),this.topRight())},topMiddle:function(){return new V(this.x+this.width/2,this.y)},topRight:function(){return new V(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return de.fromRectUnion(this,e)},update:function(e,t,n,r){return Object(e)===e&&(t=e.y,n=e.width,r=e.height,e=e.x),this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0,this}};de.prototype.bottomRight=de.prototype.corner;de.prototype.topLeft=de.prototype.origin;de.prototype.translate=de.prototype.offset;const r1=de;function Vg(e){const t=e.trim();if(t==="")return[];const n=[],r=t.split(/\b\s*,\s*|,\s*|\s+/),s=r.length;for(let a=0;a<s;a+=2)n.push({x:+r[a],y:+r[a+1]});return n}function Ug(e){const t=e.length;if(t===0)return[];const n=[];for(let r=0;r<t;r++){const s=e[r].clone();n.push(s)}return n}function Gg(e){const{abs:t}=Math;var n,r,s=e.length;if(s===0)return[];var a;for(n=0;n<s;n++)(a===void 0||e[n].y<a.y||e[n].y===a.y&&e[n].x>a.x)&&(a=e[n]);var l=[];for(n=0;n<s;n++){var c=a.theta(e[n]);c===0&&(c=360);var f=[e[n],n,c];l.push(f)}if(l.sort(function(j,J){var re=j[2]-J[2];return re===0&&(re=J[1]-j[1]),re}),l.length>2){var p=l[l.length-1];l.unshift(p)}for(var g={},d=[],x,w,E,T,P,C;l.length!==0;)if(x=l.pop(),w=x[0],!g.hasOwnProperty(x[0]+"@@"+x[1]))for(var L=!1;!L;)if(d.length<2)d.push(x),L=!0;else{E=d.pop(),T=E[0],P=d.pop(),C=P[0];var M=C.cross(T,w);if(M<0)d.push(P),d.push(E),d.push(x),L=!0;else if(M===0){var F=1e-10,$=T.angleBetween(C,w);t($-180)<F||T.equals(w)||C.equals(T)?(g[E[0]+"@@"+E[1]]=T,d.push(P)):t(($+1)%360-1)<F&&(d.push(P),l.push(E))}else g[E[0]+"@@"+E[1]]=T,d.push(P)}d.length>2&&d.pop();var X,y=-1;for(r=d.length,n=0;n<r;n++){var S=d[n][1];(X===void 0||S<X)&&(X=S,y=n)}var A=[];if(y>0){var _=d.slice(y),R=d.slice(0,y);A=_.concat(R)}else A=d;var G=[];for(r=A.length,n=0;n<r;n++)G.push(A[n][0]);return G}const Je=function(e){if(!(this instanceof Je))return new Je(e);if(typeof e=="string")return new Je.parse(e);this.points=Array.isArray(e)?e.map(V):[]};Je.parse=function(e){return new Je(Vg(e))};Je.fromRect=function(e){return new Je([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])};Je.prototype={type:Fe.Polyline,bbox:function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,s=this.points,a=s.length;if(a===0)return null;for(var l=0;l<a;l++){var c=s[l],f=c.x,p=c.y;f<e&&(e=f),f>t&&(t=f),p<n&&(n=p),p>r&&(r=p)}return new de(e,n,t-e,r-n)},clone:function(){return new Je(Ug(this.points))},closestPoint:function(e){var t=this.closestPointLength(e);return this.pointAtLength(t)},closestPointLength:function(e){var t=this.lengthPoints(),n=t.length;if(n===0||n===1)return 0;for(var r,s=1/0,a=0,l=n-1,c=0;c<l;c++){var f=new ve(t[c],t[c+1]),p=f.length(),g=f.closestPointNormalizedLength(e),d=f.pointAt(g),x=d.squaredDistance(e);x<s&&(s=x,r=a+g*p),a+=p}return r},closestPointNormalizedLength:function(e){var t=this.closestPointLength(e);if(t===0)return 0;var n=this.length();return n===0?0:t/n},closestPointTangent:function(e){var t=this.closestPointLength(e);return this.tangentAtLength(t)},containsPoint:function(e){var t=this.points,n=t.length;if(n===0)return!1;for(var r=e.x,s=e.y,a=n-1,l=0,c=0,f=new ve,p=new ve,g=new V;l<n;l++){var d=t[a],x=t[l];if(e.equals(d)||(f.start=d,f.end=x,f.containsPoint(e)))return!0;if(s<=d.y&&s>x.y||s>d.y&&s<=x.y){var w=d.x-r>x.x-r?d.x-r:x.x-r;w>=0&&(g.x=r+w,g.y=s,p.start=e,p.end=g,f.intersect(p)&&c++)}a=l}return c%2===1},close:function(){const{start:e,end:t,points:n}=this;return e&&t&&!e.equals(t)&&n.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new Je(Gg(this.points))},equals:function(e){if(!e)return!1;var t=this.points,n=e.points,r=t.length;if(n.length!==r)return!1;for(var s=0;s<r;s++){var a=t[s],l=e.points[s];if(!a.equals(l))return!1}return!0},intersectionWithLine:function(e){for(var t=new ve(e),n=[],r=this.lengthPoints(),s=new ve,a=0,l=r.length-1;a<l;a++){s.start=r[a],s.end=r[a+1];var c=t.intersectionWithLine(s);c&&n.push(c[0])}return n.length>0?n:null},isDifferentiable:function(){var e=this.points,t=e.length;if(t===0)return!1;for(var n=new ve,r=t-1,s=0;s<r;s++)if(n.start=e[s],n.end=e[s+1],n.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),t=e.length;if(t===0)return 0;for(var n=0,r=t-1,s=0;s<r;s++)n+=e[s].distance(e[s+1]);return n},pointAt:function(e){var t=this.lengthPoints(),n=t.length;if(n===0)return null;if(n===1||e<=0)return t[0].clone();if(e>=1)return t[n-1].clone();var r=this.length(),s=r*e;return this.pointAtLength(s)},pointAtLength:function(e){var t=this.lengthPoints(),n=t.length;if(n===0)return null;if(n===1)return t[0].clone();var r=!0;e<0&&(r=!1,e=-e);for(var s=0,a=n-1,l=0;l<a;l++){var c=r?l:a-1-l,f=t[c],p=t[c+1],g=new ve(f,p),d=f.distance(p);if(e<=s+d)return g.pointAtLength((r?1:-1)*(e-s));s+=d}var x=r?t[n-1]:t[0];return x.clone()},round:function(e){for(var t=this.points,n=t.length,r=0;r<n;r++)t[r].round(e);return this},scale:function(e,t,n){for(var r=this.points,s=r.length,a=0;a<s;a++)r[a].scale(e,t,n);return this},simplify:function(e={}){const t=this.points;if(t.length<3)return this;const n=e.threshold||1e-10;let r=0;for(;t[r+2];){const s=r,a=r+1,l=r+2,c=t[s],f=t[a],p=t[l];new ve(c,p).closestPoint(f).distance(f)<=n?t.splice(a,1):r+=1}return this},tangentAt:function(e){var t=this.lengthPoints(),n=t.length;if(n===0||n===1)return null;e<0&&(e=0),e>1&&(e=1);var r=this.length(),s=r*e;return this.tangentAtLength(s)},tangentAtLength:function(e){var t=this.lengthPoints(),n=t.length;if(n===0||n===1)return null;var r=!0;e<0&&(r=!1,e=-e);for(var s,a=0,l=n-1,c=0;c<l;c++){var f=r?c:l-1-c,p=t[f],g=t[f+1],d=new ve(p,g),x=p.distance(g);if(d.isDifferentiable()){if(e<=a+x)return d.tangentAtLength((r?1:-1)*(e-a));s=d}a+=x}if(s){var w=r?1:0;return s.tangentAt(w)}return null},toString:function(){return this.points+""},translate:function(e,t){for(var n=this.points,r=n.length,s=0;s<r;s++)n[s].translate(e,t);return this},serialize:function(){var e=this.points,t=e.length;if(t===0)return"";for(var n="",r=0;r<t;r++){var s=e[r];n+=s.x+","+s.y+" "}return n.trim()}};Object.defineProperty(Je.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.points,t=e.length;return t===0?null:this.points[0]}});Object.defineProperty(Je.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.points,t=e.length;return t===0?null:this.points[t-1]}});const{abs:Na,sqrt:i1,min:kp,max:Lp,pow:gc}=Math,Ye=function(e,t,n,r){if(!(this instanceof Ye))return new Ye(e,t,n,r);if(e instanceof Ye)return new Ye(e.start,e.controlPoint1,e.controlPoint2,e.end);this.start=new V(e),this.controlPoint1=new V(t),this.controlPoint2=new V(n),this.end=new V(r)};Ye.throughPoints=function(){function e(n){var r=[],s=[],a=n.length-1,l;if(a==1)return r[0]=new V((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),s[0]=new V(2*r[0].x-n[0].x,2*r[0].y-n[0].y),[r,s];var c=[];for(l=1;l<a-1;l++)c[l]=4*n[l].x+2*n[l+1].x;c[0]=n[0].x+2*n[1].x,c[a-1]=(8*n[a-1].x+n[a].x)/2;var f=t(c);for(l=1;l<a-1;++l)c[l]=4*n[l].y+2*n[l+1].y;c[0]=n[0].y+2*n[1].y,c[a-1]=(8*n[a-1].y+n[a].y)/2;var p=t(c);for(l=0;l<a;l++)r.push(new V(f[l],p[l])),l<a-1?s.push(new V(2*n[l+1].x-f[l+1],2*n[l+1].y-p[l+1])):s.push(new V((n[a].x+f[a-1])/2,(n[a].y+p[a-1])/2));return[r,s]}function t(n){var r=n.length,s=[],a=[],l=2;s[0]=n[0]/l;for(var c=1;c<r;c++)a[c]=1/l,l=(c<r-1?4:3.5)-a[c],s[c]=(n[c]-s[c-1])/l;for(c=1;c<r;c++)s[r-c-1]-=a[r-c]*s[r-c];return s}return function(n){if(!n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");for(var r=e(n),s=[],a=r[0].length,l=0;l<a;l++){var c=new V(r[0][l].x,r[0][l].y),f=new V(r[1][l].x,r[1][l].y);s.push(new Ye(n[l],c,f,n[l+1]))}return s}}();Ye.prototype={type:Fe.Curve,bbox:function(){for(var e=this.start,t=this.controlPoint1,n=this.controlPoint2,r=this.end,s=e.x,a=e.y,l=t.x,c=t.y,f=n.x,p=n.y,g=r.x,d=r.y,x=new Array,w=new Array,E=[new Array,new Array],T,P,C,L,M,F,$,X,y=0;y<2;++y){if(y===0?(P=6*s-12*l+6*f,T=-3*s+9*l-9*f+3*g,C=3*l-3*s):(P=6*a-12*c+6*p,T=-3*a+9*c-9*p+3*d,C=3*c-3*a),Na(T)<1e-12){if(Na(P)<1e-12)continue;L=-C/P,0<L&&L<1&&w.push(L);continue}$=P*P-4*C*T,X=i1($),!($<0)&&(M=(-P+X)/(2*T),0<M&&M<1&&w.push(M),F=(-P-X)/(2*T),0<F&&F<1&&w.push(F))}for(var S=w.length,A=S,_,R,G;S--;)L=w[S],_=1-L,R=_*_*_*s+3*_*_*L*l+3*_*L*L*f+L*L*L*g,E[0][S]=R,G=_*_*_*a+3*_*_*L*c+3*_*L*L*p+L*L*L*d,E[1][S]=G,x[S]={X:R,Y:G};w[A]=0,w[A+1]=1,x[A]={X:s,Y:a},x[A+1]={X:g,Y:d},E[0][A]=s,E[1][A]=a,E[0][A+1]=g,E[1][A+1]=d,w.length=A+2,E[0].length=A+2,E[1].length=A+2,x.length=A+2;var j=kp.apply(null,E[0]),J=kp.apply(null,E[1]),re=Lp.apply(null,E[0]),I=Lp.apply(null,E[1]);return new de(j,J,re-j,I-J)},clone:function(){return new Ye(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,t){return this.pointAtT(this.closestPointT(e,t))},closestPointLength:function(e,t){t=t||{};var n=t.precision===void 0?this.PRECISION:t.precision,r=t.subdivisions===void 0?this.getSubdivisions({precision:n}):t.subdivisions,s={precision:n,subdivisions:r};return this.lengthAtT(this.closestPointT(e,s),s)},closestPointNormalizedLength:function(e,t){t=t||{};var n=t.precision===void 0?this.PRECISION:t.precision,r=t.subdivisions===void 0?this.getSubdivisions({precision:n}):t.subdivisions,s={precision:n,subdivisions:r},a=this.closestPointLength(e,s);if(!a)return 0;var l=this.length(s);return l===0?0:a/l},closestPointT:function(e,t){t=t||{};for(var n=t.precision===void 0?this.PRECISION:t.precision,r=t.subdivisions===void 0?this.getSubdivisions({precision:n}):t.subdivisions,s,a,l,c,f,p,g,d=r.length,x=d?1/d:0,w=0;w<d;w++){var E=r[w],T=E.start.distance(e),P=E.end.distance(e),C=T+P;(!g||C<g)&&(s=E,a=w*x,l=(w+1)*x,c=T,f=P,p=E.start.distance(E.end),g=C)}for(var L=gc(10,-n);;){var M=c?Na(c-f)/c:0,F=f?Na(c-f)/f:0,$=M<L||F<L,X=c?c<p*L:!0,y=f?f<p*L:!0,S=X||y;if($||S)return c<=f?a:l;var A=s.divide(.5);x/=2;var _=A[0].start.distance(e),R=A[0].end.distance(e),G=_+R,j=A[1].start.distance(e),J=A[1].end.distance(e),re=j+J;G<=re?(s=A[0],l-=x,c=_,f=R):(s=A[1],a+=x,c=j,f=J)}},closestPointTangent:function(e,t){return this.tangentAtT(this.closestPointT(e,t))},containsPoint:function(e,t){var n=this.toPolyline(t);return n.containsPoint(e)},divideAt:function(e,t){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var n=this.tAt(e,t);return this.divideAtT(n)},divideAtLength:function(e,t){var n=this.tAtLength(e,t);return this.divideAtT(n)},divideAtT:function(e){var t=this.start,n=this.controlPoint1,r=this.controlPoint2,s=this.end;if(e<=0)return[new Ye(t,t,t,t),new Ye(t,n,r,s)];if(e>=1)return[new Ye(t,n,r,s),new Ye(s,s,s,s)];var a=this.getSkeletonPoints(e),l=a.startControlPoint1,c=a.startControlPoint2,f=a.divider,p=a.dividerControlPoint1,g=a.dividerControlPoint2;return[new Ye(t,l,c,f),new Ye(f,p,g,s)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var t=this.start,n=this.controlPoint1,r=this.controlPoint2,s=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(e>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:s.clone(),dividerControlPoint1:s.clone(),dividerControlPoint2:s.clone()};var a=new ve(t,n).pointAt(e),l=new ve(n,r).pointAt(e),c=new ve(r,s).pointAt(e),f=new ve(a,l).pointAt(e),p=new ve(l,c).pointAt(e),g=new ve(f,p).pointAt(e),d={startControlPoint1:a,startControlPoint2:f,divider:g,dividerControlPoint1:p,dividerControlPoint2:c};return d},getSubdivisions:function(e){e=e||{};var t=e.precision===void 0?this.PRECISION:e.precision,n=this.start,r=this.controlPoint1,s=this.controlPoint2,a=this.end,l=[new Ye(n,r,s,a)];if(t===0)return l;var c=!this.isDifferentiable();if(c)return l;var f=this.endpointDistance(),p=gc(10,-t),g=2,d=r.cross(n,a)===0&&s.cross(n,a)===0;d&&(g=2*t);for(var x=0;;){x+=1;for(var w=[],E=l.length,T=0;T<E;T++){var P=l[T],C=P.divide(.5);w.push(C[0],C[1])}for(var L=0,M=w.length,F=0;F<M;F++){var $=w[F];L+=$.endpointDistance()}if(x>=g){var X=L!==0?(L-f)/L:0;if(X<p)return w}l=w,f=L}},isDifferentiable:function(){var e=this.start,t=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(e.equals(t)&&t.equals(n)&&n.equals(r))},length:function(e){e=e||{};for(var t=e.precision===void 0?this.PRECISION:e.precision,n=e.subdivisions===void 0?this.getSubdivisions({precision:t}):e.subdivisions,r=0,s=n.length,a=0;a<s;a++){var l=n[a];r+=l.endpointDistance()}return r},lengthAtT:function(e,t){if(e<=0)return 0;t=t||{};var n=t.precision===void 0?this.PRECISION:t.precision,r=this.divide(e)[0],s=r.length({precision:n});return s},pointAt:function(e,t){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var n=this.tAt(e,t);return this.pointAtT(n)},pointAtLength:function(e,t){var n=this.tAtLength(e,t);return this.pointAtT(n)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,n){return this.start.scale(e,t,n),this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this},tangentAt:function(e,t){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var n=this.tAt(e,t);return this.tangentAtT(n)},tangentAtLength:function(e,t){if(!this.isDifferentiable())return null;var n=this.tAtLength(e,t);return this.tangentAtT(n)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.getSkeletonPoints(e),n=t.startControlPoint2,r=t.dividerControlPoint1,s=t.divider,a=new ve(n,r);return a.translate(s.x-n.x,s.y-n.y),a},tAt:function(e,t){if(e<=0)return 0;if(e>=1)return 1;t=t||{};var n=t.precision===void 0?this.PRECISION:t.precision,r=t.subdivisions===void 0?this.getSubdivisions({precision:n}):t.subdivisions,s={precision:n,subdivisions:r},a=this.length(s),l=a*e;return this.tAtLength(l,s)},tAtLength:function(e,t){var n=!0;e<0&&(n=!1,e=-e),t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,s=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,a={precision:r,subdivisions:s},l,c,f,p,g,d=0,x=s.length,w=1/x,E=0;E<x;E++){var T=n?E:x-1-E,P=s[E],C=P.endpointDistance();if(e<=d+C){l=P,c=T*w,f=(T+1)*w,p=n?e-d:C+d-e,g=n?C+d-e:e-d;break}d+=C}if(!l)return n?1:0;for(var L=this.length(a),M=gc(10,-r);;){var F;if(F=L!==0?p/L:0,F<M)return c;if(F=L!==0?g/L:0,F<M)return f;var $,X,y=l.divide(.5);w/=2;var S=y[0].endpointDistance(),A=y[1].endpointDistance();p<=S?(l=y[0],f-=w,$=p,X=S-$):(l=y[1],c+=w,$=p-S,X=A-$),p=$,g=X}},toPoints:function(e){e=e||{};for(var t=e.precision===void 0?this.PRECISION:e.precision,n=e.subdivisions===void 0?this.getSubdivisions({precision:t}):e.subdivisions,r=[n[0].start.clone()],s=n.length,a=0;a<s;a++){var l=n[a];r.push(l.end.clone())}return r},toPolyline:function(e){return new Je(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Ye.prototype.divide=Ye.prototype.divideAtT;function ao(e){var t,n,r=[];for(n=arguments.length,t=1;t<n;t++)r.push(arguments[t]);if(!e)throw new Error("Missing a parent object.");var s=Object.create(e);for(n=r.length,t=0;t<n;t++){var a=r[t],l,c;for(c in a)a.hasOwnProperty(c)&&(delete s[c],l=Object.getOwnPropertyDescriptor(a,c),Object.defineProperty(s,c,l))}return s}const Ce=function(e){if(!(this instanceof Ce))return new Ce(e);if(typeof e=="string")return new Ce.parse(e);this.segments=[];var t,n;if(e)if(Array.isArray(e)&&e.length!==0)if(e=e.reduce(function(c,f){return c.concat(f)},[]),n=e.length,e[0].isSegment)for(t=0;t<n;t++){var r=e[t];this.appendSegment(r)}else{var s=null;for(t=0;t<n;t++){var a=e[t];if(!(a instanceof ve||a instanceof Ye))throw new Error("Cannot construct a path segment from the provided object.");t===0&&this.appendSegment(Ce.createSegment("M",a.start)),s&&!s.end.equals(a.start)&&this.appendSegment(Ce.createSegment("M",a.start)),a instanceof ve?this.appendSegment(Ce.createSegment("L",a.end)):a instanceof Ye&&this.appendSegment(Ce.createSegment("C",a.controlPoint1,a.controlPoint2,a.end)),s=a}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof ve)this.appendSegment(Ce.createSegment("M",e.start)),this.appendSegment(Ce.createSegment("L",e.end));else if(e instanceof Ye)this.appendSegment(Ce.createSegment("M",e.start)),this.appendSegment(Ce.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else if(e instanceof Je){if(!(e.points&&e.points.length!==0))return;for(n=e.points.length,t=0;t<n;t++){var l=e.points[t];t===0?this.appendSegment(Ce.createSegment("M",l)):this.appendSegment(Ce.createSegment("L",l))}}else throw new Error("Cannot construct a path from the provided object.")};Ce.parse=function(e){if(!e)return new Ce;for(var t=new Ce,n=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,r=e.match(n),s=r.length,a=0;a<s;a++){var l=r[a],c=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,f=l.match(c),p=Ce.createSegment.apply(this,f);t.appendSegment(p)}return t};Ce.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var t=Ce.segmentTypes[e];if(!t)throw new Error(e+" is not a recognized path segment type.");for(var n=[],r=arguments.length,s=1;s<r;s++)n.push(arguments[s]);return Gn(t,n)};Ce.prototype={type:Fe.Path,appendSegment:function(e){var t=this.segments,n=t.length,r,s=n!==0?t[n-1]:null,a=null;if(Array.isArray(e)){if(e=e.reduce(function(p,g){return p.concat(g)},[]),!e[0].isSegment)throw new Error("Segments required.");for(var l=e.length,c=0;c<l;c++){var f=e[c];r=this.prepareSegment(f,s,a),t.push(r),s=r}}else{if(!e||!e.isSegment)throw new Error("Segment required.");r=this.prepareSegment(e,s,a),t.push(r)}},bbox:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var n,r=0;r<t;r++){var s=e[r];if(s.isVisible){var a=s.bbox();n=n?n.union(a):a}}if(n)return n;var l=e[t-1];return new de(l.end.x,l.end.y,0,0)},clone:function(){for(var e=this.segments,t=e.length,n=new Ce,r=0;r<t;r++){var s=e[r].clone();n.appendSegment(s)}return n},closestPoint:function(e,t){var n=this.closestPointT(e,t);return n?this.pointAtT(n):null},closestPointLength:function(e,t){t=t||{};var n=t.precision===void 0?this.PRECISION:t.precision,r=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions,s={precision:n,segmentSubdivisions:r},a=this.closestPointT(e,s);return a?this.lengthAtT(a,s):0},closestPointNormalizedLength:function(e,t){t=t||{};var n=t.precision===void 0?this.PRECISION:t.precision,r=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions,s={precision:n,segmentSubdivisions:r},a=this.closestPointLength(e,s);if(a===0)return 0;var l=this.length(s);return l===0?0:a/l},closestPointT:function(e,t){var n=this.segments,r=n.length;if(r===0)return null;t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,l,c=1/0,f=0;f<r;f++){var p=n[f],g=a[f];if(p.isVisible){var d=p.closestPointT(e,{precision:s,subdivisions:g}),x=p.pointAtT(d),w=new ve(x,e).squaredLength();w<c&&(l={segmentIndex:f,value:d},c=w)}}return l||{segmentIndex:r-1,value:1}},closestPointTangent:function(e,t){var n=this.segments,r=n.length;if(r===0)return null;t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,l,c=1/0,f=0;f<r;f++){var p=n[f],g=a[f];if(p.isDifferentiable()){var d=p.closestPointT(e,{precision:s,subdivisions:g}),x=p.pointAtT(d),w=new ve(x,e).squaredLength();w<c&&(l=p.tangentAtT(d),c=w)}}return l||null},containsPoint:function(e,t){var n=this.toPolylines(t);if(!n)return!1;for(var r=n.length,s=0,a=0;a<r;a++){var l=n[a];l.containsPoint(e)&&s++}return s%2===1},divideAt:function(e,t){var n=this.segments,r=n.length;if(r===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var s=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,l={precision:s,segmentSubdivisions:a},c=this.length(l),f=c*e;return this.divideAtLength(f,l)},divideAtLength:function(e,t){var n=this.segments.length;if(n===0)return null;var r=!0;e<0&&(r=!1,e=-e),t=t||{};var s=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,l,c,f=0,p,g,d,x,w;for(l=0;l<n;l++){var E=r?l:n-1-l;c=this.getSegment(E);var T=a[E],P=c.length({precision:s,subdivisions:T});if(c.isDifferentiable()&&(d=c,x=E,e<=f+P)){g=E,p=c.divideAtLength((r?1:-1)*(e-f),{precision:s,subdivisions:T});break}f+=P}if(!d)return null;p||(g=x,w=r?1:0,p=d.divideAtT(w));var C=this.clone();C.replaceSegment(g,p);var L=g,M=g+1,F=g+2;p[0].isDifferentiable()||(C.removeSegment(L),M-=1,F-=1);var $=C.getSegment(M).start;C.insertSegment(M,Ce.createSegment("M",$)),F+=1,p[1].isDifferentiable()||(C.removeSegment(F-1),F-=1);var X=F-L-1;for(l=F;l<C.segments.length;l++){var y=this.getSegment(l-X);if(c=C.getSegment(l),c.type==="Z"&&!y.subpathStartSegment.end.equals(c.subpathStartSegment.end)){var S=Ce.createSegment("L",y.end);C.replaceSegment(l,S)}}var A=new Ce(C.segments.slice(0,M)),_=new Ce(C.segments.slice(M));return[A,_]},equals:function(e){if(!e)return!1;var t=this.segments,n=e.segments,r=t.length;if(n.length!==r)return!1;for(var s=0;s<r;s++){var a=t[s],l=n[s];if(a.type!==l.type||!a.equals(l))return!1}return!0},getSegment:function(e){var t=this.segments,n=t.length;if(n===0)throw new Error("Path has no segments.");if(e<0&&(e=n+e),e>=n||e<0)throw new Error("Index out of range.");return t[e]},getSegmentSubdivisions:function(e){var t=this.segments,n=t.length;e=e||{};for(var r=e.precision===void 0?this.PRECISION:e.precision,s=[],a=0;a<n;a++){var l=t[a],c=l.getSubdivisions({precision:r});s.push(c)}return s},getSubpaths:function(){const t=this.clone().validate().segments,n=t.length,r=[];for(let s=0;s<n;s++){const a=t[s];a.isSubpathStart?r.push(new Ce(a)):r[r.length-1].appendSegment(a)}return r},insertSegment:function(e,t){var n=this.segments,r=n.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");var s,a=null,l=null;if(r!==0&&(e>=1?(a=n[e-1],l=a.nextSegment):l=n[0]),Array.isArray(t)){if(t=t.reduce(function(g,d){return g.concat(d)},[]),!t[0].isSegment)throw new Error("Segments required.");for(var c=t.length,f=0;f<c;f++){var p=t[f];s=this.prepareSegment(p,a,l),n.splice(e+f,0,s),a=s}}else{if(!t||!t.isSegment)throw new Error("Segment required.");s=this.prepareSegment(t,a,l),n.splice(e,0,s)}},intersectionWithLine:function(e,t){var n=null,r=this.toPolylines(t);if(!r)return null;for(var s=0,a=r.length;s<a;s++){var l=r[s],c=e.intersect(l);c&&(n||(n=[]),Array.isArray(c)?Array.prototype.push.apply(n,c):n.push(c))}return n},isDifferentiable:function(){for(var e=this.segments,t=e.length,n=0;n<t;n++){var r=e[n];if(r.isDifferentiable())return!0}return!1},isValid:function(){var e=this.segments,t=e.length===0||e[0].type==="M";return t},length:function(e){var t=this.segments,n=t.length;if(n===0)return 0;e=e||{};for(var r=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):e.segmentSubdivisions,a=0,l=0;l<n;l++){var c=t[l],f=s[l];a+=c.length({subdivisions:f})}return a},lengthAtT:function(e,t){var n=this.segments,r=n.length;if(r===0)return 0;var s=e.segmentIndex;if(s<0)return 0;var a=e.value;s>=r?(s=r-1,a=1):a<0?a=0:a>1&&(a=1),t=t||{};for(var l=t.precision===void 0?this.PRECISION:t.precision,c=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:l}):t.segmentSubdivisions,f,p=0,g=0;g<s;g++){var d=n[g];f=c[g],p+=d.length({precisison:l,subdivisions:f})}return d=n[s],f=c[s],p+=d.lengthAtT(a,{precisison:l,subdivisions:f}),p},pointAt:function(e,t){var n=this.segments,r=n.length;if(r===0)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();t=t||{};var s=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,l={precision:s,segmentSubdivisions:a},c=this.length(l),f=c*e;return this.pointAtLength(f,l)},pointAtLength:function(e,t){var n=this.segments,r=n.length;if(r===0)return null;if(e===0)return this.start.clone();var s=!0;e<0&&(s=!1,e=-e),t=t||{};for(var a=t.precision===void 0?this.PRECISION:t.precision,l=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:a}):t.segmentSubdivisions,c,f=0,p=0;p<r;p++){var g=s?p:r-1-p,d=n[g],x=l[g],w=d.length({precision:a,subdivisions:x});if(d.isVisible){if(e<=f+w)return d.pointAtLength((s?1:-1)*(e-f),{precision:a,subdivisions:x});c=d}f+=w}if(c)return s?c.end:c.start;var E=n[r-1];return E.end.clone()},pointAtT:function(e){var t=this.segments,n=t.length;if(n===0)return null;var r=e.segmentIndex;if(r<0)return t[0].pointAtT(0);if(r>=n)return t[n-1].pointAtT(1);var s=e.value;return s<0?s=0:s>1&&(s=1),t[r].pointAtT(s)},PRECISION:3,prepareSegment:function(e,t,n){e.previousSegment=t,e.nextSegment=n,t&&(t.nextSegment=e),n&&(n.previousSegment=e);var r=e;return e.isSubpathStart&&(e.subpathStartSegment=e,r=n),r&&this.updateSubpathStartSegment(r),e},removeSegment:function(e){var t=this.segments,n=t.length;if(n===0)throw new Error("Path has no segments.");if(e<0&&(e=n+e),e>=n||e<0)throw new Error("Index out of range.");var r=t.splice(e,1)[0],s=r.previousSegment,a=r.nextSegment;s&&(s.nextSegment=a),a&&(a.previousSegment=s),r.isSubpathStart&&a&&this.updateSubpathStartSegment(a)},replaceSegment:function(e,t){var n=this.segments,r=n.length;if(r===0)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var s,a=n[e],l=a.previousSegment,c=a.nextSegment,f=a.isSubpathStart;if(Array.isArray(t)){if(t=t.reduce(function(x,w){return x.concat(w)},[]),!t[0].isSegment)throw new Error("Segments required.");n.splice(e,1);for(var p=t.length,g=0;g<p;g++){var d=t[g];s=this.prepareSegment(d,l,c),n.splice(e+g,0,s),l=s,f&&s.isSubpathStart&&(f=!1)}}else{if(!t||!t.isSegment)throw new Error("Segment required.");s=this.prepareSegment(t,l,c),n.splice(e,1,s),f&&s.isSubpathStart&&(f=!1)}f&&c&&this.updateSubpathStartSegment(c)},round:function(e){for(var t=this.segments,n=t.length,r=0;r<n;r++){var s=t[r];s.round(e)}return this},scale:function(e,t,n){for(var r=this.segments,s=r.length,a=0;a<s;a++){var l=r[a];l.scale(e,t,n)}return this},segmentAt:function(e,t){var n=this.segmentIndexAt(e,t);return n?this.getSegment(n):null},segmentAtLength:function(e,t){var n=this.segmentIndexAtLength(e,t);return n?this.getSegment(n):null},segmentIndexAt:function(e,t){var n=this.segments,r=n.length;if(r===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var s=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,l={precision:s,segmentSubdivisions:a},c=this.length(l),f=c*e;return this.segmentIndexAtLength(f,l)},segmentIndexAtLength:function(e,t){var n=this.segments,r=n.length;if(r===0)return null;var s=!0;e<0&&(s=!1,e=-e),t=t||{};for(var a=t.precision===void 0?this.PRECISION:t.precision,l=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:a}):t.segmentSubdivisions,c=null,f=0,p=0;p<r;p++){var g=s?p:r-1-p,d=n[g],x=l[g],w=d.length({precision:a,subdivisions:x});if(d.isVisible){if(e<=f+w)return g;c=g}f+=w}return c},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,t){var n=this.segments,r=n.length;if(r===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var s=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,l={precision:s,segmentSubdivisions:a},c=this.length(l),f=c*e;return this.tangentAtLength(f,l)},tangentAtLength:function(e,t){var n=this.segments,r=n.length;if(r===0)return null;var s=!0;e<0&&(s=!1,e=-e),t=t||{};for(var a=t.precision===void 0?this.PRECISION:t.precision,l=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:a}):t.segmentSubdivisions,c,f=0,p=0;p<r;p++){var g=s?p:r-1-p,d=n[g],x=l[g],w=d.length({precision:a,subdivisions:x});if(d.isDifferentiable()){if(e<=f+w)return d.tangentAtLength((s?1:-1)*(e-f),{precision:a,subdivisions:x});c=d}f+=w}if(c){var E=s?1:0;return c.tangentAtT(E)}return null},tangentAtT:function(e){var t=this.segments,n=t.length;if(n===0)return null;var r=e.segmentIndex;if(r<0)return t[0].tangentAtT(0);if(r>=n)return t[n-1].tangentAtT(1);var s=e.value;return s<0?s=0:s>1&&(s=1),t[r].tangentAtT(s)},toPoints:function(e){var t=this.segments,n=t.length;if(n===0)return null;e=e||{};for(var r=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):e.segmentSubdivisions,a=[],l=[],c=0;c<n;c++){var f=t[c];if(f.isVisible){var p=s[c];if(p.length>0){var g=p.map(function(d){return d.start});Array.prototype.push.apply(l,g)}else l.push(f.start)}else l.length>0&&(l.push(t[c-1].end),a.push(l),l=[])}return l.length>0&&(l.push(this.end),a.push(l)),a},toPolylines:function(e){var t=[],n=this.toPoints(e);if(!n)return null;for(var r=0,s=n.length;r<s;r++)t.push(new Je(n[r]));return t},toString:function(){for(var e=this.segments,t=e.length,n="",r=0;r<t;r++){var s=e[r];n+=s.serialize()+" "}return n.trim()},translate:function(e,t){for(var n=this.segments,r=n.length,s=0;s<r;s++){var a=n[s];a.translate(e,t)}return this},updateSubpathStartSegment:function(e){for(var t=e.previousSegment;e&&!e.isSubpathStart;)t?e.subpathStartSegment=t.subpathStartSegment:e.subpathStartSegment=null,t=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,Ce.createSegment("M",0,0)),this}};Object.defineProperty(Ce.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var n=0;n<t;n++){var r=e[n];if(r.isVisible)return r.start}return e[t-1].end}});Object.defineProperty(Ce.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var n=t-1;n>=0;n--){var r=e[n];if(r.isVisible)return r.end}return e[t-1].end}});function Gn(e,t){return t.unshift(null),new(Function.prototype.bind.apply(e,t))}var oi={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var t=this.length();return e>=1?t:t*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(oi,"end",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(oi,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}});Object.defineProperty(oi,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var At=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof At))return Gn(At,e);if(t===0)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(e[0]instanceof ve){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" lines provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===2)return this.end=new V(+e[0],+e[1]),this;if(t<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" coordinates provided).");var s;for(r=[],n=0;n<t;n+=2)s=e.slice(n,n+2),r.push(Gn(At,s));return r}else{if(t===1)return this.end=new V(e[0]),this;var a;for(r=[],n=0;n<t;n+=1)a=e[n],r.push(new At(a));return r}},$g={clone:function(){return new At(this.end)},divideAt:function(e){var t=new ve(this.start,this.end),n=t.divideAt(e);return[new At(n[0]),new At(n[1])]},divideAtLength:function(e){var t=new ve(this.start,this.end),n=t.divideAtLength(e);return[new At(n[0]),new At(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return this.previousSegment?!this.start.equals(this.end):!1},round:function(e){return this.end.round(e),this},scale:function(e,t,n){return this.end.scale(e,t,n),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty($g,"type",{configurable:!0,enumerable:!0,value:"L"});At.prototype=ao(oi,ve.prototype,$g);var en=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof en))return Gn(en,e);if(t===0)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r;if(e[0]instanceof Ye){if(t===1)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" curves provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===6)return this.controlPoint1=new V(+e[0],+e[1]),this.controlPoint2=new V(+e[2],+e[3]),this.end=new V(+e[4],+e[5]),this;if(t<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" coordinates provided).");var s;for(r=[],n=0;n<t;n+=6)s=e.slice(n,n+6),r.push(Gn(en,s));return r}else{if(t===3)return this.controlPoint1=new V(e[0]),this.controlPoint2=new V(e[1]),this.end=new V(e[2]),this;if(t<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" points provided).");var a;for(r=[],n=0;n<t;n+=3)a=e.slice(n,n+3),r.push(Gn(en,a));return r}},Hg={clone:function(){return new en(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,t){var n=new Ye(this.start,this.controlPoint1,this.controlPoint2,this.end),r=n.divideAt(e,t);return[new en(r[0]),new en(r[1])]},divideAtLength:function(e,t){var n=new Ye(this.start,this.controlPoint1,this.controlPoint2,this.end),r=n.divideAtLength(e,t);return[new en(r[0]),new en(r[1])]},divideAtT:function(e){var t=new Ye(this.start,this.controlPoint1,this.controlPoint2,this.end),n=t.divideAtT(e);return[new en(n[0]),new en(n[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var e=this.start,t=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(e.equals(t)&&t.equals(n)&&n.equals(r))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,n){return this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this},serialize:function(){var e=this.controlPoint1,t=this.controlPoint2,n=this.end;return this.type+" "+e.x+" "+e.y+" "+t.x+" "+t.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Object.defineProperty(Hg,"type",{configurable:!0,enumerable:!0,value:"C"});en.prototype=ao(oi,Ye.prototype,Hg);var Zr=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof Zr))return Gn(Zr,e);if(t===0)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r;if(e[0]instanceof ve){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" lines provided).")}else if(e[0]instanceof Ye){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" curves provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===2)return this.end=new V(+e[0],+e[1]),this;if(t<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" coordinates provided).");var s;for(r=[],n=0;n<t;n+=2)s=e.slice(n,n+2),n===0?r.push(Gn(Zr,s)):r.push(Gn(At,s));return r}else{if(t===1)return this.end=new V(e[0]),this;var a;for(r=[],n=0;n<t;n+=1)a=e[n],n===0?r.push(new Zr(a)):r.push(new At(a));return r}},Qc={bbox:function(){return null},clone:function(){return new Zr(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,t,n){return this.end.scale(e,t,n),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(Qc,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}});Object.defineProperty(Qc,"type",{configurable:!0,enumerable:!0,value:"M"});Zr.prototype=ao(oi,Qc);var Ki=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof Ki))return Gn(Ki,e);if(t>0)throw new Error("Closepath constructor expects no arguments.");return this},Kc={clone:function(){return new Ki},divideAt:function(e){var t=new ve(this.start,this.end),n=t.divideAt(e);return[n[1].isDifferentiable()?new At(n[0]):this.clone(),new At(n[1])]},divideAtLength:function(e){var t=new ve(this.start,this.end),n=t.divideAtLength(e);return[n[1].isDifferentiable()?new At(n[0]):this.clone(),new At(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Kc,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}});Object.defineProperty(Kc,"type",{configurable:!0,enumerable:!0,value:"Z"});Ki.prototype=ao(oi,ve.prototype,Kc);var s1=Ce.segmentTypes={L:At,C:en,M:Zr,Z:Ki,z:Ki};Ce.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(s1).join("")+",.]*$");Ce.isDataSupported=function(e){return typeof e!="string"?!1:this.regexSupportedData.test(e)};const o1={curveThroughPoints:function(e){return console.warn("deprecated"),new Ce(Ye.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var t=[],n=[],r=e.length-1,s;if(r==1)return t[0]=new V((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),n[0]=new V(2*t[0].x-e[0].x,2*t[0].y-e[0].y),[t,n];var a=[];for(s=1;s<r-1;s++)a[s]=4*e[s].x+2*e[s+1].x;a[0]=e[0].x+2*e[1].x,a[r-1]=(8*e[r-1].x+e[r].x)/2;var l=this.getFirstControlPoints(a);for(s=1;s<r-1;++s)a[s]=4*e[s].y+2*e[s+1].y;a[0]=e[0].y+2*e[1].y,a[r-1]=(8*e[r-1].y+e[r].y)/2;var c=this.getFirstControlPoints(a);for(s=0;s<r;s++)t.push(new V(l[s],c[s])),s<r-1?n.push(new V(2*e[s+1].x-l[s+1],2*e[s+1].y-c[s+1])):n.push(new V((e[r].x+l[r-1])/2,(e[r].y+c[r-1])/2));return[t,n]},getCurveDivider:function(e,t,n,r){console.warn("deprecated");var s=new Ye(e,t,n,r);return function(l){var c=s.divide(l);return[{p0:c[0].start,p1:c[0].controlPoint1,p2:c[0].controlPoint2,p3:c[0].end},{p0:c[1].start,p1:c[1].controlPoint1,p2:c[1].controlPoint2,p3:c[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var t=e.length,n=[],r=[],s=2;n[0]=e[0]/s;for(var a=1;a<t;a++)r[a]=1/s,s=(a<t-1?4:3.5)-r[a],n[a]=(e[a]-n[a-1])/s;for(a=1;a<t;a++)n[t-a-1]-=r[t-a]*n[t-a];return n},getInversionSolver:function(e,t,n,r){console.warn("deprecated");var s=new Ye(e,t,n,r);return function(l){return s.closestPointT(l)}}},Yt=function(e){if(!(this instanceof Yt))return new Yt(e);if(typeof e=="string")return new Yt.parse(e);this.points=Array.isArray(e)?e.map(V):[]};Yt.parse=function(e){return new Yt(Vg(e))};Yt.fromRect=function(e){return new Yt([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])};Yt.prototype=ao(Je.prototype,{type:Fe.Polygon,clone:function(){return new Yt(Ug(this.points))},convexHull:function(){return new Yt(Gg(this.points))},lengthPoints:function(){const{start:e,end:t,points:n}=this;return n.length<=1||e.equals(t)?n:[...n,e.clone()]}});function Wg(e,t,n,r){switch(e.type){case Fe.Line:{switch(t.type){case Fe.Line:return Qr(e,t)}break}case Fe.Ellipse:{switch(t.type){case Fe.Line:return Jc(e,t);case Fe.Ellipse:return jg(e,t)}break}case Fe.Rect:{switch(t.type){case Fe.Line:return qg(e,t);case Fe.Ellipse:return Yg(e,t);case Fe.Rect:return ef(e,t)}break}case Fe.Polyline:{switch(t.type){case Fe.Line:return ol(e,t);case Fe.Ellipse:return tf(e,t);case Fe.Rect:return Xg(e,t);case Fe.Polyline:return Zg(e,t)}break}case Fe.Polygon:{switch(t.type){case Fe.Line:return nf(e,t);case Fe.Ellipse:return al(e,t);case Fe.Rect:return Qg(e,t);case Fe.Polyline:return Kg(e,t);case Fe.Polygon:return Jg(e,t)}break}case Fe.Path:{switch(t.type){case Fe.Line:return em(e,t,n);case Fe.Ellipse:return tm(e,t,n);case Fe.Rect:return nm(e,t,n);case Fe.Polyline:return rf(e,t,n);case Fe.Polygon:return ll(e,t,n);case Fe.Path:return rm(e,t,n,r)}break}}switch(t.type){case Fe.Ellipse:case Fe.Rect:case Fe.Polyline:case Fe.Polygon:case Fe.Path:return Wg(t,e,r,n);default:throw Error(`The intersection for ${e} and ${t} could not be found.`)}}function Qr(e,t){const n=e.start.x,r=e.start.y,s=e.end.x,a=e.end.y,l=t.start.x,c=t.start.y,f=t.end.x,p=t.end.y,g=s-n,d=a-r,x=f-l,w=p-c,E=n-l,T=r-c,P=g*w-x*d,C=(g*T-d*E)/P,L=(x*T-w*E)/P;return C>=0&&C<=1&&L>=0&&L<=1}function Jc(e,t){const n=e.a,r=e.b,s=e.x,a=e.y,l=t.start.x-s,c=t.end.x-s,f=t.start.y-a,p=t.end.y-a,g=n*n,d=r*r,x=c-l,w=p-f,E=x*x/g+w*w/d,T=2*l*x/g+2*f*w/d,P=l*l/g+f*f/d-1,C=T*T-4*E*P;if(C===0){const L=-T/2/E;return L>=0&&L<=1}else if(C>0){const L=Math.sqrt(C),M=(-T+L)/2/E,F=(-T-L)/2/E;return M>=0&&M<=1||F>=0&&F<=1}return!1}function jg(e,t){return a1(e,0,t,0)}function qg(e,t){const{start:n,end:r}=t,{x:s,y:a,width:l,height:c}=e;return n.x>s+l&&r.x>s+l||n.x<s&&r.x<s||n.y>a+c&&r.y>a+c||n.y<a&&r.y<a?!1:e.containsPoint(t.start)||e.containsPoint(t.end)?!0:Qr(e.topLine(),t)||Qr(e.rightLine(),t)||Qr(e.bottomLine(),t)||Qr(e.leftLine(),t)}function Yg(e,t){return ef(e,de.fromEllipse(t))?al(Yt.fromRect(e),t):!1}function ef(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function ol(e,t){return im(e,t,{interior:!1})}function tf(e,t){return sm(e,t,{interior:!1})}function Xg(e,t){return om(e,t,{interior:!1})}function Zg(e,t){return ul(e,t,{interior:!1})}function nf(e,t){return im(e,t,{interior:!0})}function al(e,t){return sm(e,t,{interior:!0})}function Qg(e,t){return om(e,t,{interior:!0})}function Kg(e,t){return ul(e,t,{interior:!0})}function Jg(e,t){return sf(e,t,{interior:!0})}function em(e,t,n){return e.getSubpaths().some(r=>{const[s]=r.toPolylines(n),{type:a}=r.getSegment(-1);return a==="Z"?nf(s,t):ol(s,t)})}function tm(e,t,n){return e.getSubpaths().some(r=>{const[s]=r.toPolylines(n),{type:a}=r.getSegment(-1);return a==="Z"?al(s,t):tf(s,t)})}function nm(e,t,n){return ll(e,Yt.fromRect(t),n)}function rf(e,t,n){return am(e,t,n,{interior:!1})}function ll(e,t,n){return am(e,t,n,{interior:!0})}function rm(e,t,n,r){return e.getSubpaths().some(s=>{const[a]=s.toPolylines(n),{type:l}=s.getSegment(-1);return l==="Z"?ll(t,a,r):rf(t,a,r)})}function im(e,t,n={}){const{interior:r=!1}=n;let s;if(r){if(e.containsPoint(t.start))return!0;const{start:c,end:f,points:p}=e;s=f.equals(c)?p:[...p,c]}else s=e.points;const{length:a}=s,l=new ve;for(let c=0;c<a-1;c++)if(l.start=s[c],l.end=s[c+1],Qr(t,l))return!0;return!1}function sm(e,t,n={}){const{start:r,end:s,points:a}=e;if(t.containsPoint(r))return!0;let l;const{interior:c=!1}=n;if(c){if(e.containsPoint(t.center()))return!0;l=s.equals(r)?a:[...a,r]}else l=a;const{length:f}=l,p=new ve;for(let g=0;g<f-1;g++)if(p.start=l[g],p.end=l[g+1],Jc(t,p))return!0;return!1}function om(e,t,n){const r=Yt.fromRect(t);return sf(e,r,n)}function am(e,t,n,r){return e.getSubpaths().some(s=>{const[a]=s.toPolylines(n),{type:l}=s.getSegment(-1);return l==="Z"?sf(t,a,r):ul(t,a,r)})}function ul(e,t,n={}){const{interior:r=!1}=n;let s;if(r){const{start:f}=t;if(e.containsPoint(f))return!0;s=e.clone().close()}else s=e;const a=t.points,{length:l}=a,c=new ve;for(let f=0;f<l-1;f++)if(c.start=a[f],c.end=a[f+1],ol(s,c))return!0;return!1}function sf(e,t,n){return t.containsPoint(e.start)||ul(e,t.clone().close(),n)}function a1(e,t,n,r){const{cos:s,sin:a}=Math,l=a(t),c=s(t),f=a(r),p=s(r),g=l*l,d=c*c,x=l*c,w=f*f,E=p*p,T=f*p,P=e.a*e.a,C=e.b*e.b,L=n.a*n.a,M=n.b*n.b,F=P*g+C*d,$=L*w+M*E,X=P*d+C*g,y=L*E+M*w;let S=2*(C-P)*x,A=2*(M-L)*T,_=-2*F*e.x-S*e.y,R=-2*$*n.x-A*n.y,G=-S*e.x-2*X*e.y,j=-A*n.x-2*y*n.y;const J=F*e.x*e.x+X*e.y*e.y+S*e.x*e.y-P*C,re=$*n.x*n.x+y*n.y*n.y+A*n.x*n.y-L*M;S=S/2,A=A/2,_=_/2,R=R/2,G=G/2,j=j/2;const I=Ar([[F,S,_],[S,X,G],[_,G,J]]),B=Ar([[$,A,R],[A,y,j],[R,j,re]]),N=.33333333*(Ar([[$,S,_],[A,X,G],[R,G,J]])+Ar([[F,A,_],[S,y,G],[_,j,J]])+Ar([[F,S,R],[S,X,j],[_,G,re]])),D=.33333333*(Ar([[F,A,R],[S,y,j],[_,j,re]])+Ar([[$,S,R],[A,X,j],[R,G,re]])+Ar([[$,A,_],[A,y,G],[R,j,J]])),H=Oa([[I,N],[N,D]]),k=Oa([[I,D],[N,B]]),q=Oa([[N,D],[D,B]]);return!(Oa([[2*H,k],[k,2*q]])>0&&(D>0||N>0))}function Oa(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function Ar(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}const l1=Object.freeze(Object.defineProperty({__proto__:null,ellipseWithEllipse:jg,ellipseWithLine:Jc,exists:Wg,lineWithLine:Qr,pathWithEllipse:tm,pathWithLine:em,pathWithPath:rm,pathWithPolygon:ll,pathWithPolyline:rf,pathWithRect:nm,polygonWithEllipse:al,polygonWithLine:nf,polygonWithPolygon:Jg,polygonWithPolyline:Kg,polygonWithRect:Qg,polylineWithEllipse:tf,polylineWithLine:ol,polylineWithPolyline:Zg,polylineWithRect:Xg,rectWithEllipse:Yg,rectWithLine:qg,rectWithRect:ef},Symbol.toStringTag,{value:"Module"})),Kr=l1,u1=Object.freeze(Object.defineProperty({__proto__:null,Curve:Ye,Ellipse:Dt,Line:ve,Path:Ce,Point:V,Polygon:Yt,Polyline:Je,Rect:de,bezier:o1,ellipse:J0,intersection:Kr,line:ei,normalizeAngle:mn,point:Qa,random:Lc,rect:r1,scale:Y0,snapToGrid:ni,toDeg:sl,toRad:qt,types:Fe},Symbol.toStringTag,{value:"Module"})),ne=function(){var e=typeof window=="object"&&!!window.SVGAngle;if(!e)return function(){throw new Error("SVG is required to use Vectorizer.")};var t={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},n="1.1",r=Math,s=r.PI,a=r.atan2,l=r.sqrt,c=r.min,f=r.max,p=r.cos,g=r.sin,d=function(y,S,A){if(!(this instanceof d))return d.apply(Object.create(d.prototype),arguments);if(y){if(d.isV(y)&&(y=y.node),S=S||{},d.isString(y)){if(y=y.trim(),y.toLowerCase()==="svg")y=d.createSvgDocument();else if(y[0]==="<"){var _=d.createSvgDocument(y);if(_.childNodes.length>1){var R=[],G,j;for(G=0,j=_.childNodes.length;G<j;G++){var J=_.childNodes[G];R.push(new d(document.importNode(J,!0)))}return R}y=document.importNode(_.firstChild,!0)}else y=document.createElementNS(t.svg,y);d.ensureId(y)}return this.node=y,this.setAttributes(S),A&&this.append(A),this}},x=d.prototype;Object.defineProperty(x,"id",{enumerable:!0,get:function(){return this.node.id},set:function(y){this.node.id=y}}),x.getTransformToElement=function(y){var S=this.node;if(d.isSVGGraphicsElement(y)&&d.isSVGGraphicsElement(S)){var A=d.toNode(y).getScreenCTM(),_=S.getScreenCTM();if(A&&_)return A.inverse().multiply(_)}return d.createSVGMatrix()},x.transform=function(y,S){var A=this.node;if(d.isUndefined(y))return d.transformStringToMatrix(this.attr("transform"));if(S&&S.absolute)return this.attr("transform",d.matrixToTransformString(y));var _=d.createSVGTransform(y);return A.transform.baseVal.appendItem(_),this},x.translate=function(y,S,A){A=A||{},S=S||0;var _=this.attr("transform")||"",R=d.parseTransformString(_);if(_=R.value,d.isUndefined(y))return R.translate;_=_.replace(/translate\([^)]*\)/g,"").trim();var G=A.absolute?y:R.translate.tx+y,j=A.absolute?S:R.translate.ty+S,J="translate("+G+","+j+")";return this.attr("transform",(J+" "+_).trim()),this},x.rotate=function(y,S,A,_){_=_||{};var R=this.attr("transform")||"",G=d.parseTransformString(R);if(R=G.value,d.isUndefined(y))return G.rotate;R=R.replace(/rotate\([^)]*\)/g,"").trim(),y%=360;var j=_.absolute?y:G.rotate.angle+y,J=S!==void 0&&A!==void 0?","+S+","+A:"",re="rotate("+j+J+")";return this.attr("transform",(R+" "+re).trim()),this},x.scale=function(y,S){S=d.isUndefined(S)?y:S;var A=this.attr("transform")||"",_=d.parseTransformString(A);if(A=_.value,d.isUndefined(y))return _.scale;A=A.replace(/scale\([^)]*\)/g,"").trim();var R="scale("+y+","+S+")";return this.attr("transform",(A+" "+R).trim()),this},x.bbox=function(y,S){var A,_=this.node,R=_.ownerSVGElement;if(!R)return new de(0,0,0,0);try{A=_.getBBox()}catch{A={x:_.clientLeft,y:_.clientTop,width:_.clientWidth,height:_.clientHeight}}if(y)return new de(A);var G=this.getTransformToElement(S||R);return d.transformRect(A,G)},x.getBBox=function(y){var S={},A,_=this.node,R=_.ownerSVGElement;if(!R||!d.isSVGGraphicsElement(_))return new de(0,0,0,0);if(y&&(y.target&&(S.target=d.toNode(y.target)),y.recursive&&(S.recursive=y.recursive)),S.recursive){var j=this.children(),J=j.length;if(J===0)return this.getBBox({target:S.target,recursive:!1});S.target||(S.target=this);for(var re=0;re<J;re++){var I=j[re],B;I.children().length===0?B=I.getBBox({target:S.target,recursive:!1}):B=I.getBBox({target:S.target,recursive:!0}),A?A=A.union(B):A=B}return A}else{try{A=_.getBBox()}catch{A={x:_.clientLeft,y:_.clientTop,width:_.clientWidth,height:_.clientHeight}}if(S.target){var G=this.getTransformToElement(S.target);return d.transformRect(A,G)}else return new de(A)}};function w(y,S){y||(y={});var A=d("textPath"),_=y.d;if(_&&y["xlink:href"]===void 0){var R=d("path").attr("d",_).appendTo(S.defs());A.attr("xlink:href","#"+R.id)}return d.isObject(y)&&A.attr(y),A.node}function E(y,S,A){for(var _=A.includeAnnotationIndices,R=A.eol,G=A.lineHeight,j=A.baseSize,J=0,re={},I=S.length-1,B=0;B<=I;B++){var N=S[B],D=null;if(d.isObject(N)){var H=N.attrs,k=d("tspan",H),q=k.node,xe=N.t;R&&B===I&&(xe+=R),q.textContent=xe;var se=H.class;se&&k.addClass(se),_&&k.attr("annotations",N.annotations),D=parseFloat(H["font-size"]),isFinite(D)||(D=j),D&&D>J&&(J=D)}else R&&B===I&&(N+=R),q=document.createTextNode(N||" "),j&&j>J&&(J=j);y.appendChild(q)}return J&&(re.maxFontSize=J),G?re.lineHeight=G:J&&(re.lineHeight=J*1.2),re}var T=/em$/;function P(y,S){var A=parseFloat(y);return T.test(y)?A*S:A}function C(y,S,A,_){if(!Array.isArray(S))return 0;var R=S.length;if(!R)return 0;for(var G=S[0],j=P(G.maxFontSize,A)||A,J=0,re=P(_,A),I=1;I<R;I++){G=S[I];var B=P(G.lineHeight,A)||re;J+=B}var N=P(G.maxFontSize,A)||A,D;switch(y){case"middle":D=j/2-.15*N-J/2;break;case"bottom":D=-(.25*N)-J;break;default:case"top":D=.8*j;break}return D}x.text=function(y,S){if(y&&typeof y!="string")throw new Error("Vectorizer: text() expects the first argument to be a string.");y=d.sanitizeText(y),S||(S={});var A=S.displayEmpty,_=S.eol,R=S.textPath,G=S.textVerticalAnchor,j=G==="middle"||G==="bottom"||G==="top",J=S.x;J===void 0&&(J=this.attr("x")||0);var re=S.includeAnnotationIndices,I=S.annotations;I&&!d.isArray(I)&&(I=[I]);var B=S.lineHeight,N=B==="auto",D=N?"1.5em":B||"1em";this.empty(),this.attr({"xml:space":"preserve",display:y||A?null:"none"});var H=parseFloat(this.attr("font-size"));H||(H=16,(j||I)&&this.attr("font-size",H));var k=document,q;R?(typeof R=="string"&&(R={d:R}),q=w(R,this)):q=k.createDocumentFragment();for(var xe=0,se=y.split(`
`),fe=[],he,me=0,pe=se.length-1;me<=pe;me++){var Ee=D,Le="v-line",ke=k.createElementNS(t.svg,"tspan"),Be=se[me],Me;if(Be)if(I){var le=d.annotateString(Be,I,{offset:-xe,includeAnnotationIndices:re});Me=E(ke,le,{includeAnnotationIndices:re,eol:me!==pe&&_,lineHeight:N?null:D,baseSize:H});var we=Me.lineHeight;we&&N&&me!==0&&(Ee=we),me===0&&(he=Me.maxFontSize*.8)}else _&&me!==pe&&(Be+=_),ke.textContent=Be;else{ke.textContent="-",Le+=" v-empty-line";var ie=ke.style;if(ie.fillOpacity=0,ie.strokeOpacity=0,I){Me={},le=d.findAnnotationsAtIndex(I,xe);let Z=H;for(let K=le.length;K>0;K--){const ye=le[K-1].attrs;if(!ye||!("font-size"in ye))continue;const Re=parseFloat(ye["font-size"]);if(isFinite(Re)){Z=Re;break}}N&&(me>0?Ee=Z*1.2:he=Z*.8),ke.setAttribute("font-size",Z),Me.maxFontSize=Z}}Me&&fe.push(Me),me>0&&ke.setAttribute("dy",Ee),(me>0||R)&&ke.setAttribute("x",J),ke.className.baseVal=Le,q.appendChild(ke),xe+=Be.length+1}if(j)if(I)Ee=C(G,fe,H,D);else if(G==="top")Ee="0.8em";else{var z;switch(pe>0?(z=parseFloat(D)||1,z*=pe,T.test(D)||(z/=H)):z=0,G){case"middle":Ee=.3-z/2+"em";break;case"bottom":Ee=-z-.3+"em";break}}else G===0?Ee="0em":G?Ee=G:(Ee=0,this.attr("y")===null&&this.attr("y",he||"0.8em"));return q.firstChild.setAttribute("dy",Ee),this.append(q),this},x.removeAttr=function(y){const S=$[y],{ns:A,local:_}=d.qualifyAttr(S),R=this.node;return A?R.hasAttributeNS(A,_)&&R.removeAttributeNS(A,_):R.hasAttribute(S)&&R.removeAttribute(S),this},x.attr=function(y,S){if(d.isUndefined(y)){for(var A=this.node.attributes,_={},R=0;R<A.length;R++)_[A[R].name]=A[R].value;return _}if(d.isString(y)&&d.isUndefined(S))return this.node.getAttribute($[y]);if(typeof y=="object")for(var G in y)y.hasOwnProperty(G)&&this.setAttribute(G,y[G]);else this.setAttribute(y,S);return this},x.normalizePath=function(){var y=this.tagName();return y==="PATH"&&this.attr("d",d.normalizePathData(this.attr("d"))),this},x.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},x.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},x.setAttributes=function(y){for(var S in y)y.hasOwnProperty(S)&&this.setAttribute(S,y[S]);return this},x.append=function(y){d.isArray(y)||(y=[y]);for(var S=0,A=y.length;S<A;S++)this.node.appendChild(d.toNode(y[S]));return this},x.prepend=function(y){var S=this.node.firstChild;return S?d(S).before(y):this.append(y)},x.before=function(y){var S=this.node,A=S.parentNode;if(A){d.isArray(y)||(y=[y]);for(var _=0,R=y.length;_<R;_++)A.insertBefore(d.toNode(y[_]),S)}return this},x.appendTo=function(y){return d.toNode(y).appendChild(this.node),this},x.svg=function(){return this.node instanceof window.SVGSVGElement?this:d(this.node.ownerSVGElement)},x.tagName=function(){return this.node.tagName.toUpperCase()},x.defs=function(){var y=this.svg()||this,S=y.node.getElementsByTagName("defs")[0];return S?d(S):d("defs").appendTo(y)},x.clone=function(){var y=d(this.node.cloneNode(!0));return y.node.id=d.uniqueId(),y},x.findOne=function(y){var S=this.node.querySelector(y);return S?d(S):void 0},x.find=function(y){var S=[],A=this.node.querySelectorAll(y);if(A)for(var _=0;_<A.length;_++)S.push(d(A[_]));return S},x.children=function(){for(var y=this.node.childNodes,S=[],A=0;A<y.length;A++){var _=y[A];_.nodeType===1&&S.push(d(y[A]))}return S},x.parent=function(){return d(this.node.parentNode)||null},x.index=function(){for(var y=0,S=this.node.previousSibling;S;)S.nodeType===1&&y++,S=S.previousSibling;return y},x.findParentByClass=function(y,S){for(var A=this.node.ownerSVGElement,_=this.node.parentNode;_&&_!==S&&_!==A;){var R=d(_);if(R.hasClass(y))return R;_=_.parentNode}return null},x.contains=function(y){var S=this.node,A=d.toNode(y),_=A&&A.parentNode;return S===_||!!(_&&_.nodeType===1&&S.compareDocumentPosition(_)&16)},x.toLocalPoint=function(y,S){var A=this.svg().node,_=A.createSVGPoint();_.x=y,_.y=S;try{var R=_.matrixTransform(A.getScreenCTM().inverse()),G=this.getTransformToElement(A).inverse()}catch{return _}return R.matrixTransform(G)},x.translateCenterToPoint=function(y){var S=this.getBBox({target:this.svg()}),A=S.center();return this.translate(y.x-A.x,y.y-A.y),this},x.translateAndAutoOrient=function(y,S,A){y=new V(y),S=new V(S),A||(A=this.svg());var _=this.scale();this.attr("transform","");var R=this.getBBox({target:A}).scale(_.sx,_.sy),G=d.createSVGTransform();G.setTranslate(-R.x-R.width/2,-R.y-R.height/2);var j=d.createSVGTransform(),J=y.angleBetween(S,y.clone().offset(1,0));J&&j.setRotate(J,0,0);var re=d.createSVGTransform(),I=y.clone().move(S,R.width/2);re.setTranslate(2*y.x-I.x,2*y.y-I.y);var B=this.getTransformToElement(A),N=d.createSVGTransform();return N.setMatrix(re.matrix.multiply(j.matrix.multiply(G.matrix.multiply(B.scale(_.sx,_.sy))))),this.attr("transform",d.matrixToTransformString(N.matrix)),this},x.animateAlongPath=function(y,S){S=d.toNode(S);var A=d.ensureId(S),_=d("animateMotion",y),R=d("mpath",{"xlink:href":"#"+A});_.append(R),this.append(_);try{_.node.beginElement()}catch{if(document.documentElement.getAttribute("smiling")==="fake"){var G=_.node;G.animators=[];var j=G.getAttribute("id");j&&(id2anim[j]=G);for(var J=getTargets(G),re=0,I=J.length;re<I;re++){var B=J[re],N=new Animator(G,B,re);animators.push(N),G.animators[re]=N,N.register()}}}return this};const L=/[^\x20\t\r\n\f]+/g;function M(y){return d.isString(y)?y.trim().match(L)||[]:[]}x.hasClass=function(y){return d.isString(y)?this.node.classList.contains(y.trim()):!1},x.addClass=function(y){return this.node.classList.add(...M(y)),this},x.removeClass=function(y){return this.node.classList.remove(...M(y)),this},x.toggleClass=function(y,S){const A=M(y);for(let _=0;_<A.length;_++)this.node.classList.toggle(A[_],S);return this},x.sample=function(y){y=y||1;for(var S=this.node,A=S.getTotalLength(),_=[],R=0,G;R<A;)G=S.getPointAtLength(R),_.push({x:G.x,y:G.y,distance:R}),R+=y;return _},x.convertToPath=function(){var y=d("path");y.attr(this.attr());var S=this.convertToPathData();return S&&y.attr("d",S),y},x.convertToPathData=function(){var y=this.tagName();switch(y){case"PATH":return this.attr("d");case"LINE":return d.convertLineToPathData(this.node);case"POLYGON":return d.convertPolygonToPathData(this.node);case"POLYLINE":return d.convertPolylineToPathData(this.node);case"ELLIPSE":return d.convertEllipseToPathData(this.node);case"CIRCLE":return d.convertCircleToPathData(this.node);case"RECT":return d.convertRectToPathData(this.node)}throw new Error(y+" cannot be converted to PATH.")},d.prototype.toGeometryShape=function(){var y,S,A,_,R,G,j,J,re,I,B,N,D,H,k;switch(this.tagName()){case"RECT":return y=parseFloat(this.attr("x"))||0,S=parseFloat(this.attr("y"))||0,A=parseFloat(this.attr("width"))||0,_=parseFloat(this.attr("height"))||0,new de(y,S,A,_);case"CIRCLE":return R=parseFloat(this.attr("cx"))||0,G=parseFloat(this.attr("cy"))||0,j=parseFloat(this.attr("r"))||0,new Dt({x:R,y:G},j,j);case"ELLIPSE":return R=parseFloat(this.attr("cx"))||0,G=parseFloat(this.attr("cy"))||0,J=parseFloat(this.attr("rx"))||0,re=parseFloat(this.attr("ry"))||0,new Dt({x:R,y:G},J,re);case"POLYLINE":return I=d.getPointsFromSvgNode(this),new Je(I);case"POLYGON":return I=d.getPointsFromSvgNode(this),I.length>1&&I.push(I[0]),new Je(I);case"PATH":return B=this.attr("d"),Ce.isDataSupported(B)||(B=d.normalizePathData(B)),new Ce(B);case"LINE":return N=parseFloat(this.attr("x1"))||0,H=parseFloat(this.attr("y1"))||0,D=parseFloat(this.attr("x2"))||0,k=parseFloat(this.attr("y2"))||0,new ve({x:N,y:H},{x:D,y:k})}return this.getBBox()},x.findIntersection=function(y,S){var A=this.svg().node;S=S||A;var _=this.getBBox({target:S}),R=_.center();if(_.intersectionWithLineFromCenterToPoint(y)){var G,j=this.tagName();if(j==="RECT"){var J=new de(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),re=this.getTransformToElement(S),I=d.decomposeMatrix(re),B=A.createSVGTransform();B.setRotate(-I.rotation,R.x,R.y);var N=d.transformRect(J,B.matrix.multiply(re));G=new de(N).intersectionWithLineFromCenterToPoint(y,I.rotation)}else if(j==="PATH"||j==="POLYGON"||j==="POLYLINE"||j==="CIRCLE"||j==="ELLIPSE"){var D=j==="PATH"?this:this.convertToPath(),H=D.sample(),k=1/0,q=[],xe,se,fe,he,me,pe;for(xe=0;xe<H.length;xe++)se=H[xe],fe=d.createSVGPoint(se.x,se.y),fe=fe.matrixTransform(this.getTransformToElement(S)),se=new V(fe),he=se.distance(R),me=se.distance(y)*1.1,pe=he+me,pe<k?(k=pe,q=[{sample:se,refDistance:me}]):pe<k+1&&q.push({sample:se,refDistance:me});q.sort(function(Ee,Le){return Ee.refDistance-Le.refDistance}),q[0]&&(G=q[0].sample)}return G}},x.setAttribute=function(y,S){const A=this.node;if(S===null)return this.removeAttr(y),this;const _=$[y],{ns:R}=d.qualifyAttr(_);return R?A.setAttributeNS(R,_,S):_==="id"?A.id=S:A.setAttribute(_,S),this},d.createSvgDocument=function(y){if(y){const A=`<svg xmlns="${t.svg}" xmlns:xlink="${t.xlink}" version="${n}">${y}</svg>`,{documentElement:_}=d.parseXML(A,{async:!1});return _}const S=document.createElementNS(t.svg,"svg");return S.setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),S.setAttribute("version",n),S},d.createSVGStyle=function(y){const{node:S}=d("style",{type:"text/css"},[d.createCDATASection(y)]);return S},d.createCDATASection=function(y=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(y)},d.idCounter=0,d.uniqueId=function(){return"v-"+ ++d.idCounter},d.toNode=function(y){return d.isV(y)?y.node:y.nodeName&&y||y[0]},d.ensureId=function(y){return y=d.toNode(y),y.id||(y.id=d.uniqueId())},d.sanitizeText=function(y){return(y||"").replace(/ /g," ")},d.isUndefined=function(y){return typeof y>"u"},d.isString=function(y){return typeof y=="string"},d.isObject=function(y){return y&&typeof y=="object"},d.isArray=Array.isArray,d.parseXML=function(y,S){S=S||{};var A;try{var _=new DOMParser;d.isUndefined(S.async)||(_.async=S.async),A=_.parseFromString(y,"text/xml")}catch{A=void 0}if(!A||A.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+y);return A};const F=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach(y=>F[y]=y),F.xlinkShow="xlink:show",F.xlinkRole="xlink:role",F.xlinkActuate="xlink:actuate",F.xlinkHref="xlink:href",F.xlinkType="xlink:type",F.xlinkTitle="xlink:title",F.xmlBase="xml:base",F.xmlLang="xml:lang",F.xmlSpace="xml:space";const $=new Proxy(F,{get(y,S){return d.supportCamelCaseAttributes?S in y?y[S]:y[S]=S.replace(/[A-Z]/g,"-$&").toLowerCase():S}});Object.defineProperty(d,"attributeNames",{enumerable:!0,value:$,writable:!1}),Object.defineProperty(d,"supportCamelCaseAttributes",{enumerable:!0,value:!0,writable:!0}),d.qualifyAttr=function(y){if(y.indexOf(":")!==-1){var S=y.split(":");return{ns:t[S[0]],local:S[1]}}return{ns:null,local:y}},d.transformSeparatorRegex=/[ ,]+/,d.transformRegex=/\b\w+\([^()]+\)/g,d.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,d.transformTranslateRegex=/\btranslate\(([^()]+)\)/,d.transformRotateRegex=/\brotate\(([^()]+)\)/,d.transformScaleRegex=/\bscale\(([^()]+)\)/,d.transformStringToMatrix=function(y){let S=d.createSVGMatrix();const A=y&&y.match(d.transformRegex);if(!A)return S;const _=A.length;for(let R=0;R<_;R++){const j=A[R].match(d.transformFunctionRegex);if(j){let J,re,I,B,N,D=d.createSVGMatrix();const H=j[1].toLowerCase(),k=j[2].split(d.transformSeparatorRegex);switch(H){case"scale":J=parseFloat(k[0]),re=k[1]===void 0?J:parseFloat(k[1]),D=D.scaleNonUniform(J,re);break;case"translate":I=parseFloat(k[0]),B=parseFloat(k[1]),D=D.translate(I,B);break;case"rotate":N=parseFloat(k[0]),I=parseFloat(k[1])||0,B=parseFloat(k[2])||0,I!==0||B!==0?D=D.translate(I,B).rotate(N).translate(-I,-B):D=D.rotate(N);break;case"skewx":N=parseFloat(k[0]),D=D.skewX(N);break;case"skewy":N=parseFloat(k[0]),D=D.skewY(N);break;case"matrix":D.a=parseFloat(k[0]),D.b=parseFloat(k[1]),D.c=parseFloat(k[2]),D.d=parseFloat(k[3]),D.e=parseFloat(k[4]),D.f=parseFloat(k[5]);break;default:continue}S=S.multiply(D)}}return S},d.matrixToTransformString=function(y){return y||(y=!0),"matrix("+(y.a!==void 0?y.a:1)+","+(y.b!==void 0?y.b:0)+","+(y.c!==void 0?y.c:0)+","+(y.d!==void 0?y.d:1)+","+(y.e!==void 0?y.e:0)+","+(y.f!==void 0?y.f:0)+")"},d.parseTransformString=function(y){var S,A,_;if(y){var R=d.transformSeparatorRegex;if(y.trim().indexOf("matrix")>=0){var G=d.transformStringToMatrix(y),j=d.decomposeMatrix(G);S=[j.translateX,j.translateY],_=[j.scaleX,j.scaleY],A=[j.rotation];var J=[];(S[0]!==0||S[1]!==0)&&J.push("translate("+S+")"),(_[0]!==1||_[1]!==1)&&J.push("scale("+_+")"),A[0]!==0&&J.push("rotate("+A+")"),y=J.join(" ")}else{const I=y.match(d.transformTranslateRegex);I&&(S=I[1].split(R));const B=y.match(d.transformRotateRegex);B&&(A=B[1].split(R));const N=y.match(d.transformScaleRegex);N&&(_=N[1].split(R))}}var re=_&&_[0]?parseFloat(_[0]):1;return{value:y,translate:{tx:S&&S[0]?parseInt(S[0],10):0,ty:S&&S[1]?parseInt(S[1],10):0},rotate:{angle:A&&A[0]?parseInt(A[0],10):0,cx:A&&A[1]?parseInt(A[1],10):void 0,cy:A&&A[2]?parseInt(A[2],10):void 0},scale:{sx:re,sy:_&&_[1]?parseFloat(_[1]):re}}},d.deltaTransformPoint=function(y,S){var A=S.x*y.a+S.y*y.c+0,_=S.x*y.b+S.y*y.d+0;return{x:A,y:_}},d.decomposeMatrix=function(y){var S=d.deltaTransformPoint(y,{x:0,y:1}),A=d.deltaTransformPoint(y,{x:1,y:0}),_=180/s*a(S.y,S.x)-90,R=180/s*a(A.y,A.x);return{translateX:y.e,translateY:y.f,scaleX:l(y.a*y.a+y.b*y.b),scaleY:l(y.c*y.c+y.d*y.d),skewX:_,skewY:R,rotation:_}},d.matrixToScale=function(y){var S,A,_,R;return y?(S=d.isUndefined(y.a)?1:y.a,R=d.isUndefined(y.d)?1:y.d,A=y.b,_=y.c):S=R=1,{sx:A?l(S*S+A*A):S,sy:_?l(_*_+R*R):R}},d.matrixToRotate=function(y){var S={x:0,y:1};return y&&(S=d.deltaTransformPoint(y,S)),{angle:mn(sl(a(S.y,S.x))-90)}},d.matrixToTranslate=function(y){return{tx:y&&y.e||0,ty:y&&y.f||0}},d.isV=function(y){return y instanceof d},d.isVElement=d.isV,d.isSVGGraphicsElement=function(y){return y?(y=d.toNode(y),y instanceof SVGElement&&typeof y.getScreenCTM=="function"):!1};var X=d("svg").node;return d.createSVGMatrix=function(y){var S=X.createSVGMatrix();for(var A in y)S[A]=y[A];return S},d.createSVGTransform=function(y){return d.isUndefined(y)?X.createSVGTransform():(y instanceof SVGMatrix||(y=d.createSVGMatrix(y)),X.createSVGTransformFromMatrix(y))},d.createSVGPoint=function(y,S){var A=X.createSVGPoint();return A.x=y,A.y=S,A},d.transformRect=function(y,S){var A=X.createSVGPoint();A.x=y.x,A.y=y.y;var _=A.matrixTransform(S);A.x=y.x+y.width,A.y=y.y;var R=A.matrixTransform(S);A.x=y.x+y.width,A.y=y.y+y.height;var G=A.matrixTransform(S);A.x=y.x,A.y=y.y+y.height;var j=A.matrixTransform(S),J=c(_.x,R.x,G.x,j.x),re=f(_.x,R.x,G.x,j.x),I=c(_.y,R.y,G.y,j.y),B=f(_.y,R.y,G.y,j.y);return new de(J,I,re-J,B-I)},d.transformPoint=function(y,S){return new V(d.createSVGPoint(y.x,y.y).matrixTransform(S))},d.transformLine=function(y,S){return new ve(d.transformPoint(y.start,S),d.transformPoint(y.end,S))},d.transformPolyline=function(y,S){var A=y instanceof Je?y.points:y;d.isArray(A)||(A=[]);for(var _=[],R=0,G=A.length;R<G;R++)_[R]=d.transformPoint(A[R],S);return new Je(_)},d.styleToObject=function(y){for(var S={},A=y.split(";"),_=0;_<A.length;_++){var R=A[_],G=R.split("=");S[G[0].trim()]=G[1].trim()}return S},d.createSlicePathData=function(y,S,A,_){var R=2*s-1e-6,G=y,j=S,J=A,re=_,I=(re<J&&(I=J,J=re,re=I),re-J),B=I<s?"0":"1",N=p(J),D=g(J),H=p(re),k=g(re);return I>=R?G?"M0,"+j+"A"+j+","+j+" 0 1,1 0,"+-j+"A"+j+","+j+" 0 1,1 0,"+j+"M0,"+G+"A"+G+","+G+" 0 1,0 0,"+-G+"A"+G+","+G+" 0 1,0 0,"+G+"Z":"M0,"+j+"A"+j+","+j+" 0 1,1 0,"+-j+"A"+j+","+j+" 0 1,1 0,"+j+"Z":G?"M"+j*N+","+j*D+"A"+j+","+j+" 0 "+B+",1 "+j*H+","+j*k+"L"+G*H+","+G*k+"A"+G+","+G+" 0 "+B+",0 "+G*N+","+G*D+"Z":"M"+j*N+","+j*D+"A"+j+","+j+" 0 "+B+",1 "+j*H+","+j*k+"L0,0Z"},d.mergeAttrs=function(y,S){for(var A in S)A==="class"?y[A]=y[A]?y[A]+" "+S[A]:S[A]:A==="style"?d.isObject(y[A])&&d.isObject(S[A])?y[A]=d.mergeAttrs(y[A],S[A]):d.isObject(y[A])?y[A]=d.mergeAttrs(y[A],d.styleToObject(S[A])):d.isObject(S[A])?y[A]=d.mergeAttrs(d.styleToObject(y[A]),S[A]):y[A]=d.mergeAttrs(d.styleToObject(y[A]),d.styleToObject(S[A])):y[A]=S[A];return y},d.annotateString=function(y,S,A){S=S||[],A=A||{};for(var _=A.offset||0,R=[],G,j=[],J,re,I=0;I<y.length;I++){J=j[I]=y[I];for(var B=0;B<S.length;B++){var N=S[B],D=N.start+_,H=N.end+_;I>=D&&I<H&&(d.isObject(J)?J.attrs=d.mergeAttrs(d.mergeAttrs({},J.attrs),N.attrs):J=j[I]={t:y[I],attrs:N.attrs},A.includeAnnotationIndices&&(J.annotations||(J.annotations=[])).push(B))}re=j[I-1],re?d.isObject(J)&&d.isObject(re)?JSON.stringify(J.attrs)===JSON.stringify(re.attrs)?G.t+=J.t:(R.push(G),G=J):d.isObject(J)||d.isObject(re)?(R.push(G),G=J):G=(G||"")+J:G=J}return G&&R.push(G),R},d.findAnnotationsAtIndex=function(y,S){var A=[];return y&&y.forEach(function(_){_.start<S&&S<=_.end&&A.push(_)}),A},d.findAnnotationsBetweenIndexes=function(y,S,A){var _=[];return y&&y.forEach(function(R){(S>=R.start&&S<R.end||A>R.start&&A<=R.end||R.start>=S&&R.end<A)&&_.push(R)}),_},d.shiftAnnotations=function(y,S,A){return y&&y.forEach(function(_){_.start<S&&_.end>=S?_.end+=A:_.start>=S&&(_.start+=A,_.end+=A)}),y},d.convertLineToPathData=function(y){y=d(y);var S=["M",y.attr("x1"),y.attr("y1"),"L",y.attr("x2"),y.attr("y2")].join(" ");return S},d.convertPolygonToPathData=function(y){var S=d.getPointsFromSvgNode(y);return S.length===0?null:d.svgPointsToPath(S)+" Z"},d.convertPolylineToPathData=function(y){var S=d.getPointsFromSvgNode(y);return S.length===0?null:d.svgPointsToPath(S)},d.svgPointsToPath=function(y){for(var S=0,A=y.length;S<A;S++)y[S]=y[S].x+" "+y[S].y;return"M "+y.join(" L")},d.getPointsFromSvgNode=function(y){y=d.toNode(y);var S=[],A=y.points;if(A)for(var _=0,R=A.numberOfItems;_<R;_++)S.push(A.getItem(_));return S},d.KAPPA=.551784,d.convertCircleToPathData=function(y){y=d(y);var S=parseFloat(y.attr("cx"))||0,A=parseFloat(y.attr("cy"))||0,_=parseFloat(y.attr("r")),R=_*d.KAPPA,G=["M",S,A-_,"C",S+R,A-_,S+_,A-R,S+_,A,"C",S+_,A+R,S+R,A+_,S,A+_,"C",S-R,A+_,S-_,A+R,S-_,A,"C",S-_,A-R,S-R,A-_,S,A-_,"Z"].join(" ");return G},d.convertEllipseToPathData=function(y){y=d(y);var S=parseFloat(y.attr("cx"))||0,A=parseFloat(y.attr("cy"))||0,_=parseFloat(y.attr("rx")),R=parseFloat(y.attr("ry"))||_,G=_*d.KAPPA,j=R*d.KAPPA,J=["M",S,A-R,"C",S+G,A-R,S+_,A-j,S+_,A,"C",S+_,A+j,S+G,A+R,S,A+R,"C",S-G,A+R,S-_,A+j,S-_,A,"C",S-_,A-j,S-G,A-R,S,A-R,"Z"].join(" ");return J},d.convertRectToPathData=function(y){return y=d(y),d.rectToPath({x:parseFloat(y.attr("x"))||0,y:parseFloat(y.attr("y"))||0,width:parseFloat(y.attr("width"))||0,height:parseFloat(y.attr("height"))||0,rx:parseFloat(y.attr("rx"))||0,ry:parseFloat(y.attr("ry"))||0})},d.rectToPath=function(y){var S,A=y.x,_=y.y,R=y.width,G=y.height,j=c(y.rx||y["top-rx"]||0,R/2),J=c(y.rx||y["bottom-rx"]||0,R/2),re=c(y.ry||y["top-ry"]||0,G/2),I=c(y.ry||y["bottom-ry"]||0,G/2);return j||J||re||I?S=["M",A,_+re,"v",G-re-I,"a",J,I,0,0,0,J,I,"h",R-2*J,"a",J,I,0,0,0,J,-I,"v",-(G-I-re),"a",j,re,0,0,0,-j,-re,"h",-(R-2*j),"a",j,re,0,0,0,-j,re,"Z"]:S=["M",A,_,"H",A+R,"V",_+G,"H",A,"V",_,"Z"],S.join(" ")},d.normalizePathData=function(){var y=`	
\v\f\r   ᠎             　\u2028\u2029`,S=new RegExp("([a-z])["+y+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+y+"]*,?["+y+"]*)+)","ig"),A=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+y+"]*,?["+y+"]*","ig"),_=Math,R=_.PI,G=_.sin,j=_.cos,J=_.tan,re=_.asin,I=_.sqrt,B=_.abs;function N(se,fe,he,me,pe,Ee){var Le=.3333333333333333,ke=2/3;return[Le*se+ke*he,Le*fe+ke*me,Le*pe+ke*he,Le*Ee+ke*me,pe,Ee]}function D(se,fe,he){var me=se*j(he)-fe*G(he),pe=se*G(he)+fe*j(he);return{x:me,y:pe}}function H(se,fe,he,me,pe,Ee,Le,ke,Be,Me){var le=R*120/180,we=R/180*(+pe||0),ie=[],z;if(Me)Ze=Me[0],je=Me[1],Mt=Me[2],xt=Me[3];else{z=D(se,fe,-we),se=z.x,fe=z.y,z=D(ke,Be,-we),ke=z.x,Be=z.y;var Z=(se-ke)/2,K=(fe-Be)/2,ye=Z*Z/(he*he)+K*K/(me*me);ye>1&&(ye=I(ye),he=ye*he,me=ye*me);var Re=he*he,De=me*me,sn=(Ee==Le?-1:1)*I(B((Re*De-Re*K*K-De*Z*Z)/(Re*K*K+De*Z*Z)));if(!Number.isFinite(sn))return[se,fe,ke,Be,ke,Be];var Mt=sn*he*K/me+(se+ke)/2,xt=sn*-me*Z/he+(fe+Be)/2,Ze=re(((fe-xt)/me).toFixed(9)),je=re(((Be-xt)/me).toFixed(9));Ze=se<Mt?R-Ze:Ze,je=ke<Mt?R-je:je,Ze<0&&(Ze=R*2+Ze),je<0&&(je=R*2+je),Le&&Ze>je&&(Ze=Ze-R*2),!Le&&je>Ze&&(je=je-R*2)}var Pt=je-Ze;if(B(Pt)>le){var ci=je,Ir=ke,Rr=Be;je=Ze+le*(Le&&je>Ze?1:-1),ke=Mt+he*j(je),Be=xt+me*G(je),ie=H(ke,Be,he,me,pe,0,Le,Ir,Rr,[je,ci,Mt,xt])}Pt=je-Ze;var El=j(Ze),yo=G(Ze),xo=j(je),Al=G(je),fi=J(Pt/4),hi=4/3*(he*fi),di=4/3*(me*fi),pi=[se,fe],Mn=[se+hi*yo,fe-di*El],Hn=[ke+hi*Al,Be-di*xo],Wn=[ke,Be];if(Mn[0]=2*pi[0]-Mn[0],Mn[1]=2*pi[1]-Mn[1],Me)return[Mn,Hn,Wn].concat(ie);ie=[Mn,Hn,Wn].concat(ie).join().split(",");for(var os=[],wo=ie.length,xn=0;xn<wo;xn++)os[xn]=xn%2?D(ie[xn-1],ie[xn],we).y:D(ie[xn],ie[xn+1],we).x;return os}function k(se){if(!se)return null;var fe={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},he=[];return String(se).replace(S,function(me,pe,Ee){var Le=[],ke=pe.toLowerCase();for(Ee.replace(A,function(Be,Me){Me&&Le.push(+Me)}),ke==="m"&&Le.length>2&&(he.push([pe].concat(Le.splice(0,2))),ke="l",pe=pe==="m"?"l":"L");Le.length>=fe[ke]&&(he.push([pe].concat(Le.splice(0,fe[ke]))),!!fe[ke]););}),he}function q(se){if((!Array.isArray(se)||!Array.isArray(se&&se[0]))&&(se=k(se)),!se||!se.length)return[["M",0,0]];for(var fe=[],he=0,me=0,pe=0,Ee=0,Le=0,ke,Be=se.length,Me=Le;Me<Be;Me++){var le=[];fe.push(le);var we=se[Me];if(ke=we[0],ke!=ke.toUpperCase()){le[0]=ke.toUpperCase();var ie,z;switch(le[0]){case"A":le[1]=we[1],le[2]=we[2],le[3]=we[3],le[4]=we[4],le[5]=we[5],le[6]=+we[6]+he,le[7]=+we[7]+me;break;case"V":le[1]=+we[1]+me;break;case"H":le[1]=+we[1]+he;break;case"M":for(pe=+we[1]+he,Ee=+we[2]+me,ie=we.length,z=1;z<ie;z++)le[z]=+we[z]+(z%2?he:me);break;default:for(ie=we.length,z=1;z<ie;z++)le[z]=+we[z]+(z%2?he:me);break}}else for(var Z=we.length,K=0;K<Z;K++)le[K]=we[K];switch(le[0]){case"Z":he=+pe,me=+Ee;break;case"H":he=le[1];break;case"V":me=le[1];break;case"M":pe=le[le.length-2],Ee=le[le.length-1],he=le[le.length-2],me=le[le.length-1];break;default:he=le[le.length-2],me=le[le.length-1];break}}return fe}function xe(se){var fe=q(se),he={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function me(ie,z,Z){var K,ye;if(!ie)return["C",z.x,z.y,z.x,z.y,z.x,z.y];switch(ie[0]in{T:1,Q:1}||(z.qx=null,z.qy=null),ie[0]){case"M":z.X=ie[1],z.Y=ie[2];break;case"A":parseFloat(ie[1])===0||parseFloat(ie[2])===0?ie=["L",ie[6],ie[7]]:ie=["C"].concat(H.apply(0,[z.x,z.y].concat(ie.slice(1))));break;case"S":Z==="C"||Z==="S"?(K=z.x*2-z.bx,ye=z.y*2-z.by):(K=z.x,ye=z.y),ie=["C",K,ye].concat(ie.slice(1));break;case"T":Z==="Q"||Z==="T"?(z.qx=z.x*2-z.qx,z.qy=z.y*2-z.qy):(z.qx=z.x,z.qy=z.y),ie=["C"].concat(N(z.x,z.y,z.qx,z.qy,ie[1],ie[2]));break;case"Q":z.qx=ie[1],z.qy=ie[2],ie=["C"].concat(N(z.x,z.y,ie[1],ie[2],ie[3],ie[4]));break;case"H":ie=["L"].concat(ie[1],z.y);break;case"V":ie=["L"].concat(z.x,ie[1]);break}return ie}function pe(ie,z){if(ie[z].length>7){ie[z].shift();for(var Z=ie[z];Z.length;)Ee[z]="A",ie.splice(z++,0,["C"].concat(Z.splice(0,6)));ie.splice(z,1),Be=fe.length}}for(var Ee=[],Le="",ke="",Be=fe.length,Me=0;Me<Be;Me++){fe[Me]&&(Le=fe[Me][0]),Le!=="C"&&(Ee[Me]=Le,Me>0&&(ke=Ee[Me-1])),fe[Me]=me(fe[Me],he,ke),Ee[Me]!=="A"&&Le==="C"&&(Ee[Me]="C"),pe(fe,Me);var le=fe[Me],we=le.length;he.x=le[we-2],he.y=le[we-1],he.bx=parseFloat(le[we-4])||he.x,he.by=parseFloat(le[we-3])||he.y}return(!fe[0][0]||fe[0][0]!=="M")&&fe.unshift(["M",0,0]),fe}return function(se){return xe(se).join(",").split(",").join(" ")}}(),d.namespace=t,d.g=u1,d}(),to="[object Arguments]",Oc="[object Array]",cl="[object Boolean]",of="[object Date]",lm="[object Error]",c1="[object Function]",lo="[object Map]",fl="[object Number]",f1="[object Null]",ji="[object Object]",af="[object RegExp]",uo="[object Set]",hl="[object String]",dl="[object Symbol]",h1="[object Undefined]",d1="[object WeakMap]",lf="[object ArrayBuffer]",uf="[object DataView]",um="[object Float32Array]",cm="[object Float64Array]",fm="[object Int8Array]",hm="[object Int16Array]",dm="[object Int32Array]",pm="[object Uint8Array]",gm="[object Uint8ClampedArray]",mm="[object Uint16Array]",vm="[object Uint32Array]",p1={[to]:!0,[Oc]:!0,[lf]:!0,[uf]:!0,[cl]:!0,[of]:!0,[um]:!0,[cm]:!0,[fm]:!0,[hm]:!0,[dm]:!0,[lo]:!0,[fl]:!0,[ji]:!0,[af]:!0,[uo]:!0,[hl]:!0,[dl]:!0,[pm]:!0,[gm]:!0,[mm]:!0,[vm]:!0,[lm]:!1,[c1]:!1,[d1]:!1},cf="\\ud800-\\udfff",g1="\\u0300-\\u036f",m1="\\ufe20-\\ufe2f",v1="\\u20d0-\\u20ff",y1="\\u1ab0-\\u1aff",x1="\\u1dc0-\\u1dff",w1=g1+m1+v1+y1+x1,ym="\\u2700-\\u27bf",xm="a-z\\xdf-\\xf6\\xf8-\\xff",S1="\\xac\\xb1\\xd7\\xf7",E1="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",A1="\\u2000-\\u206f",b1=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",wm="A-Z\\xc0-\\xd6\\xd8-\\xde",P1="\\ufe0e\\ufe0f",Sm=S1+E1+A1+b1,Em="['’]",Mp=`[${Sm}]`,ff=`[${w1}]`,Am="\\d",T1=`[${ym}]`,bm=`[${xm}]`,Pm=`[^${cf}${Sm+Am+ym+xm+wm}]`,Ic="\\ud83c[\\udffb-\\udfff]",C1=`(?:${ff}|${Ic})`,Tm=`[^${cf}]`,hf="(?:\\ud83c[\\udde6-\\uddff]){2}",df="[\\ud800-\\udbff][\\udc00-\\udfff]",$i=`[${wm}]`,_1="\\u200d",Np=`(?:${bm}|${Pm})`,k1=`(?:${$i}|${Pm})`,Op=`(?:${Em}(?:d|ll|m|re|s|t|ve))?`,Ip=`(?:${Em}(?:D|LL|M|RE|S|T|VE))?`,Cm=`${C1}?`,_m=`[${P1}]?`,L1=`(?:${_1}(?:${[Tm,hf,df].join("|")})${_m+Cm})*`,M1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",N1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",km=_m+Cm+L1,O1=`(?:${[T1,hf,df].join("|")})${km}`,I1=RegExp([`${$i}?${bm}+${Op}(?=${[Mp,$i,"$"].join("|")})`,`${k1}+${Ip}(?=${[Mp,$i+Np,"$"].join("|")})`,`${$i}?${Np}+${Op}`,`${$i}+${Ip}`,N1,M1,`${Am}+`,O1].join("|"),"g"),pf=200,Rc="__hash_undefined__",R1=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,F1=`[${cf}]`,D1=`${Tm}${ff}?`,B1=`(?:${[D1,ff,hf,df,F1].join("|")})`,Lm=RegExp(`${Ic}(?=${Ic})|${B1+km}`,"g"),z1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V1=/^\w*$/,U1=46,G1=/\\(\\)?/g,$1=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),H1=/^(?:0|[1-9]\d*)$/,W1=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),j1=4294967294,q1=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Mm=e=>Lm.test(e),Y1=e=>e.match(Lm)||[],X1=e=>e.split(""),Nm=e=>Mm(e)?Y1(e):X1(e),Z1=e=>e==null?[]:co(e).map(t=>e[t]),co=e=>yn(e)?Om(e):Object.keys(Object(e)),Q1=e=>{if(!pl(e))return Object.keys(e);var t=[];for(var n in Object(e))hasOwnProperty.call(e,n)&&n!="constructor"&&t.push(n);return t},Om=(e,t)=>{const n=Array.isArray(e),r=!n&&Ln(e)&&vn(e)===to,s=!n&&!r&&ho(e),a=n||r||s,l=e.length,c=new Array(a?l:0);let f=a?-1:l;for(;++f<l;)c[f]=`${f}`;for(const p in e)(t||hasOwnProperty.call(e,p))&&!(a&&(p==="length"||xf(p,l)))&&c.push(p);return c},Ia=(e,t)=>{let{length:n}=e;for(;n--;)if(is(e[n][0],t))return n;return-1},is=(e,t)=>e===t||e!==e&&t!==t,Ln=e=>e!=null&&typeof e=="object",Ka=(e,t,n)=>{if(!$e(n))return!1;const r=typeof t;return(r=="number"?yn(n)&&t>-1&&t<n.length:r=="string"&&t in n)?is(n[t],e):!1},K1=e=>Ln(e)&&vn(e)==uo,J1=e=>Ln(e)&&vn(e)==lo,pl=e=>{const t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Object.prototype;return e===n},ss=(e,t,n)=>{const r=e[t];(!(hasOwnProperty.call(e,t)&&is(r,n))||n===void 0&&!(t in e))&&(e[t]=n)},fo=(e,t,n)=>{let r=-1;const s=t.length;for(;++r<s;){const a=t[r];ss(n,a,e[a])}return n},yn=e=>e!=null&&typeof e!="function"&&typeof e.length=="number"&&e.length>-1&&e.length%1===0,Ji=e=>typeof e=="symbol"||Ln(e)&&vn(e)===dl,ex=e=>{const t=e.length;let n=new e.constructor(t);return t&&typeof e[0]=="string"&&hasOwnProperty.call(e,"index")&&(n.index=e.index,n.input=e.input),n},gf=(e,t)=>{let n=-1;const r=e.length;for(t||(t=new Array(r));++n<r;)t[n]=e[n];return t},vn=e=>e==null?e===void 0?h1:f1:Object.prototype.toString.call(e),mf=e=>{const t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t},Im=(e,t)=>{const n=t?mf(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},tx=e=>{const t=new e.constructor(e.source,/\w*$/.exec(e));return t.lastIndex=e.lastIndex,t},Rm=e=>typeof e.constructor=="function"&&!pl(e)?Object.create(Object.getPrototypeOf(e)):{},vf=e=>e==null?[]:(e=Object(e),Object.getOwnPropertySymbols(e).filter(n=>propertyIsEnumerable.call(e,n))),nx=(e,t)=>fo(e,vf(e),t);function rx(e,t){const n=t?mf(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}const ix=(e,t,n)=>{const r=e.constructor;switch(t){case lf:return mf(e);case cl:case of:return new r(+e);case uf:return rx(e,n);case um:case cm:case fm:case hm:case dm:case pm:case gm:case mm:case vm:return Im(e,n);case lo:return new r(e);case fl:case hl:return new r(e);case af:return tx(e);case uo:return new r;case dl:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(e)):{}}},ho=e=>Ln(e)&&R1.test(vn(e)),Fc=e=>{const t=Object.keys(e);return!Array.isArray(e)&&e!=null&&t.push(...vf(Object(e))),t},Fm=e=>{const t=[];for(;e;)t.push(...vf(e)),e=Object.getPrototypeOf(Object(e));return t},Dm=e=>{const t=[];for(const n in e)t.push(n);return Array.isArray(e)||t.push(...Fm(e)),t},Ra=({__data__:e},t)=>{const n=e;return mx(t)?n[typeof t=="string"?"string":"hash"]:n.map},sx=(e,t,n,r)=>{const s=Fc(e),a=s.length,c=Fc(t).length;if(a!=c)return!1;let f,p=a;for(;p--;)if(f=s[p],!hasOwnProperty.call(t,f))return!1;const g=r.get(e),d=r.get(t);if(g&&d)return g==t&&d==e;let x=!0;r.set(e,t),r.set(t,e);let w;for(;++p<a;){f=s[p];const E=e[f],T=t[f];if(!(E===T||n(E,T,r))){x=!1;break}w||(w=f=="constructor")}if(x&&!w){const E=e.constructor,T=t.constructor;E!=T&&"constructor"in e&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof T=="function"&&T instanceof T)&&(x=!1)}return r.delete(e),r.delete(t),x},gl=(e,t,n)=>e===t?!0:e==null||t==null||!Ln(e)&&!Ln(t)?e!==e&&t!==t:ox(e,t,gl,n),ox=(e,t,n,r)=>{let s=Array.isArray(e);const a=Array.isArray(t);let l=s?Oc:vn(e),c=a?Oc:vn(t);l=l==to?ji:l,c=c==to?ji:c;let f=l==ji;const p=c==ji,g=l==c;if(g&&!f)return r||(r=new Yi),s||ho(e)?Bm(e,t,!1,n,r):ux(e,t,l,n,r);const d=f&&hasOwnProperty.call(e,"__wrapped__"),x=p&&hasOwnProperty.call(t,"__wrapped__");if(d||x){const w=d?e.value():e,E=x?t.value():t;return r||(r=new Yi),n(w,E,r)}return g?(r||(r=new Yi),sx(e,t,n,r)):!1},Bm=(e,t,n,r,s)=>{const a=e.length,l=t.length;if(a!=l)return!1;const c=s.get(e),f=s.get(t);if(c&&f)return c==t&&f==e;let p=-1,g=!0;const d=n?new ro:void 0;for(s.set(e,t),s.set(t,e);++p<a;){const x=e[p],w=t[p];if(d){if(!ax(t,(E,T)=>{if(!lx(d,T)&&(x===E||r(x,E,s)))return d.push(T)})){g=!1;break}}else if(!(x===w||r(x,w,s))){g=!1;break}}return s.delete(e),s.delete(t),g},ax=(e,t)=>{let n=-1;const r=e==null?0:e.length;for(;++n<r;)if(t(e[n],n,e))return!0;return!1},lx=(e,t)=>e.has(t),Rp=(e,t,n,r)=>!(e.byteLength!=t.byteLength||!n(new Uint8Array(e),new Uint8Array(t),r)),ux=(e,t,n,r,s)=>{switch(n){case uf:return e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset?!1:(e=e.buffer,t=t.buffer,Rp(e,t,r,s));case lf:return Rp(e,t,r,s);case cl:case of:case fl:return is(+e,+t);case lm:return e.name==t.name&&e.message==t.message;case af:case hl:return e==`${t}`;case lo:var a=zm;case uo:if(a||(a=ml),e.size!=t.size)return!1;const l=s.get(e);if(l)return l==t;s.set(e,t);const c=Bm(a(e),a(t),!0,r,s);return s.delete(e),c;case dl:return Symbol.prototype.valueOf.call(e)==Symbol.prototype.valueOf.call(t)}return!1},zm=e=>{let t=-1,n=Array(e.size);return e.forEach((r,s)=>{n[++t]=[s,r]}),n},ml=e=>{let t=-1;const n=new Array(e.size);return e.forEach(r=>{n[++t]=r}),n},yf=(e,t)=>{if(Array.isArray(e))return!1;const n=typeof e;return n==="number"||n==="boolean"||e==null||Ji(e)?!0:V1.test(e)||!z1.test(e)||t!=null&&e in Object(t)},cx=e=>{const t=[];return e.charCodeAt(0)===U1&&t.push(""),e.replace($1,(n,r,s,a)=>{let l=n;s?l=a.replace(G1,"$1"):r&&(l=r.trim()),t.push(l)}),t},Lr=(e,t)=>Array.isArray(e)?e:yf(e,t)?[e]:cx(`${e}`),po=(e,t)=>{t=Lr(t,e);let n=0;const r=t.length;for(;e!=null&&n<r;)e=e[Mr(t[n])],n++;return n&&n==r?e:void 0};function fx(e,t){if(e!==t){const n=e!==void 0,r=e===null,s=e===e,a=Ji(e),l=t!==void 0,c=t===null,f=t===t,p=Ji(t);if(!c&&!p&&!a&&e>t||a&&l&&f&&!c&&!p||r&&l&&f||!n&&f||!s)return 1;if(!r&&!a&&!p&&e<t||p&&n&&s&&!r&&!a||c&&n&&s||!l&&s||!f)return-1}return 0}function hx(e,t,n){let r=-1;const s=e.criteria,a=t.criteria,l=s.length,c=n.length;for(;++r<l;){const f=r<c?n[r]:null,g=(f&&typeof f=="function"?f:fx)(s[r],a[r]);if(g)return f&&typeof f!="function"?g*(f=="desc"?-1:1):g}return e.index-t.index}const Vm=(e,t)=>{let n=(l,c)=>!!(l==null?0:l.length)&&l.indexOf(c)>-1,r=!0;const s=[],a=t.length;if(!e.length)return s;t.length>=pf&&(n=(l,c)=>l.has(c),r=!1,t=new ro(t));e:for(let l in e){let c=e[l];const f=c;if(c=c!==0?c:0,r&&f===f){let p=a;for(;p--;)if(t[p]===f)continue e;s.push(c)}else n(t,f)||s.push(c)}return s},Mr=e=>{if(typeof e=="string"||Ji(e))return e;const t=`${e}`;return t=="0"&&1/e==-1/0?"-0":t},ti=(e,t=!1,n=!1,r=!0,s,a,l,c)=>{let f;if(s&&(f=l?s(e,a,l,c):s(e)),f!==void 0)return f;if(!$e(e))return e;const p=Array.isArray(e),g=vn(e);if(p){if(f=ex(e),!t)return gf(e,f)}else{const E=typeof e=="function";if(g===ji||g===to||E&&!l){if(f=n||E?{}:Rm(e),!t)return n?dx(e,fo(e,Object.keys(e),f)):nx(e,Object.assign(f,e))}else{if(E||!p1[g])return l?e:{};f=ix(e,g,t)}}c||(c=new Yi);const d=c.get(e);if(d)return d;if(c.set(e,f),J1(e))return e.forEach((E,T)=>{f.set(T,ti(E,t,n,r,s,T,e,c))}),f;if(K1(e))return e.forEach(E=>{f.add(ti(E,t,n,r,s,E,e,c))}),f;if(ho(e))return f;const w=p?void 0:(r?n?Dm:Fc:n?Gm:co)(e);return(w||e).forEach((E,T)=>{w&&(T=E,E=e[T]),ss(f,T,ti(E,t,n,r,s,T,e,c))}),f},dx=(e,t)=>fo(e,Fm(e),t),Um=(e,t)=>t.length<2?e:po(e,t.slice(0,-1)),px=(e,t,n)=>{if(!$e(e))return e;t=Lr(t,e);const r=t.length,s=r-1;let a=-1,l=e;for(;l!=null&&++a<r;){const c=Mr(t[a]);let f=n;if(a!=s){const p=l[c];f=void 0,f===void 0&&(f=$e(p)?p:xf(t[a+1])?[]:{})}ss(l,c,f),l=l[c]}return e},xf=(e,t)=>{const n=typeof e;return t=t??Number.MAX_SAFE_INTEGER,!!t&&(n==="number"||n!=="symbol"&&H1.test(e))&&e>-1&&e%1==0&&e<t},gx=(e,t)=>{t=Lr(t,e),e=Um(e,t);const n=t[t.length-1];return e==null||delete e[Mr(n)]},mx=e=>{const t=typeof e;return t==="string"||t==="number"||t==="symbol"||t==="boolean"?e!=="__proto__":e===null},Gm=e=>{const t=[];for(const n in e)t.push(n);return t},vx=e=>{e=Object(e);const t={};for(const n in e)t[n]=e[n];return t},Fp=(e,t)=>{if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]};function $m(e,t=!1){return(n,...r)=>{let s=-1,a=r.length,l=a>1?r[a-1]:void 0;const c=a>2?r[2]:void 0;for(l=e.length>3&&typeof l=="function"?(a--,l):t?(f,p)=>{if(Array.isArray(f)&&!Array.isArray(p))return p}:void 0,c&&Ka(r[0],r[1],c)&&(l=a<3?void 0:l,a=1),n=Object(n);++s<a;){const f=r[s];f&&e(n,f,s,l)}return n}}const wf=(e,t,n,r,s)=>{e!==t&&zn(t,(a,l)=>{if($e(a))s||(s=new Yi),yx(e,t,l,n,wf,r,s);else{let c=r?r(e[l],a,`${l}`,e,t,s):void 0;c===void 0&&(c=a),Dc(e,l,c)}})},yx=(e,t,n,r,s,a,l)=>{const c=Fp(e,n),f=Fp(t,n),p=l.get(f);if(p){Dc(e,n,p);return}let g=a?a(c,f,`${n}`,e,t,l):void 0,d=g===void 0;if(d){const x=Array.isArray(f),w=!x&&ho(f);g=f,x||w?Array.isArray(c)?g=c:Ln(c)&&yn(c)?g=gf(c):w?(d=!1,g=Im(f,!0)):g=[]:ct(f)||no(f)?(g=c,no(c)?g=vx(c):(typeof c=="function"||!$e(c))&&(g=Rm(f))):d=!1}d&&(l.set(f,g),s(g,f,r,a,l),l.delete(f)),Dc(e,n,g)},Dc=(e,t,n)=>{(n!==void 0&&!is(e[t],n)||n===void 0&&!(t in e))&&ss(e,t,n)};function xx(e,t,n){const r=Object(e),s=n(e);let{length:a}=s,l=-1;for(;a--;){const c=s[++l];if(t(r[c],c,r)===!1)break}return e}const wx=(e,t)=>e&&xx(e,t,co),Sf=(e,t)=>{if(e==null)return e;if(!yn(e))return wx(e,t);const n=e.length,r=Object(e);let s=-1;for(;++s<n&&t(r[s],s,r)!==!1;);return e};function Sx(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}const Ex=Set&&1/ml(new Set([void 0,-0]))[1]==1/0?e=>new Set(e):()=>{};function Hm(e,t,n,r,s,a){return $e(e)&&$e(t)&&(a.set(t,e),wf(e,t,void 0,Hm,a),a.delete(t)),e}function Ax(e,t,n){t.length?t=t.map(l=>Array.isArray(l)?c=>po(c,l.length===1?l[0]:l):l):t=[l=>l];let r=-1,s=-1;const a=yn(e)?new Array(e.length):[];return Sf(e,l=>{const c=t.map(f=>f(l));a[++s]={criteria:c,index:++r,value:l}}),bx(a,(l,c)=>hx(l,c,n))}function bx(e,t){let{length:n}=e;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Wm(e){return e===e&&!$e(e)}function jm(e,t){return n=>n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}function qm(e,t){return e!=null&&Vx(e,t,zx)}function Px(e,t){return yf(e)&&Wm(t)?jm(Mr(e),t):n=>{const r=po(n,e);return r===void 0&&r===t?qm(n,e):gl(t,r)}}function Ym(e){const t=Tx(e);return t.length===1&&t[0][2]?jm(t[0][0],t[0][1]):n=>n===e||Cx(n,e,t)}function Tx(e){const t=co(e);let n=t.length;for(;n--;){const r=t[n],s=e[r];t[n]=[r,s,Wm(s)]}return t}function Cx(e,t,n,r){let s=n.length;const a=s;if(e==null)return!a;let l;for(e=Object(e);s--;)if(l=n[s],l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1;for(;++s<a;){l=n[s];const c=l[0],f=e[c],p=l[1];if(l[2]){if(f===void 0&&!(c in e))return!1}else{const g=new Yi;if(!gl(p,f,g))return!1}}return!0}function _x(e){return yf(e)?kx(Mr(e)):Lx(e)}function kx(e){return t=>t==null?void 0:t[e]}function Lx(e){return t=>po(t,e)}function Mx(e){return typeof e=="function"?e:e==null?t=>t:typeof e=="object"?Array.isArray(e)?Px(e[0],e[1]):Ym(e):_x(e)}function vl(){const e=Mx;return arguments.length?e(arguments[0]):e}const Nx=(e,t,n,r)=>{let s=-1;const a=e==null?0:e.length;for(r&&a&&(n=e[++s]);++s<a;)n=t(n,e[s],s,e);return n},Ox=(e,t,n,r,s)=>(s(e,(a,l,c)=>{n=r?(r=!1,a):t(n,a,l,c)}),n);function Ix(e,t,n){const r=Array.isArray(e)?Nx:Ox,s=arguments.length<3;return r(e,t,n,s,Sf)}const Rx=e=>Array.isArray(e)||no(e)||!!(e&&e[Symbol.isConcatSpreadable]);function Xm(e,t,n,r,s){let a=-1;const l=e.length;for(n||(n=Rx),s||(s=[]);++a<l;){var c=e[a];t>0&&n(c)?t>1?Xm(c,t-1,n,r,s):s.push(...c):s[s.length]=c}return s}const no=e=>Ln(e)&&vn(e)=="[object Arguments]",Fx=(e,t)=>Dx(e,t,(n,r)=>qm(e,r)),Dx=(e,t,n)=>{let r=-1;const s=t.length,a={};for(;++r<s;){const l=t[r],c=po(e,l);n(c,l)&&px(a,Lr(l,e),c)}return a},Bx=e=>typeof e=="number"&&e>-1&&e%1==0&&e<=Number.MAX_SAFE_INTEGER,zx=(e,t)=>e!=null&&t in Object(e),Vx=(e,t,n)=>{t=Lr(t,e);for(var r=-1,s=t.length,a=!1;++r<s;){var l=Mr(t[r]);if(!(a=e!=null&&n(e,l)))break;e=e[l]}return a||++r!=s?a:(s=e==null?0:e.length,!!s&&Bx(s)&&xf(l,s)&&(Array.isArray(e)||no(e)))},Ux=e=>e.match(q1),Gx=e=>e.match(I1),$x=(e,t)=>(W1(e)?Gx(e):Ux(e))||[],Hx=(e,t,n)=>{const{length:r}=e;return n=n===void 0?r:n,!t&&n>=r?e:e.slice(t,n)},Wx=jx("toUpperCase");function jx(e){return t=>{if(!t)return"";const n=Mm(t)?Nm(t):void 0,r=n?n[0]:t[0],s=n?Hx(n,1).join(""):t.slice(1);return r[e]()+s}}function qx(e){return Ym(ti(e,!0))}class Yi{constructor(t){const n=this.__data__=new mc(t);this.size=n.size}clear(){this.__data__=new mc,this.size=0}delete(t){const n=this.__data__,r=n.delete(t);return this.size=n.size,r}get(t){return this.__data__.get(t)}has(t){return this.__data__.has(t)}set(t,n){let r=this.__data__;if(r instanceof mc){const s=r.__data__;if(s.length<pf-1)return s.push([t,n]),this.size=++r.size,this;r=this.__data__=new Zm(s)}return r.set(t,n),this.size=r.size,this}}class mc{constructor(t){let n=-1;const r=t==null?0:t.length;for(this.clear();++n<r;){const s=t[n];this.set(s[0],s[1])}}clear(){this.__data__=[],this.size=0}delete(t){const n=this.__data__,r=Ia(n,t);if(r<0)return!1;const s=n.length-1;return r==s?n.pop():n.splice(r,1),--this.size,!0}get(t){const n=this.__data__,r=Ia(n,t);return r<0?void 0:n[r][1]}has(t){return Ia(this.__data__,t)>-1}set(t,n){const r=this.__data__,s=Ia(r,t);return s<0?(++this.size,r.push([t,n])):r[s][1]=n,this}}class Zm{constructor(t){let n=-1;const r=t==null?0:t.length;for(this.clear();++n<r;){const s=t[n];this.set(s[0],s[1])}}clear(){this.size=0,this.__data__={hash:new Dp,map:new Map,string:new Dp}}delete(t){const n=Ra(this,t).delete(t);return this.size-=n?1:0,n}get(t){return Ra(this,t).get(t)}has(t){return Ra(this,t).has(t)}set(t,n){const r=Ra(this,t),s=r.size;return r.set(t,n),this.size+=r.size==s?0:1,this}}class Dp{constructor(t){let n=-1;const r=t==null?0:t.length;for(this.clear();++n<r;){const s=t[n];this.set(s[0],s[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(t){const n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}get(t){const r=this.__data__[t];return r===Rc?void 0:r}has(t){return this.__data__[t]!==void 0}set(t,n){const r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n===void 0?Rc:n,this}}class ro{constructor(t){let n=-1;const r=t==null?0:t.length;for(this.__data__=new Zm;++n<r;)this.add(t[n])}add(t){return this.__data__.set(t,Rc),this}has(t){return this.__data__.has(t)}}ro.prototype.push=ro.prototype.add;const Yx=function(e){var t=Object.prototype.toString;return e===!0||e===!1||!!e&&typeof e=="object"&&t.call(e)===cl},$e=function(e){return!!e&&(typeof e=="object"||typeof e=="function")},Rt=function(e){var t=Object.prototype.toString;return typeof e=="number"||!!e&&typeof e=="object"&&t.call(e)===fl},ft=function(e){var t=Object.prototype.toString;return typeof e=="string"||!!e&&typeof e=="object"&&t.call(e)===hl},Se=$m((e,t)=>{if(pl(t)||yn(t)){fo(t,co(t),e);return}for(var n in t)hasOwnProperty.call(t,n)&&ss(e,n,t[n])}),Xx=(e,...t)=>{let n=-1,r=t.length;const s=r>2?t[2]:void 0;for(s&&Ka(t[0],t[1],s)&&(r=1);++n<r;){const a=t[n];if(a==null)continue;const l=Object.keys(a),c=l.length;let f=-1;for(;++f<c;){const p=l[f],g=e[p];(g===void 0||is(g,Object.prototype[p])&&!hasOwnProperty.call(e,p))&&(e[p]=a[p])}}return e},nn=Xx,Zx=function(...t){return t.push(void 0,Hm),gt.apply(void 0,t)},Ef=Zx,Vn=(e,t,...n)=>{let r=-1;const s=typeof t=="function",a=yn(e)?new Array(e.length):[];return Sf(e,l=>{a[++r]=s?t.apply(l,n):Qx(l,t,...n)}),a},Qx=(e,t,...n)=>{t=Lr(t,e),e=Um(e,t);const r=e==null?e:e[Mr(Sx(t))];return r==null?void 0:r.apply(e,n)},Qm=(e,t,n)=>{let r=0,s=e==null?0:e.length;if(s==0)return 0;n=vl(n,2),t=n(t);const a=t!==t,l=t===null,c=Ji(t),f=t===void 0;for(;r<s;){let p;const g=Math.floor((r+s)/2),d=n(e[g]),x=d!==void 0,w=d===null,E=d===d,T=Ji(d);a?p=E:f?p=E&&x:l?p=E&&x&&!w:c?p=E&&x&&!w&&!T:w||T?p=!1:p=d<t,p?r=g+1:s=g}return Math.min(s,j1)},ri=(e,t)=>{let n=-1,r=(f,p)=>!!(f==null?0:f.length)&&f.indexOf(p)>-1;t=vl(t,2);let s=!0;const{length:a}=e,l=[];let c=l;if(a>=pf){const f=t?null:Ex(e);if(f)return ml(f);s=!1,r=(p,g)=>p.has(g),c=new ro}else c=t?[]:l;e:for(;++n<a;){let f=e[n];const p=t?t(f):f;if(f=f!==0?f:0,s&&p===p){let g=c.length;for(;g--;)if(c[g]===p)continue e;t&&c.push(p),l.push(f)}else r(c,p)||(c!==l&&c.push(p),l.push(f))}return l},Lt=e=>ti(e),tn=e=>ti(e,!0),rn=e=>{if(e==null)return!0;if(yn(e)&&(Array.isArray(e)||typeof e=="string"||typeof e.splice=="function"||ho(e)||no(e)))return!e.length;const t=vn(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(pl(e))return!Q1(e).length;for(const n in e)if(hasOwnProperty.call(e,n))return!1;return!0},_r=(e,t)=>gl(e,t),Xe=e=>typeof e=="function",ct=e=>{if(!Ln(e)||vn(e)!="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},He=e=>{if(!e)return[];if(yn(e))return ft(e)?Nm(e):gf(e);if(Symbol.iterator&&Symbol.iterator in Object(e)){const r=e[Symbol.iterator]();let s;const a=[];for(;!(s=r.next()).done;)a.push(s.value);return a}const t=vn(e);return(t==lo?zm:t==uo?ml:Z1)(e)};function Kx(e,t,n){if(typeof e!="function")throw new TypeError("Expected a function");let r,s,a,l,c,f,p=0,g=!1,d=!1,x=!0;const w=!t&&t!==0&&window&&typeof window.requestAnimationFrame=="function";t=+t||0,$e(n)&&(g=!!n.leading,d="maxWait"in n,a=d?Math.max(+n.maxWait||0,t):a,x="trailing"in n?!!n.trailing:x);function E(y){const S=r,A=s;return r=s=void 0,p=y,l=e.apply(A,S),l}function T(y,S){return w?(window.cancelAnimationFrame(c),window.requestAnimationFrame(y)):setTimeout(y,S)}function P(y){if(w)return window.cancelAnimationFrame(y);clearTimeout(y)}function C(y){return p=y,c=T(F,t),g?E(y):l}function L(y){const S=y-f,A=y-p,_=t-S;return d?Math.min(_,a-A):_}function M(y){const S=y-f,A=y-p;return f===void 0||S>=t||S<0||d&&A>=a}function F(){const y=Date.now();if(M(y))return $(y);c=T(F,L(y))}function $(y){return c=void 0,x&&r?E(y):(r=s=void 0,l)}function X(...y){const S=Date.now(),A=M(S);if(r=y,s=this,f=S,A){if(c===void 0)return C(f);if(d)return c=T(F,t),E(f)}return c===void 0&&(c=T(F,t)),l}return X.cancel=()=>{c!==void 0&&P(c),p=0,r=f=s=c=void 0},X.flush=()=>c===void 0?l:$(Date.now()),X.pending=()=>c!==void 0,X}const Jx=(e,t)=>(t=vl(t,2),Ix(e,(n,r,s)=>(s=t(r),hasOwnProperty.call(n,s)?n[s].push(r):ss(n,s,[r]),n),{})),$a=(e,t=[])=>{if(e==null)return[];const n=t.length;return n>1&&Ka(e,t[0],t[1])?t=[]:n>2&&Ka(t[0],t[1],t[2])&&(t=[t[0]]),Array.isArray(t)||(t=[vl(t,2)]),Ax(e,t.flat(1),[])},ew=e=>(e==null?0:e.length)?Xm(e,1/0):[],Bp=(e,...t)=>yn(e)?Vm(e,t):[],tw=(e,...t)=>Ln(e)&&yn(e)?Vm(e,t.flat(1)):[],Bc=(...e)=>{const t=e.flat(1);return ri(t)},Un=(e,t)=>{if(e==null)return!1;typeof t=="string"&&(t=t.split("."));let n=-1,r=e;for(;++n<t.length;){if(!r||!hasOwnProperty.call(r,t[n]))return!1;r=r[t[n]]}return!0},Ke=(e,t,n)=>{t=Lr(t,e);let r=-1,s=t.length;for(s||(s=1,e=void 0);++r<s;){let a=e==null?void 0:e[Mr(t[r])];a===void 0&&(r=s,a=n),e=typeof a=="function"?a.call(e):a}return e},go=(e,...t)=>{let n={};if(e==null)return n;let r=!1;t=t.flat(1).map(a=>(a=Lr(a,e),r||(r=a.length>1),a)),fo(e,Dm(e),n),r&&(n=ti(n,!0,!0,!0,a=>ct(a)?void 0:a));let s=t.length;for(;s--;)gx(n,t[s]);return n},nw=(e,...t)=>e==null?{}:Fx(e,t.flat(1/0)),zn=(e,t=n=>n)=>{let n=-1;const r=Object(e),s=yn(e)?Om(e,!0):Gm(e);let a=s.length;for(;a--;){const l=s[++n];if(t(r[l],l,r)===!1)break}},Km=(e="")=>$x(`${e}`.replace(/['\u2019]/g,"")).reduce((t,n,r)=>(n=n.toLowerCase(),t+(r?Wx(n):n)),"");let rw=0;const io=(e="")=>{const t=++rw;return`${e}`+t},gt=$m((e,t,n,r)=>{wf(e,t,n,r)},!0);class Jm{constructor(){this.map=new WeakMap}has(t,n){return n===void 0?this.map.has(t):n in this.map.get(t)}create(t){return this.has(t)||this.map.set(t,Object.create(null)),this.get(t)}get(t,n){if(!this.has(t))return;const r=this.map.get(t);return n===void 0?r:r[n]}set(t,n,r){if(n===void 0)return;const s=this.create(t);typeof n=="string"?s[n]=r:Object.assign(s,n)}remove(t,n){if(this.has(t))if(n===void 0)this.map.delete(t);else{const r=this.map.get(t);delete r[n]}}}const gn=new Jm,ev=new Jm,ii=function(e,t){if(!(this instanceof ii))return new ii(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Ha:Wa,this.target=e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Object.assign(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this.envelope=!0};ii.prototype={constructor:ii,isDefaultPrevented:Wa,isPropagationStopped:Wa,isImmediatePropagationStopped:Wa,preventDefault:function(){const e=this.originalEvent;this.isDefaultPrevented=Ha,e&&e.preventDefault()},stopPropagation:function(){const e=this.originalEvent;this.isPropagationStopped=Ha,e&&e.stopPropagation()},stopImmediatePropagation:function(){const e=this.originalEvent;this.isImmediatePropagationStopped=Ha,e&&e.stopImmediatePropagation(),this.stopPropagation()}};["altKey","bubbles","cancelable","changedTouches","ctrlKey","detail","eventPhase","metaKey","pageX","pageY","shiftKey","view","char","code","charCode","key","keyCode","button","buttons","clientX","clientY","offsetX","offsetY","pointerId","pointerType","screenX","screenY","targetTouches","toElement","touches","which"].forEach(e=>iw(e));function iw(e){Object.defineProperty(ii.prototype,e,{enumerable:!0,configurable:!0,get:function(){return this.originalEvent?this.originalEvent[e]:void 0},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})}function Ha(){return!0}function Wa(){return!1}const es=typeof window<"u"?window.document:null,sw=es&&es.documentElement,tv=/^([^.]*)(?:\.(.+)|)/,nv=/[^\x20\t\r\n\f]+/g,ce=function(e){return new ce.Dom(e)};ce.fn=ce.prototype={constructor:ce,length:0};ce.guid=1;ce.data=ev;ce.merge=function(e,t){let n=+t.length,r=e.length;for(let s=0;s<n;s++)e[r++]=t[s];return e.length=r,e};ce.parseHTML=function(e){const t=es.implementation.createHTMLDocument(),n=t.createElement("base");n.href=es.location.href,t.head.appendChild(n),t.body.innerHTML=e;const r=t.getElementsByTagName("script");for(let s=0;s<r.length;s++)r[s].remove();return Array.from(t.body.childNodes)};typeof Symbol=="function"&&(ce.fn[Symbol.iterator]=Array.prototype[Symbol.iterator]);ce.fn.toArray=function(){return Array.from(this)};ce.fn.pushStack=function(e){const t=ce.merge(this.constructor(),e);return t.prevObject=this,t};ce.fn.find=function(e){const[t]=this,n=this.pushStack([]);if(!t)return n;const{nodeType:r}=t;return r!==1&&r!==9&&r!==11||(typeof e!="string"?t!==e&&t.contains(e)&&ce.merge(n,[e]):ce.merge(n,t.querySelectorAll(e))),n};ce.fn.add=function(e,t){const n=ce(e).toArray(),r=this.toArray(),s=this.pushStack([]);return ce.merge(s,ri(r.concat(n))),s};ce.fn.addBack=function(){return this.add(this.prevObject)};ce.fn.filter=function(e){const t=[];for(let n=0;n<this.length;n++){const r=this[n];r.matches(e)&&t.push(r)}return this.pushStack(t)};const ow=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;function aw(e){return e[0]==="<"&&e[e.length-1]===">"&&e.length>=3}const rv=function(e){if(!e)return this;if(typeof e=="function")throw new Error("function not supported");if(arguments.length>1)throw new Error("selector with context not supported");if(e.nodeType)return this[0]=e,this.length=1,this;let t;if(aw(e+""))t=[null,e,null];else if(typeof e=="string")t=ow.exec(e);else return ce.merge(this,e);if(!t||!t[1])return lw.find(e);if(t[1])return ce.merge(this,ce.parseHTML(t[1])),this;const n=es.getElementById(t[2]);return n&&(this[0]=n,this.length=1),this};ce.Dom=rv;rv.prototype=ce.fn;ce.Event=ii;ce.event={special:Object.create(null)};ce.event.has=function(e,t){const n=gn.get(e,"events");return n?t?Array.isArray(n[t])&&n[t].length>0:!0:!1};ce.event.on=function(e,t,n,r,s,a){if(typeof t=="object"){typeof n!="string"&&(r=r||n,n=void 0);for(let l in t)ce.event.on(e,l,n,r,t[l],a);return e}if(r==null&&s==null?(s=n,r=n=void 0):s==null&&(typeof n=="string"?(s=r,r=void 0):(s=r,r=n,n=void 0)),!s)return e;if(a===1){const l=s;s=function(c){return ce().off(c),l.apply(this,arguments)},s.guid=l.guid||(l.guid=ce.guid++)}for(let l=0;l<e.length;l++)ce.event.add(e[l],t,s,r,n)};ce.event.add=function(e,t,n,r,s){if(typeof e!="object")return;const a=gn.create(e);let l;n.handler&&(l=n,n=l.handler,s=l.selector),s&&sw.matches(s),n.guid||(n.guid=ce.guid++);let c;(c=a.events)||(c=a.events=Object.create(null));let f;(f=a.handle)||(f=a.handle=function(d){return typeof ce<"u"?ce.event.dispatch.apply(e,arguments):void 0});const p=(t||"").match(nv)||[""];let g=p.length;for(;g--;){const[,d,x=""]=tv.exec(p[g]);if(!d)continue;const w=x.split(".").sort();let E=ce.event.special[d];const T=E&&(s?E.delegateType:E.bindType)||d;E=ce.event.special[T];const P=Object.assign({type:T,origType:d,data:r,handler:n,guid:n.guid,selector:s,namespace:w.join(".")},l);let C;(C=c[T])||(C=c[T]=[],C.delegateCount=0,(!E||!E.setup||E.setup.call(e,r,w,f)===!1)&&e.addEventListener&&e.addEventListener(T,f)),E&&E.add&&(E.add.call(e,P),P.handler.guid||(P.handler.guid=n.guid)),s?C.splice(C.delegateCount++,0,P):C.push(P)}};ce.event.remove=function(e,t,n,r,s){const a=gn.get(e);if(!a||!a.events)return;const l=a.events,c=(t||"").match(nv)||[""];let f=c.length;for(;f--;){const[,p,g=""]=tv.exec(c[f]);if(!p){for(const L in l)ce.event.remove(e,L+c[f],n,r,!0);continue}const d=ce.event.special[p],x=d&&(r?d.delegateType:d.bindType)||p,w=l[x];if(!w||w.length===0)continue;const E=g.split(".").sort(),T=g?new RegExp("(^|\\.)"+E.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,P=w.length;let C=P;for(;C--;){const L=w[C];(s||p===L.origType)&&(!n||n.guid===L.guid)&&(!T||T.test(L.namespace))&&(!r||r===L.selector||r==="**"&&L.selector)&&(w.splice(C,1),L.selector&&w.delegateCount--,d&&d.remove&&d.remove.call(e,L))}P&&w.length===0&&((!d||!d.teardown||d.teardown.call(e,E,a.handle)===!1)&&e.removeEventListener&&e.removeEventListener(x,a.handle),delete l[x])}rn(l)&&(gn.remove(e,"handle"),gn.remove(e,"events"))};ce.event.dispatch=function(e){const t=this,n=ce.event.fix(e);n.delegateTarget=t;const r=Array.from(arguments);r[0]=n;const s=gn.get(t,"events"),a=s&&s[n.type]||[],l=ce.event.special[n.type];if(l&&l.preDispatch&&l.preDispatch.call(t,n)===!1)return;const c=ce.event.handlers.call(t,n,a);let f=0,p;for(;(p=c[f++])&&!n.isPropagationStopped();){n.currentTarget=p.elem;let g=0,d;for(;(d=p.handlers[g++])&&!n.isImmediatePropagationStopped();){n.handleObj=d,n.data=d.data;const x=ce.event.special[d.origType];let w;x&&x.handle?w=x.handle:w=d.handler;const E=w.apply(p.elem,r);E!==void 0&&(n.result=E)===!1&&(n.preventDefault(),n.stopPropagation())}}return l&&l.postDispatch&&l.postDispatch.call(t,n),n.result};ce.event.handlers=function(e,t){const n=t.delegateCount,r=[];if(n&&!(e.type==="click"&&e.button>=1)){for(let s=e.target;s!==this;s=s.parentNode||this)if(s.nodeType===1&&!(e.type==="click"&&s.disabled===!0)){const a=[],l={};for(let c=0;c<n;c++){const f=t[c],p=f.selector+" ";l[p]===void 0&&(l[p]=s.matches(p)),l[p]&&a.push(f)}a.length&&r.push({elem:s,handlers:a})}}return n<t.length&&r.push({elem:this,handlers:t.slice(n)}),r};ce.event.fix=function(e){return e.envelope?e:new ii(e)};const lw=ce(es);function Af(e){let t=e.length;for(;t--;)iv(e[t])}function iv(e){ce.event.remove(e),gn.remove(e),ev.remove(e)}function sv(e){for(let t=0;t<e.length;t++){const n=e[t];n.parentNode&&n.parentNode.removeChild(n)}}function uw(){for(let e=0;e<this.length;e++){const t=this[e];iv(t),Af(t.getElementsByTagName("*"))}return sv(this),this}function cw(){return sv(this),this}function fw(){for(let e=0;e<this.length;e++){const t=this[e];t.nodeType===1&&(Af(t.getElementsByTagName("*")),t.textContent="")}return this}function hw(){const e=[];for(let t=0;t<this.length;t++)e.push(this[t].cloneNode(!0));return this.pushStack(e)}function dw(e){const[t]=this;if(!t)return null;if(arguments.length===0)return t.innerHTML;if(e===void 0)return this;if(Af(gn,t.getElementsByTagName("*")),typeof e=="string"||typeof e=="number")t.innerHTML=e;else return t.innerHTML="",this.append(e);return this}function pw(...e){const[t]=this;return t?(e.forEach(n=>{n&&(typeof n=="string"?t.append(...ce.parseHTML(n)):n.toString()==="[object Object]"?this.append(...Array.from(n)):Array.isArray(n)?this.append(...n):t.appendChild(n))}),this):this}function gw(...e){const[t]=this;return t?(e.forEach(n=>{n&&(typeof n=="string"?t.prepend(...ce.parseHTML(n)):n.toString()==="[object Object]"?this.prepend(...Array.from(n)):Array.isArray(n)?this.prepend(...n):t.insertBefore(n,t.firstChild))}),this):this}function mw(e){return ce(e).append(this),this}function vw(e){return ce(e).prepend(this),this}const ov={};["width","height","top","bottom","left","right","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","margin","marginTop","marginBottom","marginLeft","marginRight"].forEach(e=>{ov[e]=!0});function yw(e,t,n){typeof n=="number"&&ov[Km(t)]&&(n+="px"),e.style[t]=n}function xw(e,t){let n;if(typeof e=="string")if(t===void 0){const[r]=this;return r?r.style[e]:null}else n={[e]:t};else if(e)n=e;else throw new Error("no styles provided");for(let r in n)if(n.hasOwnProperty(r))for(let s=0;s<this.length;s++)yw(this[s],r,n[r]);return this}function ww(e,t){if(arguments.length<2){const[n]=this;return n?e===void 0?n.dataset:n.dataset[e]:null}for(let n=0;n<this.length;n++)this[n].dataset[e]=t;return this}function bf(e,t,n){for(let r=0;r<t.length;r++){const s=t[r];ne.prototype[e].apply({node:s},n)}}function Sw(){return bf("removeClass",this,arguments),this}function Ew(){return bf("addClass",this,arguments),this}function Aw(){return bf("toggleClass",this,arguments),this}function bw(){const[e]=this;return e?ne.prototype.hasClass.apply({node:e},arguments):!1}function Pw(e){const t=[];for(let n=0;n<this.length;n++){const r=this[n];let s=Array.from(r.children);typeof e=="string"&&(s=s.filter(a=>a.matches(e))),t.push(...s)}return this.pushStack(t)}function Tw(e){const t=[];for(let n=0;n<this.length;n++){const r=this[n];if(typeof e=="string"){const s=r.closest(e);s&&t.push(s)}else{const[s]=ce(e);s&&s.contains(r)&&t.push(s)}}return this.pushStack(t)}function Cw(e,t,n,r){return ce.event.on(this,e,t,n,r),this}function _w(e,t,n,r){return ce.event.on(this,e,t,n,r,1),this}function kw(e,t,n){if(e&&e.preventDefault&&e.handleObj){const r=e.handleObj;return ce(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this}if(typeof e=="object"){for(let r in e)this.off(r,t,e[r]);return this}(t===!1||typeof t=="function")&&(n=t,t=void 0);for(let r=0;r<this.length;r++)ce.event.remove(this[r],e,n,t);return this}function Lw(){const[e]=this;if(e===window)return e.document.documentElement.clientWidth;if(!e)return;const t=window.getComputedStyle(e),n=e.offsetWidth,r=parseFloat(t.borderTopWidth),s=parseFloat(t.borderBottomWidth),a=parseFloat(t.paddingTop),l=parseFloat(t.paddingBottom);return n-s-r-a-l}function Mw(){const[e]=this;if(e===window)return e.document.documentElement.clientHeight;if(!e)return;const t=window.getComputedStyle(e),n=e.offsetHeight,r=parseFloat(t.borderLeftWidth),s=parseFloat(t.borderRightWidth),a=parseFloat(t.paddingLeft),l=parseFloat(t.paddingRight);return n-r-s-a-l}function Nw(){const[e]=this;if(!e)return;let t=ce(e),n,r,s,a={top:0,left:0};if(t.css("position")==="fixed")r=e.getBoundingClientRect();else{r=t.offset(),s=e.ownerDocument,n=e.offsetParent||s.documentElement;const f=ce(n),p=f.css("position")||"static";for(;n&&(n===s.body||n===s.documentElement)&&p==="static";)n=n.parentNode;if(n&&n!==e&&n.nodeType===1){const g=window.getComputedStyle(n),d=parseFloat(g.borderTopWidth)||0,x=parseFloat(g.borderLeftWidth)||0;a=f.offset(),a.top+=d,a.left+=x}}const l=parseFloat(window.getComputedStyle(e).marginTop)||0,c=parseFloat(window.getComputedStyle(e).marginLeft)||0;return{top:r.top-a.top-l,left:r.left-a.left-c}}function Ow(e){const[t]=this;if(e===void 0){if(!t)return null;if(!t.getClientRects().length)return{top:0,left:0};const l=t.getBoundingClientRect();return{top:l.top+window.scrollY,left:l.left+window.scrollX}}if(!t)return this;const n=window.getComputedStyle(t);n.position==="static"&&this.css("position","relative");const r=this.offset(),s=e.top-r.top,a=e.left-r.left;return this.css({top:(parseFloat(n.top)||0)+s+"px",left:(parseFloat(n.left)||0)+a+"px"}),this}const Iw=Object.freeze(Object.defineProperty({__proto__:null,addClass:Ew,append:pw,appendTo:mw,children:Pw,clone:hw,closest:Tw,css:xw,data:ww,detach:cw,empty:fw,hasClass:bw,height:Mw,html:dw,off:kw,offset:Ow,on:Cw,one:_w,position:Nw,prepend:gw,prependTo:vw,remove:uw,removeClass:Sw,toggleClass:Aw,width:Lw},Symbol.toStringTag,{value:"Module"})),Ja="animationFrameId",Dn={};Dn["transition-property"]=Dn["transition-duration"]=Dn["transition-delay"]=Dn["transition-timing-function"]=Dn["animation-name"]=Dn["animation-duration"]=Dn["animation-delay"]=Dn["animation-timing-function"]="";function Rw(e,t={}){this.stop();for(let n=0;n<this.length;n++)Fw(this[n],e,t);return this}function Fw(e,t,n={}){let{duration:r=400,easing:s="ease-in-out",delay:a=0,complete:l}=n;const c=setTimeout(function(){const f=ce(e);let p=!1,g="transitionend";r=r/1e3,a=a/1e3;const d={};if(typeof t=="string")d["animation-name"]=t,d["animation-duration"]=r+"s",d["animation-delay"]=a+"s",d["animation-timing-function"]=s,g="animationend";else{const E=[];for(var x in t)t.hasOwnProperty(x)&&(d[x]=t[x],E.push(x));r>0&&(d["transition-property"]=E.join(", "),d["transition-duration"]=r+"s",d["transition-delay"]=a+"s",d["transition-timing-function"]=s)}const w=function(E){if(E){if(E.target!==E.currentTarget)return;E.target.removeEventListener(g,w)}else e.removeEventListener(g,w);p=!0,f.css(Dn),l&&l.call(e)};if(r>0){e.addEventListener(g,w);const E=setTimeout(function(){p||w(null)},(r+a)*1e3+25);gn.set(e,Ja,{id:E,stop:()=>{clearTimeout(E),e.removeEventListener(g,w)}})}f.css(d),r<=0&&w(null)});gn.set(e,Ja,{stop:()=>clearTimeout(c)})}function Dw(){for(let e=0;e<this.length;e++){const t=this[e],n=gn.get(t,Ja);n&&(n.stop(),gn.remove(t,Ja))}return this.css(Dn),this}const Bw=Object.freeze(Object.defineProperty({__proto__:null,animate:Rw,stop:Dw},Symbol.toStringTag,{value:"Module"})),zp={outerWidth:"offsetWidth",outerHeight:"offsetHeight",innerWidth:"clientWidth",innerHeight:"clientHeight",scrollLeft:"scrollLeft",scrollTop:"scrollTop",val:"value",text:"textContent"},Vp={disabled:"disabled",value:"value",text:"textContent"};function zw(e,t){if(!e)throw new Error("no property provided");if(arguments.length===1){const[n]=this;return n?n[e]:null}if(t===void 0)return this;for(let n=0;n<this.length;n++)this[n][e]=t;return this}function Vw(e,t){let n;if(typeof e=="string")if(t===void 0){const[r]=this;return r?r.getAttribute(e):null}else n={[e]:t};else if(e)n=e;else throw new Error("no attributes provided");for(let r in n)if(n.hasOwnProperty(r)){const s=n[r];if(Vp[r]){this.prop(Vp[r],s);continue}for(let a=0;a<this.length;a++)s===null?this[a].removeAttribute(r):this[a].setAttribute(r,s)}return this}const av={prop:zw,attr:Vw};Object.keys(zp).forEach(e=>{av[e]=function(...t){return this.prop(zp[e],...t)}});const Xi={useCSSSelectors:!1,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},yl=Object.create(null);yl.load={noBubble:!0};[["mouseenter","mouseover"],["mouseleave","mouseout"],["pointerenter","pointerover"],["pointerleave","pointerout"]].forEach(([e,t])=>{yl[e]={delegateType:t,bindType:t,handle:function(n){const r=this,s=n.relatedTarget,a=n.handleObj;let l;return(!s||!r.contains(s))&&(n.type=a.origType,l=a.handler.apply(r,arguments),n.type=t),l}}});const Uw=Xi.doubleTapInterval,Gw=30;yl.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(e,...t){const{handleObj:n,target:r}=e,s=ce.data.create(r),a=new Date().getTime(),l="lastTouch"in s?a-s.lastTouch:0;l<Uw&&l>Gw?(s.lastTouch=null,e.type=n.origType,n.handler.call(this,e,...t)):s.lastTouch=a}};Object.assign(ce.fn,Iw);Object.assign(ce.fn,Bw);Object.assign(ce.fn,av);Object.assign(ce.event.special,yl);const nr=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,Xi.classNamePrefix.length)!==Xi.classNamePrefix&&(t=Xi.classNamePrefix+t),t}).join(" ")},el=function(e,t){const n={},r={},s=ne.namespace.svg,a=t||s,l=document.createDocumentFragment(),c=function(f,p,g){for(let d=0;d<f.length;d++){const x=f[d];if(typeof x=="string"){const F=document.createTextNode(x);p.appendChild(F);continue}if(!x.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const w=x.tagName;let E;x.hasOwnProperty("namespaceURI")&&(g=x.namespaceURI),E=document.createElementNS(g,w);const T=g===s,P=T?ne(E):ce(E),C=x.attributes;C&&P.attr(C);const L=x.style;if(L&&ce(E).css(L),x.hasOwnProperty("className")){const F=x.className;T?E.className.baseVal=F:E.className=F}if(x.hasOwnProperty("textContent")&&(E.textContent=x.textContent),x.hasOwnProperty("selector")){const F=x.selector;if(n[F])throw new Error("json-dom-parser: selector must be unique");n[F]=E,P.attr("joint-selector",F)}if(x.hasOwnProperty("groupSelector")){let F=x.groupSelector;Array.isArray(F)||(F=[F]);for(let $=0;$<F.length;$++){const X=F[$];let y=r[X];y||(y=r[X]=[]),y.push(E)}}p.appendChild(E);const M=x.children;Array.isArray(M)&&c(M,E,g)}};return c(e,l,a),{fragment:l,selectors:n,groupSelectors:r}},Fa=function(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t=t&t}return t},ts=function(e,t,n){for(var r=Array.isArray(t)?t:t.split(n||"/"),s,a=0,l=r.length;a<l;)if(s=r[a++],Object(e)===e&&s in e)e=e[s];else return;return e},lv=function(e,t){return typeof t!="string"&&typeof t!="number"&&(t=String(t)),!(t==="constructor"&&typeof e[t]=="function"||t==="__proto__")},Up=function(e,t,n,r){const s=Array.isArray(t)?t:t.split(r||"/"),a=s.length-1;let l=e,c=0;for(;c<a;c++){const f=s[c];if(!lv(l,f))return e;l=l[f]||(l[f]={})}return l[s[a]]=n,e},Gp=function(e,t,n){const r=Array.isArray(t)?t:t.split(n),s=r.length-1;let a=e,l=0;for(;l<s;l++){const c=r[l];if(!lv(a,c))return e;const f=a[c];if(!f)return e;a=f}return delete a[r[s]],e},$w=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})},qi=function(e){return qi.id=qi.id||1,e===void 0?"j_"+qi.id++:(e.id=e.id===void 0?"j_"+qi.id++:e.id,e.id)},Et=function(e){if(e.normalized)return e;const{originalEvent:t,target:n}=e,r=t&&t.changedTouches&&t.changedTouches[0];if(r)for(let s in r)e[s]===void 0&&(e[s]=r[s]);if(n){const s=n.correspondingUseElement;s&&(e.target=s)}return e.normalized=!0,e},Hw=function(e){let s=0,a=0,l=0,c=0;return"detail"in e&&(a=e.detail),"wheelDelta"in e&&(a=-e.wheelDelta/120),"wheelDeltaY"in e&&(a=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(s=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(s=a,a=0),l="deltaX"in e?e.deltaX:s*10,c="deltaY"in e?e.deltaY:a*10,(l||c)&&e.deltaMode&&(e.deltaMode==1?(l*=40,c*=40):(l*=800,c*=800)),e.deltaX===0&&e.deltaY!==0&&e.shiftKey&&(l=c,c=0,s=a,a=0),l&&!s&&(s=l<1?-1:1),c&&!a&&(a=c<1?-1:1),{spinX:s,spinY:a,deltaX:l,deltaY:c}},Ww=function(e,t){return e>t?t:e<-50?-50:e},zc=function(){var e;if(typeof window<"u"&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var t=0;e=function(n){var r=new Date().getTime(),s=Math.max(0,16-(r-t)),a=setTimeout(function(){n(r+s)},s);return t=r+s,a}}return function(n,r,...s){return e(r!==void 0?n.bind(r,...s):n)}}(),ja=function(){var e,t=typeof window<"u";return t&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,t?e.bind(window):e}(),Xt=function(e){return ft(e)&&e.slice(-1)==="%"},jw=function(e,t){function n(c){var f=new RegExp("(?:\\d+(?:\\.\\d+)*)("+c+")$").exec(e);return f?f[1]:null}var r=parseFloat(e);if(Number.isNaN(r))return null;var s={};s.value=r;var a;if(t==null)a="[A-Za-z]*";else if(Array.isArray(t)){if(t.length===0)return null;a=t.join("|")}else ft(t)&&(a=t);var l=n(a);return l===null?null:(s.unit=l,s)},Zs=0;function qw(e,t){const n=e.split(t);let r=1;for(let s=0,a=n.length-1;s<a;s++){const l=[];(s>0||n[0]!=="")&&l.push(Zs),l.push(t),(s<a-1||n[a]!=="")&&l.push(Zs),n.splice(r,0,...l),r+=l.length+1}return n.filter(s=>s!=="")}function $p(e,t){if(e===null)return t.getBBox().height;switch(e.unit){case"em":return t.getBBox().height*e.value;case"px":case"":return e.value}}const Yw=function(e,t,n={},r={}){var s=t.width,a=t.height,l=r.svgDocument||ne("svg").node,c=ne("tspan").node,f=ne("text").attr(n).append(c).node,p=document.createTextNode("");f.style.opacity=0,f.style.display="block",c.style.display="block",c.appendChild(p),l.appendChild(f),r.svgDocument||document.body.appendChild(l);const g=r.preserveSpaces,d=" ",x=r.separator||r.separator===""?r.separator:d,w=typeof x=="string"?x:d;var E=r.eol||`
`,T=r.hyphen?new RegExp(r.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,P=r.maxLineCount;Rt(P)||(P=1/0);var C=e.split(x),L=[],M=[],F,$,X;g&&ne(c).attr("xml:space","preserve");for(var y=0,S=0,A=C.length;y<A;y++){var _=C[y];if(!(!_&&!g)&&typeof _=="string"){var R=!1;if(E&&_.indexOf(E)>=0)if(_.length>1){const H=qw(C[y],E);C.splice(y,1,...H),y--,A=C.length;continue}else{if(g&&typeof C[y-1]=="string"){C.splice(y,Zs,"",Zs),A+=2,y--;continue}M[++S]=!g||typeof C[y+1]=="string"?"":void 0,R=!0}if(!R){let H;if(g?H=M[S]!==void 0?M[S]+w+_:_:H=M[S]?M[S]+w+_:_,p.data=H,c.getComputedTextLength()<=s)M[S]=H,(F||$)&&(L[S++]=!0,F=0,$=0);else{if(!M[S]||F){var G=!!F;if(F=_.length-1,G||!F){if(!F){if(!M[S]){M=[];break}C.splice(y,2,_+C[y+1]),A--,L[S++]=!0,y--;continue}C[y]=_.substring(0,F);const k=C[y+1];C[y+1]=_.substring(F)+(k===void 0||k===Zs?"":k)}else{if($)C.splice(y,2,C[y]+C[y+1]),$=0;else{var j=_.search(T);j>-1&&j!==_.length-1&&j!==0&&($=j+1,F=0),C.splice(y,1,_.substring(0,$||F),_.substring($||F)),A++}S&&!L[S-1]&&S--}(!g||M[S]!=="")&&y--;continue}S++,y--}}var J=null;if(M.length>P)J=P-1;else if(a!==void 0){if(X===void 0&&p.data!=="")if(n.lineHeight==="auto")X=$p({value:1.5,unit:"em"},f);else{const H=jw(n.lineHeight,["em","px",""]);X=$p(H,f)}X*M.length>a&&(J=Math.floor(a/X)-1)}if(J!==null){M.splice(J+1);var re=r.ellipsis;if(!re||J<0)break;typeof re!="string"&&(re="…");var I=M[J];if(!I&&!R)break;var B=I.length,N,D;do{if(D=I[B],N=I.substring(0,B),D?D.match(x)&&(N+=D):N+=w,N+=re,p.data=N,c.getComputedTextLength()<=s){M[J]=N;break}B--}while(B>=0);break}}}return r.svgDocument?l.removeChild(f):document.body.removeChild(l),M.join(E)},Xw=function(e,t){e=ce(e).toArray();var n=e.map(function(s){var a=s.parentNode,l=a.insertBefore(document.createTextNode(""),s.nextSibling);return function(){if(a===this)throw new Error("You can't sort elements if any one is a descendant of another.");a.insertBefore(this,l),a.removeChild(l)}});e.sort(t);for(var r=0;r<n.length;r++)n[r].call(e[r]);return e},si=function(e){if(Object(e)!==e){var t=0;return isFinite(e)&&(t=+e),{top:t,right:t,bottom:t,left:t}}var n,r,s,a;return n=r=s=a=0,isFinite(e.vertical)&&(n=s=+e.vertical),isFinite(e.horizontal)&&(r=a=+e.horizontal),isFinite(e.top)&&(n=+e.top),isFinite(e.right)&&(r=+e.right),isFinite(e.bottom)&&(s=+e.bottom),isFinite(e.left)&&(a=+e.left),{top:n,right:r,bottom:s,left:a}},Zw={linear:function(e){return e},quad:function(e){return e*e},cubic:function(e){return e*e*e},inout:function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},exponential:function(e){return Math.pow(2,10*(e-1))},bounce:function(e){for(var t=0,n=1;;t+=n,n/=2)if(e>=(7-4*t)/11){var r=(11-6*t-11*e)/4;return-r*r+n*n}},reverse:function(e){return function(t){return 1-e(1-t)}},reflect:function(e){return function(t){return .5*(t<.5?e(2*t):2-e(2-2*t))}},clamp:function(e,t,n){return t=t||0,n=n||1,function(r){var s=e(r);return s<t?t:s>n?n:s}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},elastic:function(e){return e||(e=1.5),function(t){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}},uv={number:function(e,t){var n=t-e;return function(r){return e+n*r}},object:function(e,t){var n=Object.keys(e);return function(r){var s,a,l={};for(s=n.length-1;s!=-1;s--)a=n[s],l[a]=e[a]+(t[a]-e[a])*r;return l}},hexColor:function(e,t){var n=parseInt(e.slice(1),16),r=parseInt(t.slice(1),16),s=n&255,a=(r&255)-s,l=n&65280,c=(r&65280)-l,f=n&16711680,p=(r&16711680)-f;return function(g){var d=s+a*g&255,x=l+c*g&65280,w=f+p*g&16711680;return"#"+(1<<24|d|x|w).toString(16).slice(1)}},unit:function(e,t){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(e),s=n.exec(t),a=s[1].indexOf("."),l=a>0?s[1].length-a-1:0;e=+r[1];var c=+s[1]-e,f=r[2];return function(p){return(e+c*p).toFixed(l)+f}}},Qw={outline:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',n=Number.isFinite(e.margin)?e.margin:2,r=Number.isFinite(e.width)?e.width:1;return Cn(t)({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:n+r,innerRadius:n})},highlight:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return Cn(t)({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var t=Number.isFinite(e.x)?e.x:2;return Cn('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[t,e.y]:t})},dropShadow:function(e){var t="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Cn(t)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Cn('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},sepia:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Cn('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},saturate:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Cn('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-t})},hueRotate:function(e){return Cn('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Cn('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:1-t})},brightness:function(e){return Cn('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Cn('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:.5-t/2})}},Cn=function(e){var t=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},e.replace(t,function(r){for(var s=Array.from(arguments),a=s.slice(1,4).find(function(f){return!!f}),l=a.split("."),c=n[l.shift()];c!==void 0&&l.length;)c=c[l.shift()];return c!==void 0?c:""})}};function cv(e,t,n,r){if(n===r)return{};const s={};return Object.keys(e).forEach(a=>{const l=e[a],c=t[a];if(!Array.isArray(l)&&!Array.isArray(c)&&$e(l)&&$e(c)){const f=n+1,p=cv(l,c,f,r);Object.keys(p).length>0?s[a]=p:(n===0||f===r)&&(s[a]={})}else _r(l,c)||(s[a]=l)}),s}function Kw(e,t,n){const{maxDepth:r=Number.POSITIVE_INFINITY}=n;return cv(e,t,0,r)}var zt={},Hp=/\s+/,Cr,ai=function(e,t,n,r,s){var a=0,l;if(n&&typeof n=="object")for(r!==void 0&&("context"in s)&&s.context===void 0&&(s.context=r),l=Object.keys(n);a<l.length;a++)t=ai(e,t,l[a],n[l[a]],s);else if(n&&Hp.test(n))for(l=n.split(Hp);a<l.length;a++)t=e(t,l[a],r,s);else t=e(t,n,r,s);return t};zt.on=function(e,t,n){if(this._events=ai(Jw,this._events||{},e,t,{context:n,ctx:this,listening:Cr}),Cr){var r=this._listeners||(this._listeners={});r[Cr.id]=Cr,Cr.interop=!1}return this};zt.listenTo=function(e,t,n){if(!e)return this;var r=e._listenId||(e._listenId=io("l")),s=this._listeningTo||(this._listeningTo={}),a=Cr=s[r];a||(this._listenId||(this._listenId=io("l")),a=Cr=s[r]=new xl(this,e));var l=eS(e,t,n,this);if(Cr=void 0,l)throw l;return a.interop&&a.on(t,n),this};var Jw=function(e,t,n,r){if(n){var s=e[t]||(e[t]=[]),a=r.context,l=r.ctx,c=r.listening;c&&c.count++,s.push({callback:n,context:a,ctx:a||l,listening:c})}return e},eS=function(e,t,n,r){try{e.on(t,n,r)}catch(s){return s}};zt.off=function(e,t,n){return this._events?(this._events=ai(fv,this._events,e,t,{context:n,listeners:this._listeners}),this):this};zt.stopListening=function(e,t,n){var r=this._listeningTo;if(!r)return this;for(var s=e?[e._listenId]:Object.keys(r),a=0;a<s.length;a++){var l=r[s[a]];if(!l)break;l.obj.off(t,n,this),l.interop&&l.off(t,n)}return rn(r)&&(this._listeningTo=void 0),this};var fv=function(e,t,n,r){if(e){var s=r.context,a=r.listeners,l=0,c;if(!t&&!s&&!n){if(a!=null)for(c=Object.keys(a);l<c.length;l++)a[c[l]].cleanup();return}for(c=t?[t]:Object.keys(e);l<c.length;l++){t=c[l];var f=e[t];if(!f)break;for(var p=[],g=0;g<f.length;g++){var d=f[g];if(n&&n!==d.callback&&n!==d.callback._callback||s&&s!==d.context)p.push(d);else{var x=d.listening;x&&x.off(t,n)}}p.length?e[t]=p:delete e[t]}return e}};zt.once=function(e,t,n){var r=ai(hv,{},e,t,this.off.bind(this));return typeof e=="string"&&n==null&&(t=void 0),this.on(r,t,n)};zt.listenToOnce=function(e,t,n){var r=ai(hv,{},t,n,this.stopListening.bind(this,e));return this.listenTo(e,r)};var hv=function(e,t,n,r){if(n){var s=e[t]=tS(function(){r(t,s),n.apply(this,arguments)});s._callback=n}return e},tS=function(e){var t;if(typeof e!="function")throw new TypeError("Expected a function");var n=2;return function(){return--n>0&&(t=e.apply(this,arguments)),n<=1&&(e=void 0),t}};zt.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),r=0;r<t;r++)n[r]=arguments[r+1];return ai(nS,this._events,e,void 0,n),this};var nS=function(e,t,n,r){if(e){var s=e[t],a=e.all;s&&a&&(a=a.slice()),s&&Wp(s,r),a&&Wp(a,[t].concat(r))}return e},Wp=function(e,t){var n,r=-1,s=e.length,a=t[0],l=t[1],c=t[2];switch(t.length){case 0:for(;++r<s;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<s;)(n=e[r]).callback.call(n.ctx,a);return;case 2:for(;++r<s;)(n=e[r]).callback.call(n.ctx,a,l);return;case 3:for(;++r<s;)(n=e[r]).callback.call(n.ctx,a,l,c);return;default:for(;++r<s;)(n=e[r]).callback.apply(n.ctx,t);return}},xl=function(e,t){this.id=e._listenId,this.listener=e,this.obj=t,this.interop=!0,this.count=0,this._events=void 0};xl.prototype.on=zt.on;xl.prototype.off=function(e,t){var n;this.interop?(this._events=ai(fv,this._events,e,t,{context:void 0,listeners:void 0}),n=!this._events):(this.count--,n=this.count===0),n&&this.cleanup()};xl.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]};zt.bind=zt.on;zt.unbind=zt.off;var Pf=function(e,t){var n=this,r;return e&&Un(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},Se(r,n,t),r.prototype=Object.assign(Object.create(n.prototype),e),r.prototype.constructor=r,r.__super__=n.prototype,r},rS=function(e,t,n,r){switch(t){case 1:return function(){return e[n](this[r])};case 2:return function(s){return e[n](this[r],s)};case 3:return function(s,a){return e[n](this[r],jp(s,this),a)};case 4:return function(s,a,l){return e[n](this[r],jp(s,this),a,l)};default:return function(){var s=Array.prototype.slice.call(arguments);return s.unshift(this[r]),e[n].apply(e,s)}}},iS=function(e,t,n,r){zn(n,function(s,a){t[a]&&(e.prototype[a]=rS(t,s,a,r))})},jp=function(e,t){return Xe(e)?e:$e(e)&&!t._isModel(e)?sS(e):ft(e)?function(n){return n.get(e)}:e},sS=function(e){var t=qx(e);return function(n){return t(n.attributes)}},hn=function(e,t){var n=e||{};t||(t={}),this.preinitialize.apply(this,arguments),this.cid=io(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection);var r=Ke(this,"defaults");n=nn(Se({},r,n),r),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};Se(hn.prototype,zt,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(e){return Lt(this.attributes)},get:function(e){return this.attributes[e]},has:function(e){return this.get(e)!=null},set:function(e,t,n){if(e==null)return this;var r;if(typeof e=="object"?(r=e,n=t):(r={})[e]=t,n||(n={}),!this._validate(r,n))return!1;var s=n.unset,a=n.silent,l=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=Lt(this.attributes),this.changed={});var f=this.attributes,p=this.changed,g=this._previousAttributes;for(var d in r)t=r[d],_r(f[d],t)||l.push(d),_r(g[d],t)?delete p[d]:p[d]=t,s?delete f[d]:f[d]=t;if(this.idAttribute in r){var x=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,x,n)}if(!a){l.length&&(this._pending=n);for(var w=0;w<l.length;w++)this.trigger("change:"+l[w],this,f[l[w]],n)}if(c)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,Se({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,Se({},e,{unset:!0}))},hasChanged:function(e){return e==null?!rn(this.changed):Un(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?Lt(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes,n={},r;for(var s in e){var a=e[s];_r(t[s],a)||(n[s]=a,r=!0)}return r?n:!1},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return Lt(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isValid:function(e){return this._validate({},Se({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=Se({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,Se(t,{validationError:n})),!1):!0}});hn.extend=Pf;function dv(e){e=ri(e);const t=He(e).reduce(function(n,r){return n[r.id]=r.clone(),n},{});return He(e).forEach(function(n){const r=t[n.id];if(r.isLink()){const l=r.source(),c=r.target();l.id&&t[l.id]&&r.prop("source/id",t[l.id].id),c.id&&t[c.id]&&r.prop("target/id",t[c.id].id)}const s=n.get("parent");s&&t[s]&&r.set("parent",t[s].id);const a=He(n.get("embeds")).reduce(function(l,c){return t[c]&&l.push(t[c].id),l},[]);rn(a)||r.set("embeds",a)}),t}const oS=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"],aS=oS.reduce((e,t)=>(e[t]=!0,e),{}),lS={qualify:function(e){return ct(e)},set:function(e,t,n){Object.keys(e).forEach(function(r){if(aS[r]&&r in n){const s=e[r];n.tagName==="SELECT"&&Array.isArray(s)?Array.from(n.options).forEach(function(a,l){a.selected=s.includes(a.value)}):n[r]=s}})}};function Da(e,t,n){return function(r,s){var a=Xt(r);r=parseFloat(r),a&&(r/=100);var l;if(isFinite(r)){var c=s[n]();a||r>0&&r<1?l=c[e]+s[t]*r:l=c[e]+r}var f=V();return f[e]=l||0,f}}function br(e,t){return function(n,r){var s=Xt(n);n=parseFloat(n),s&&(n/=100);var a={};if(isFinite(n)){var l=s||n>=0&&n<=1?n*r[t]:Math.max(n+r[t],0);a[e]=l}return a}}const Vt={"ref-x":{position:Da("x","width","origin")},"ref-y":{position:Da("y","height","origin")},"ref-dx":{position:Da("x","width","corner")},"ref-dy":{position:Da("y","height","corner")},"ref-width":{set:br("width","width")},"ref-height":{set:br("height","height")},"ref-rx":{set:br("rx","width")},"ref-ry":{set:br("ry","height")},"ref-cx":{set:br("cx","width")},"ref-cy":{set:br("cy","height")},"ref-r-inscribed":{set:function(e){var t=br(e,"width"),n=br(e,"height");return function(r,s){var a=s.height>s.width?t:n;return a(r,s)}}("r")},"ref-r-circumscribed":{set:function(e,t){var n=Xt(e);e=parseFloat(e),n&&(e/=100);var r=Math.sqrt(t.height*t.height+t.width*t.width),s;return isFinite(e)&&(n||e>=0&&e<=1?s=e*r:s=Math.max(e+r,0)),{r:s}}}};Vt.refX=Vt["ref-x"];Vt.refY=Vt["ref-y"];Vt["ref-x2"]=Vt["ref-x"];Vt["ref-y2"]=Vt["ref-y"];Vt["ref-width2"]=Vt["ref-width"];Vt["ref-height2"]=Vt["ref-height"];Vt["ref-r"]=Vt["ref-r-inscribed"];const er={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},uS=Object.keys(er).map(e=>er[e]).join(""),vc="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",cS=/\s/g,qp=new RegExp(`^(${vc}\\*)?([${uS}])(/${vc})?([-+]{1,2}${vc})?$`,"g");function pv(e){throw new Error(`Invalid calc() expression: ${e}`)}function fS(e,t){const n=qp.exec(e.replace(cS,""));n||pv(e),qp.lastIndex=0;const[,r,s,a,l]=n,{x:c,y:f,width:p,height:g}=t;let d=0;switch(s){case er.width:{d=p;break}case er.height:{d=g;break}case er.x:{d=c;break}case er.y:{d=f;break}case er.minimum:{d=Math.min(g,p);break}case er.maximum:{d=Math.max(g,p);break}case er.diagonal:{d=Math.sqrt(g*g+p*p);break}}return r&&(d*=parseFloat(r)),a&&(d/=parseFloat(a.slice(1))),l&&(d+=hS(l)),d}function hS(e){if(!e)return 0;const[t]=e;switch(t){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}function ns(e){return typeof e=="string"&&e.includes("calc")}const gv="calc(",Yp=gv.length;function rs(e,t){let n=e,r=0;do{let s=n.indexOf(gv,r);if(s===-1)return n;let a=s+Yp,l=1;e:do{switch(n[a]){case"(":{l++;break}case")":{if(l--,l===0)break e;break}case void 0:pv(n)}a++}while(!0);let c=n.slice(s+Yp,a);ns(c)&&(c=rs(c,t));const f=String(fS(c,t));n=n.slice(0,s)+f+n.slice(a+1),r=s+f.length}while(!0)}function Di(e,t,n){return n.text!==void 0}const yc=["font-weight","font-family","font-size","letter-spacing","text-transform"],mv={"line-height":{qualify:Di},"text-vertical-anchor":{qualify:Di},"text-path":{qualify:Di},annotations:{qualify:Di},eol:{qualify:Di},"display-empty":{qualify:Di},text:{qualify:function(e,t,n){const r=n["text-wrap"];return!r||!ct(r)},unset:function(e){e.textContent=""},set:function(e,t,n,r){const s="joint-text",a=ce.data.get(n,s),l=r["line-height"],c=r["text-vertical-anchor"],f=r["display-empty"],p=r["font-size"],g=r.annotations,d=r.eol,x=r.x;let w=r["text-path"];const E=JSON.stringify([e,l,g,c,d,f,w,x,p]);if(a===void 0||a!==E){if(p&&n.setAttribute("font-size",p),$e(w)){const T=w.selector;if(typeof T=="string"){const P=this.findNode(T);P instanceof SVGPathElement&&(w=Se({"xlink:href":"#"+P.id},w))}}ne(n).text(""+e,{lineHeight:l,annotations:g,textPath:w,x,textVerticalAnchor:c,eol:d,displayEmpty:f}),ce.data.set(n,s,E)}}},"text-wrap":{qualify:ct,set:function(e,t,n,r){var s={},a=e.width||0;Xt(a)?s.width=t.width*parseFloat(a)/100:ns(a)?s.width=Number(rs(a,t)):e.width===null?s.width=1/0:a<=0?s.width=t.width+a:s.width=a;var l=e.height||0;Xt(l)?s.height=t.height*parseFloat(l)/100:ns(l)?s.height=Number(rs(l,t)):e.height===null||(l<=0?s.height=t.height+l:s.height=l);var c,f=e.text;if(f===void 0&&(f=r.text),f!==void 0){const p=e.breakText||Yw,g=getComputedStyle(n),d={};for(let x=0;x<yc.length;x++){const w=yc[x];w in r&&n.setAttribute(w,r[w]),d[w]=g[w]}d.lineHeight=r["line-height"],c=p(""+f,s,d,{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,separator:e.separator,maxLineCount:e.maxLineCount,preserveSpaces:e.preserveSpaces})}else c="";mv.text.set.call(this,c,t,n,r)},FONT_ATTRIBUTES:yc},title:{qualify:function(e,t){return t instanceof SVGElement},unset:function(e){ce.data.remove(e,"joint-title");const t=e.firstElementChild;t&&t.remove()},set:function(e,t,n){var r="joint-title",s=ce.data.get(n,r);if(s===void 0||s!==e){if(ce.data.set(n,r,e),n.tagName==="title"){n.textContent=e;return}var a=n.firstElementChild;if(a&&a.tagName==="title")a.textContent=e;else{var l=document.createElementNS(n.namespaceURI,"title");l.textContent=e,n.insertBefore(l,a)}}}}};function Ba(e,t){var n=new V(1,0);return function(r){var s,a,l=this[e](r);return l?(a=t.rotate?l.vector().vectorAngle(n):0,s=l.start):(s=this.path.start,a=0),a===0?{transform:"translate("+s.x+","+s.y+")"}:{transform:"translate("+s.x+","+s.y+") rotate("+a+")"}}}function Ws(){return this.model.isLink()}const so={connection:{qualify:Ws,unset:"d",set:function({stubs:e=0}){let t;if(isFinite(e)&&e!==0){let n;e<0?n=(this.getConnectionLength()+e)/2:n=e;const r=this.getConnection(),s=this.getConnectionSubdivisions(),a=r.divideAtLength(n,{segmentSubdivisions:s}),l=r.divideAtLength(-n,{segmentSubdivisions:s});a&&l&&(t=`${a[0].serialize()} ${l[1].serialize()}`)}return{d:t||this.getSerializedConnection()}}},"at-connection-length-keep-gradient":{qualify:Ws,unset:"transform",set:Ba("getTangentAtLength",{rotate:!0})},"at-connection-length-ignore-gradient":{qualify:Ws,unset:"transform",set:Ba("getTangentAtLength",{rotate:!1})},"at-connection-ratio-keep-gradient":{qualify:Ws,unset:"transform",set:Ba("getTangentAtRatio",{rotate:!0})},"at-connection-ratio-ignore-gradient":{qualify:Ws,unset:"transform",set:Ba("getTangentAtRatio",{rotate:!1})}};so["at-connection-length"]=so["at-connection-length-keep-gradient"];so["at-connection-ratio"]=so["at-connection-ratio-keep-gradient"];function vv(e,t){var n="joint-shape",r=t&&t.resetOffset;return function(s,a,l){var c=ce.data.get(l,n);if(!c||c.value!==s){var f=e(s);c={value:s,shape:f,shapeBBox:f.bbox()},ce.data.set(l,n,c)}var p=c.shape.clone(),g=c.shapeBBox.clone(),d=g.origin(),x=a.origin();g.x=x.x,g.y=x.y;var w=a.maxRectScaleToFit(g,x),E=g.width===0||a.width===0?1:w.sx,T=g.height===0||a.height===0?1:w.sy;return p.scale(E,T,d),r&&p.translate(-d.x,-d.y),p}}function Xp(e){function t(r){return new Ce(ne.normalizePathData(r))}var n=vv(t,e);return function(r,s,a){var l=n(r,s,a);return{d:l.serialize()}}}function Zp(e){var t=vv(Je,e);return function(n,r,s){var a=t(n,r,s);return{points:a.serialize()}}}const oo={"ref-d-reset-offset":{unset:"d",set:Xp({resetOffset:!0})},"ref-d-keep-offset":{unset:"d",set:Xp({resetOffset:!1})},"ref-points-reset-offset":{unset:"points",set:Zp({resetOffset:!0})},"ref-points-keep-offset":{unset:"points",set:Zp({resetOffset:!1})}};oo["ref-d"]=oo["ref-d-reset-offset"];oo["ref-points"]=oo["ref-points-reset-offset"];function xc(e){var t={},n=e.stroke;typeof n=="string"&&(t.stroke=n,t.fill=n);var r=e["stroke-opacity"];return r===void 0&&(r=e.opacity),r!==void 0&&(t["stroke-opacity"]=r,t["fill-opacity"]=r),t}function Qp(e){const{paper:t}=this;return`url(#${e.type==="pattern"?t.definePattern(e):t.defineGradient(e)})`}const dS={"source-marker":{qualify:ct,unset:"marker-start",set:function(e,t,n,r){return e=Se(xc(r),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},"target-marker":{qualify:ct,unset:"marker-end",set:function(e,t,n,r){return e=Se(xc(r),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},"vertex-marker":{qualify:ct,unset:"marker-mid",set:function(e,t,n,r){return e=Se(xc(r),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},fill:{qualify:ct,set:Qp},stroke:{qualify:ct,set:Qp},filter:{qualify:ct,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}}};function Kp(e,t,n){return function(r,s){var a;r==="middle"?a=s[t]/2:r===n?a=s[t]:isFinite(r)?a=r>-1&&r<1?-s[t]*r:-r:Xt(r)?a=s[t]*parseFloat(r)/100:a=0;var l=new V;return l[e]=-(s[e]+a),l}}const pS={"x-alignment":{offset:Kp("x","width","right")},"y-alignment":{offset:Kp("y","height","bottom")},"reset-offset":{offset:function(e,t){return e?{x:-t.x,y:-t.y}:{x:0,y:0}}}};function Jp(e){return function(n,r,s){const a=ne(s);a.attr(e)!==n&&a.attr(e,n)}}const li={ref:{},href:{set:Jp("href")},"xlink:href":{set:Jp("xlink:href")},port:{set:function(e){return e===null||e.id===void 0?e:e.id}},style:{qualify:ct,set:function(e,t,n){ce(n).css(e)}},html:{unset:function(e){ce(e).empty()},set:function(e,t,n){ce(n).html(e+"")}},props:lS};Se(li,Vt);Se(li,mv);Se(li,so);Se(li,oo);Se(li,dS);Se(li,pS);const yv=li,gS=function(e,t){if(Array.isArray(e))return t};function eg(e){for(const t in e){const n=e[t];$e(n)&&!Array.isArray(n)&&rn(n)&&delete e[t]}}const $n=hn.extend({constructor:function(e,t){var n,r=e||{};if(typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=io("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(r=this.parse(r,t)||{}),n=Ke(this,"defaults")){const s=t&&t.mergeArrays===!0?!1:gS;r=gt({},n,r,s)}this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,t,n){throw new Error("Must define a translate() method.")},toJSON:function(e){const{ignoreDefaults:t,ignoreEmptyAttributes:n=!1}=e||{},r=Ke(this.constructor.prototype,"defaults");if(t===!1){const c=tn(this.attributes);return n&&eg(c),c}let s={},a=tn(this.attributes);t===!0?s=r:(Array.isArray(t)?t:["attrs"]).forEach(f=>{s[f]=r[f]||{}});const l=Kw(a,go(s,"id","type"),{maxDepth:4});return n&&eg(l),l},initialize:function(e){const t=this.getIdAttribute();(!e||e[t]===void 0)&&this.set(t,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return $w()},processPorts:function(){var e=this.ports,t={};zn(this.get("attrs"),function(a,l){a&&a.port&&(a.port.id!==void 0?t[a.port.id]=a.port:t[a.port]={id:a.port})});var n={};if(zn(e,function(a,l){t[l]||(n[l]=!0)}),this.graph&&!rn(n)){var r=this.graph.getConnectedLinks(this,{inbound:!0});r.forEach(function(a){n[a.get("target").port]&&a.remove()});var s=this.graph.getConnectedLinks(this,{outbound:!0});s.forEach(function(a){n[a.get("source").port]&&a.remove()})}this.ports=t},remove:function(e={}){const{graph:t,collection:n}=this;if(!t)return n&&n.remove(this,e),this;t.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,e);const s=this.getEmbeddedCells();for(let a=0,l=s.length;a<l;a++){const c=s[a];c&&c.remove(e)}return this.trigger("remove",this,t.attributes.cells,e),t.stopBatch("remove"),this},toFront:function(e){var t=this.graph;if(t){e=nn(e||{},{foregroundEmbeds:!0});let n;e.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),n.unshift(this)):n=[this];const r=e.foregroundEmbeds?n:$a(n,f=>f.z());let a=t.maxZIndex()-n.length+1;const l=t.get("cells");let c=l.toArray().indexOf(r[0])!==l.length-n.length;c||(c=r.some(function(f,p){return f.z()!==a+p})),c&&(this.startBatch("to-front"),a=a+n.length,r.forEach(function(f,p){f.set("z",a+p,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var t=this.graph;if(t){e=nn(e||{},{foregroundEmbeds:!0});let r;e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),r.unshift(this)):r=[this];const s=e.foregroundEmbeds?r:$a(r,c=>c.z());let a=t.minZIndex();var n=t.get("cells");let l=n.toArray().indexOf(s[0])!==0;l||(l=s.some(function(c,f){return c.z()!==a+f})),l&&(this.startBatch("to-back"),a-=r.length,s.forEach(function(c,f){c.set("z",a+f,e)}),this.stopBatch("to-back"))}return this},parent:function(e,t){return e===void 0?this.get("parent"):this.set("parent",e,t)},embed:function(e,t={}){const n=Array.isArray(e)?e:[e];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");if(t.reparent)ri(n.map(s=>s.getParentCell())).forEach(s=>{s&&s._unembedCells(n,t)});else if(n.some(r=>r.isEmbedded()&&this.id!==r.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(n,t),this},unembed:function(e,t){const n=Array.isArray(e)?e:[e];return this._unembedCells(n,t),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(n=>this!==n&&!this.isEmbeddedIn(n))},_embedCells:function(e,t){const n="embed";this.startBatch(n);const r=Se([],this.get("embeds"));e.forEach(s=>{r[s.isLink()?"unshift":"push"](s.id),s.parent(this.id,t)}),this.set("embeds",ri(r),t),this.stopBatch(n)},_unembedCells:function(e,t){const n="unembed";this.startBatch(n),e.forEach(r=>r.unset("parent",t)),this.set("embeds",Bp(this.get("embeds"),...e.map(r=>r.id)),t),this.stopBatch(n)},getParentCell:function(){var e=this.parent(),t=this.graph;return e&&t&&t.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var t=this.getParentCell();t;)e.push(t),t=t.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},!this.graph)return[];if(e.deep)return e.breadthFirst?this._getEmbeddedCellsBfs(e.sortSiblings):this._getEmbeddedCellsDfs(e.sortSiblings);const t=this.get("embeds");if(rn(t))return[];let n=t.map(this.graph.getCell,this.graph);return e.sortSiblings&&(n=$a(n,r=>r.z())),n},_getEmbeddedCellsBfs:function(e){const t=[],n=[];for(n.push(this);n.length>0;){const r=n.shift();t.push(r);const s=r.getEmbeddedCells({sortSiblings:e});n.push(...s)}return t.shift(),t},_getEmbeddedCellsDfs:function(e){const t=[],n=[];for(n.push(this);n.length>0;){const r=n.pop();t.push(r);const s=r.getEmbeddedCells({sortSiblings:e});for(let a=s.length-1;a>=0;--a)n.push(s[a])}return t.shift(),t},isEmbeddedIn:function(e,t){var n=ft(e)?e:e.id,r=this.parent();if(t=Se({deep:!0},t),this.graph&&t.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).parent()}return!1}else return r===n},isEmbedded:function(){return!!this.parent()},clone:function(e){if(e=e||{},e.deep)return He(dv([this].concat(this.getEmbeddedCells({deep:!0}))));var t=hn.prototype.clone.apply(this,arguments);return t.set(this.getIdAttribute(),this.generateId()),t.unset("embeds"),t.unset("parent"),t},prop:function(e,t,n){var r="/",s=ft(e);if(s||Array.isArray(e))if(arguments.length>1){var a,l;s?(a=e,l=a.split("/")):(a=e.join(r),l=e.slice());var c=l[0],f=l.length;const M=n||{};M.propertyPath=a,M.propertyValue=t,M.propertyPathArray=l,"rewrite"in M||(M.rewrite=!1);for(var p={},g=p,d=c,x=1;x<f;x++){var w=l[x],E=Number.isFinite(s?Number(w):w);g=g[d]=E?[]:{},d=w}p=Up(p,l,t,"/");var T=gt({},this.attributes);M.rewrite&&Gp(T,a,"/");var P=gt(T,p);return this.set(c,P[c],M)}else return ts(this.attributes,e,r);const C=t||{};C.propertyPath=null,C.propertyValue=e,C.propertyPathArray=[],"rewrite"in C||(C.rewrite=!1);const L={};for(const M in e){const{changedValue:F}=gt({},{changedValue:this.attributes[M]},{changedValue:e[M]});L[M]=F}return this.set(L,C)},removeProp:function(e,t){t=t||{};var n=Array.isArray(e)?e:e.split("/"),r=n[0];if(r==="attrs"&&(t.dirty=!0),n.length===1)return this.unset(e,t);var s=n.slice(1),a=this.get(r);return a==null?this:(a=tn(a),Gp(a,s,"/"),this.set(r,a,t))},attr:function(e,t,n){var r=Array.from(arguments);return r.length===0?this.get("attrs"):(Array.isArray(e)?r[0]=["attrs"].concat(e):ft(e)?r[0]="attrs/"+e:r[0]={attrs:e},this.prop.apply(this,r))},removeAttr:function(e,t){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,t)},transition:function(e,t,n,r){r=r||"/";var s={duration:100,delay:10,timingFunction:Zw.linear,valueFunction:uv.number};n=Se(s,n);var a=0,l,c=(function(d){var x,w,E;a=a||d,d-=a,w=d/n.duration,w<1?this._transitionIds[e]=x=zc(c):(w=1,delete this._transitionIds[e]),E=l(n.timingFunction(w)),n.transitionId=x,this.prop(e,E,n),x||this.trigger("transition:end",this,e)}).bind(this);const{_scheduledTransitionIds:f}=this;let p;var g=d=>{f[e]&&(f[e]=Bp(f[e],p),f[e].length===0&&delete f[e]),this.stopPendingTransitions(e,r),l=n.valueFunction(ts(this.attributes,e,r),t),this._transitionIds[e]=zc(d),this.trigger("transition:start",this,e)};return p=setTimeout(g,n.delay,c),f[e]||(f[e]=[]),f[e].push(p),p},getTransitions:function(){return Bc(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,t="/"){const{_scheduledTransitionIds:n={}}=this;let r=Object.keys(n);if(e){const s=e.split(t);r=r.filter(a=>_r(s,a.split(t).slice(0,s.length)))}return r.forEach(s=>{n[s].forEach(l=>clearTimeout(l)),delete n[s]}),this},stopPendingTransitions(e,t="/"){const{_transitionIds:n={}}=this;let r=Object.keys(n);if(e){const s=e.split(t);r=r.filter(a=>_r(s,a.split(t).slice(0,s.length)))}r.forEach(s=>{const a=n[s];ja(a),delete n[s],this.trigger("transition:end",this,s)})},stopTransitions:function(e,t="/"){return this.stopScheduledTransitions(e,t),this.stopPendingTransitions(e,t),this},addTo:function(e,t){return e.addCell(this,t),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,t){return this.graph&&this.graph.startBatch(e,Se({},t,{cell:this})),this},stopBatch:function(e,t){return this.graph&&this.graph.stopBatch(e,Se({},t,{cell:this})),this},getChangeFlag:function(e){var t=0;if(!e)return t;for(var n in e)!e.hasOwnProperty(n)||!this.hasChanged(n)||(t|=e[n]);return t},angle:function(){return 0},position:function(){return new V(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new V},getBBox:function(){return new de(0,0,0,0)},getPointRotatedAroundCenter(e,t,n){const r=new V(t,n);return e&&r.rotate(this.getBBox().center(),e),r},getAbsolutePointFromRelative(e,t){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,t))},getRelativePointFromAbsolute(e,t){return this.getPointRotatedAroundCenter(this.angle(),e,t).difference(this.position())}},{getAttributeDefinition:function(e){var t=this.attributes,n=yv;return t&&t[e]||n[e]},define:function(e,t,n,r){n=Se({defaults:Ef({type:e},t,this.prototype.defaults)},n);var s=this.extend(n,r);return typeof joint<"u"&&Un(joint,"shapes")&&Up(joint.shapes,e,s,"."),s}}),mS=function(e,t,n){if(ft(n)){if(!Vc[n])throw new Error('Unknown wrapper: "'+n+'"');n=Vc[n]}if(!Xe(n))throw new Error("Wrapper must be a function.");He(t).forEach(function(r){e[r]=n(e[r])})},Vc={cells:function(e){return function(){var t=Array.from(arguments),n=t.length,r=n>0&&t[0]||[],s=n>1&&t[n-1]||{};return Array.isArray(r)||(s instanceof $n?r=t:r instanceof $n&&(t.length>1&&t.pop(),r=t)),s instanceof $n&&(s={}),e.call(this,r,s)}}};function Nr(e,...t){const n=[];return e.forEach((s,a)=>{n.push(s),a in t&&n.push(t[a])}),vS(n.join(""))}function vS(e){const t=new DOMParser,n=`<svg>${e.trim()}</svg>`;if(t.parseFromString(n.replace(/@/g,""),"application/xml").getElementsByTagName("parsererror")[0])throw new Error("Invalid SVG markup");const a=t.parseFromString(n,"text/html").querySelector("svg");return yS(a)}function xv(e){const t={},{tagName:n,attributes:r,namespaceURI:s,style:a,childNodes:l}=e;t.namespaceURI=s,t.tagName=s===ne.namespace.xhtml?n.toLowerCase():n;const c={};for(var f=a.length;f--;){var p=a[f];c[p]=a.getPropertyValue(p)}t.style=c;const g=r.getNamedItem("@selector");g&&(t.selector=g.value,r.removeNamedItem("@selector"));const d=r.getNamedItem("@group-selector");if(d){const T=d.value.split(",");t.groupSelector=T.map(P=>P.trim()),r.removeNamedItem("@group-selector")}const x=r.getNamedItem("class");x&&(t.className=x.value);const w=[];l.forEach(T=>{switch(T.nodeType){case Node.TEXT_NODE:{const P=T.data.replace(/\s\s+/g," ");P.trim()&&w.push(P);break}case Node.ELEMENT_NODE:{w.push(xv(T));break}}}),w.length&&(t.children=w);const E={};return Array.from(r).forEach(T=>{const{name:P,value:C}=T;E[P]=C}),Object.keys(E).length>0&&(t.attributes=E),t}function yS(e){const t=[];return Array.from(e.children).forEach(n=>{t.push(xv(n))}),t}const at={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function wv(e,t){const n=new de(e);switch(t){case void 0:throw new Error("Position required");case at.LEFT:case"leftMiddle":return n.leftMiddle();case at.RIGHT:case"rightMiddle":return n.rightMiddle();case at.TOP:case"topMiddle":return n.topMiddle();case at.BOTTOM:case"bottomMiddle":return n.bottomMiddle();case at.TOP_LEFT:case"topLeft":case"origin":return n.topLeft();case at.TOP_RIGHT:case"topRight":return n.topRight();case at.BOTTOM_LEFT:case"bottomLeft":return n.bottomLeft();case at.BOTTOM_RIGHT:case"bottomRight":case"corner":return n.bottomRight();case at.CENTER:return n.center();default:throw new Error(`Unknown position: ${t}`)}}function Sv(e,t,n){var r=e.toJSON();return r.angle=t||0,nn({},n,r)}function mo(e,t,n,r){return e.map(function(s,a,l){var c=this.pointAt((a+.5)/l.length);return(s.dx||s.dy)&&c.offset(s.dx||0,s.dy||0),Sv(c.round(),0,Tf(r,s))},ei(t,n))}function Ev(e,t,n,r){var s=t.center(),a=t.width/t.height,l=t.topMiddle(),c=Dt.fromRect(t);return e.map(function(f,p,g){var d=n+r(p,g.length),x=l.clone().rotate(s,-d).scale(a,1,s),w=f.compensateRotation?-c.tangentTheta(x):0;return(f.dx||f.dy)&&x.offset(f.dx||0,f.dy||0),f.dr&&x.move(s,f.dr),Sv(x.round(),w,Tf(t,f))})}function Tf(e,t){let{x:n,y:r,angle:s}=t;return Xt(n)?n=parseFloat(n)/100*e.width:ns(n)&&(n=Number(rs(n,e))),Xt(r)?r=parseFloat(r)/100*e.height:ns(r)&&(r=Number(rs(r,e))),{x:n,y:r,angle:s}}function Uc(e,t){const{x:n,y:r}=Tf(e,t);return new V(n||0,r||0)}const xS=function(e,t){return e.map(n=>{const r=Uc(t,n).round().toJSON();return r.angle=n.angle||0,r})},wS=function(e,t,n){return n.fn(e,t,n)},SS=function(e,t,n){var r=Uc(t,n.start||t.origin()),s=Uc(t,n.end||t.corner());return mo(e,r,s,t)},ES=function(e,t,n){return mo(e,t.origin(),t.bottomLeft(),t)},AS=function(e,t,n){return mo(e,t.topRight(),t.corner(),t)},bS=function(e,t,n){return mo(e,t.origin(),t.topRight(),t)},PS=function(e,t,n){return mo(e,t.bottomLeft(),t.corner(),t)},TS=function(e,t,n){var r=n.startAngle||0,s=n.step||360/e.length;return Ev(e,t,r,function(a){return a*s})},CS=function(e,t,n){var r=n.startAngle||0,s=n.step||20;return Ev(e,t,r,function(a,l){return(a+.5-l/2)*s})},_S=Object.freeze(Object.defineProperty({__proto__:null,absolute:xS,bottom:PS,ellipse:CS,ellipseSpread:TS,fn:wS,left:ES,line:SS,right:AS,top:bS},Symbol.toStringTag,{value:"Module"}));function Or(e,t){return Ef({},e,t,{x:0,y:0,angle:0,attrs:{}})}function Av(e){var t=e.center(),n=t.theta(e.origin()),r=t.theta(e.bottomLeft()),s=t.theta(e.corner()),a=t.theta(e.topRight());return[n,a,s,r]}function bv(e,t,n,r){r=nn({},r,{offset:15});var s=t.center().theta(e),a,l,c,f,p=r.offset,g=0;const[d,x,w,E]=Av(t);s<x||s>w?(c=".3em",a=p,l=0,f="start"):s<d?(a=0,l=-p,n?(g=-90,f="start",c=".3em"):(f="middle",c="0")):s<E?(c=".3em",a=-p,l=0,f="end"):(a=0,l=p,n?(g=90,f="start",c=".3em"):(f="middle",c=".6em"));var T=Math.round;return Or(r,{x:T(a),y:T(l),angle:g,attrs:{labelText:{y:c,textAnchor:f}}})}function Pv(e,t,n,r){r=nn({},r,{offset:15});var s=t.center().theta(e),a,l,c,f,p=r.offset,g=0;const[d,x,w,E]=Av(t);s<x||s>w?(c=".3em",a=-p,l=0,f="end"):s<d?(a=0,l=p,n?(g=90,f="start",c=".3em"):(f="middle",c=".6em")):s<E?(c=".3em",a=p,l=0,f="start"):(a=0,l=-p,n?(g=-90,f="start",c=".3em"):(f="middle",c="0"));var T=Math.round;return Or(r,{x:T(a),y:T(l),angle:g,attrs:{labelText:{y:c,textAnchor:f}}})}function Tv(e,t,n){n=nn({},n,{offset:20});var r=Qa(0,0),s=-e.theta(r),a=s,l=e.clone().move(r,n.offset).difference(e).round(),c=".3em",f;(s+90)%180===0?(f=t?"end":"middle",!t&&s===-270&&(c="0em")):s>-270&&s<-90?(f="start",a=s-180):f="end";var p=Math.round;return Or(n,{x:p(l.x),y:p(l.y),angle:t?a:0,attrs:{labelText:{y:c,textAnchor:f}}})}const kS=function(e,t,n){return Or(n)},LS=function(e,t,n){return Or(n,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},MS=function(e,t,n){return Or(n,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},NS=function(e,t,n){return Or(n,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},OS=function(e,t,n){return Or(n,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},IS=function(e,t,n){return bv(e,t,!0,n)},RS=function(e,t,n){return bv(e,t,!1,n)},FS=function(e,t,n){return Pv(e,t,!0,n)},DS=function(e,t,n){return Pv(e,t,!1,n)},BS=function(e,t,n){return Tv(e.difference(t.center()),!1,n)},zS=function(e,t,n){return Tv(e.difference(t.center()),!0,n)},VS=Object.freeze(Object.defineProperty({__proto__:null,bottom:OS,inside:DS,insideOriented:FS,left:LS,manual:kS,outside:RS,outsideOriented:IS,radial:BS,radialOriented:zS,right:MS,top:NS},Symbol.toStringTag,{value:"Module"}));var Cv=function(e){var t=tn(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=_S,this.portLabelLayoutNamespace=VS,this._init(t)};Cv.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(t){return t.group===e})},getGroupPortsMetrics:function(e,t){var n=this.getGroup(e),r=this.getPortsByGroup(e),s=n.position||{},a=s.name,l=this.portLayoutNamespace;l[a]||(a="left");var c=s.args||{},f=r.map(function(d){return d&&d.position&&d.position.args}),p=l[a](f,t,c),g={ports:r,result:[]};return He(p).reduce((function(d,x,w){var E=d.ports[w];return d.result.push({portId:E.id,portTransformation:x,labelTransformation:this._getPortLabelLayout(E,V(x),t),portAttrs:E.attrs,portSize:E.size,labelSize:E.label.size}),d}).bind(this),g),g.result},_getPortLabelLayout:function(e,t,n){var r=this.portLabelLayoutNamespace,s=e.label.position.name||"left";return r[s]?r[s](t,n,e.label.position.args):null},_init:function(e){if($e(e.groups))for(var t=Object.keys(e.groups),n=0,r=t.length;n<r;n++){var s=t[n];this.groups[s]=this._evaluateGroup(e.groups[s])}for(var a=He(e.items),l=0,c=a.length;l<c;l++)this.ports.push(this._evaluatePort(a[l]))},_evaluateGroup:function(e){return gt(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var t=Se({},e),n=this.getGroup(e.group);return t.markup=t.markup||n.markup,t.attrs=gt({},n.attrs,t.attrs),t.position=this._createPositionNode(n,t),t.label=gt({},n.label,this._getLabel(t)),t.z=this._getZIndex(n,t),t.size=Se({},n.size,t.size),t},_getZIndex:function(e,t){return Rt(t.z)?t.z:Rt(e.z)||e.z==="auto"?e.z:"auto"},_createPositionNode:function(e,t){return gt({name:"left",args:{}},e.position,{args:t.args})},_getPosition:function(e,t){var n={},r;Xe(e)?(r="fn",n.fn=e):ft(e)?r=e:e===void 0?r=t?"left":null:Array.isArray(e)?(r="absolute",n.x=e[0],n.y=e[1]):$e(e)&&(r=e.name,Se(n,e.args));var s={args:n};return r&&(s.name=r),s},_getLabel:function(e,t){var n=e.label||{},r=n;return r.position=this._getPosition(n.position,t),r}};const US={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},t={};He(e.items).forEach(function(c){t[c.id]=!0});var n=this.previous("ports")||{},r={};He(n.items).forEach(function(c){t[c.id]||(r[c.id]=!0)});var s=this.graph;if(s&&!rn(r)){var a=s.getConnectedLinks(this,{inbound:!0});a.forEach(function(c){r[c.get("target").port]&&c.remove()});var l=s.getConnectedLinks(this,{outbound:!0});l.forEach(function(c){r[c.get("source").port]&&c.remove()})}},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return this.getPortIndex(e)!==-1},getPorts:function(){return tn(this.prop("ports/items"))||[]},getGroupPorts:function(e){const t=He(this.prop(["ports","items"])).filter(n=>n.group===e);return tn(t)},getPort:function(e){return tn(He(this.prop("ports/items")).find(function(t){return t.id&&t.id===e}))},getPortGroupNames:function(){return Object.keys(this._portSettingsData.groups)},getPortsPositions:function(e){var t=this._portSettingsData.getGroupPortsMetrics(e,de(this.size()));return t.reduce(function(n,r){var s=r.portTransformation;return n[r.portId]={x:s.x,y:s.y,angle:s.angle},n},{})},getPortIndex:function(e){var t=$e(e)?e.id:e;return this._isValidPortId(t)?He(this.prop("ports/items")).findIndex(function(n){return n.id===t}):-1},addPort:function(e,t){if(!$e(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var n=Se([],this.prop("ports/items"));return n.push(e),this.prop("ports/items",n,t),this},insertPort:function(e,t,n){const r=typeof e=="number"?e:this.getPortIndex(e);if(!$e(t)||Array.isArray(t))throw new Error("dia.Element: insertPort requires an object.");const s=Se([],this.prop("ports/items"));return s.splice(r,0,t),this.prop("ports/items",s,n),this},portProp:function(e,t,n,r){var s=this.getPortIndex(e);if(s===-1)throw new Error("Element: unable to find port with id "+e);var a=Array.prototype.slice.call(arguments,1);return Array.isArray(t)?a[0]=["ports","items",s].concat(t):ft(t)?a[0]=["ports/items/",s,"/",t].join(""):(a=["ports/items/"+s],ct(t)&&(a.push(t),a.push(n))),this.prop.apply(this,a)},_validatePorts:function(){var e=this.get("ports")||{},t=[];e=e||{};var n=He(e.items);return n.forEach(function(r){typeof r!="object"&&t.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),ri(n,"id").length!==n.length&&t.push("Element: found id duplicities in ports."),t},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return e!=null&&!$e(e)},addPorts:function(e,t){return e.length&&this.prop("ports/items",Se([],this.prop("ports/items")).concat(e),t),this},removePort:function(e,t){const n=t||{},r=this.getPortIndex(e);if(r!==-1){const s=Se([],this.prop(["ports","items"]));s.splice(r,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],s,n),this.stopBatch("port-remove")}return this},removePorts:function(e,t){let n,r;if(Array.isArray(e)){if(n=t||{},e.length===0)return this.this;r=Se([],this.prop(["ports","items"])).filter(function(a){return!e.some(function(l){const c=$e(l)?l.id:l;return a.id===c})})}else n=e||{},r=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],r,n),this.stopBatch("port-remove"),this},_createPortData:function(){var e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));var t;this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new Cv(this.get("ports"));var n=this._portSettingsData.getPorts();if(t){var r=n.filter(function(a){if(!t.find(function(l){return l.id===a.id}))return a}),s=t.filter(function(a){if(!n.find(function(l){return l.id===a.id}))return a});s.length>0&&this.trigger("ports:remove",this,s),r.length>0&&this.trigger("ports:add",this,r)}}},GS={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],t=this._getContainerElement(),n=0,r=t.node.childNodes.length;n<r;n++)e.push(t.node.childNodes[n]);var s=Jx(this.model._portSettingsData.getPorts(),"z"),a="auto";He(s[a]).forEach(function(g){var d=this._getPortElement(g);t.append(d),e.push(d)},this);for(var l=Object.keys(s),c=0;c<l.length;c++){var f=l[c];if(f!==a){var p=parseInt(f,10);this._appendPorts(s[f],p,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,t,n){var r=this._getContainerElement(),s=He(e).map(this._getPortElement,this);n[t]||t<0?ne(n[Math.max(t,0)]).before(s):r.append(s)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNodes:function(e,t){const n=this._portElementsCache[e];if(!n)return[];if(!t)return[n.portContentElement.node];const r=n.portElement.node,s=n.portSelectors;return this.findBySelector(t,r,s)},findPortNode:function(e,t){const[n=null]=this.findPortNodes(e,t);return n},_updatePorts:function(){this._updatePortGroup(void 0);var e=Object.keys(this.model._portSettingsData.groups);e.forEach(this._updatePortGroup,this)},_removePorts:function(){Vn(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let t,n,r,s;var a=ne(this.portContainerMarkup).addClass("joint-port"),l=this._getPortMarkup(e);if(Array.isArray(l)){var c=this.parseDOMJSON(l,a.node),f=c.fragment;f.childNodes.length>1?t=ne("g").append(f):t=ne(f.firstChild),s=c.selectors}else t=ne(l),Array.isArray(t)&&(t=ne("g").append(t));if(!t)throw new Error("ElementView: Invalid port markup.");t.attr({port:e.id,"port-group":e.group}),Rt(e.id)&&t.attr("port-id-type","number");const p=this._getPortLabelMarkup(e.label);if(Array.isArray(p)){const{fragment:T,selectors:P}=this.parseDOMJSON(p,a.node),C=T.childNodes.length;C>0&&(r=P,n=C===1?ne(T.firstChild):ne("g").append(T))}else n=ne(p),Array.isArray(n)&&(n=ne("g").append(n));var g;if(s&&r){for(var d in r)if(s[d]&&d!==this.selector)throw new Error("ElementView: selectors within port must be unique.");g=Se({},s,r)}else g=s||r||{};const x="portRoot",w="labelRoot",E="labelText";if(x in g||(g[x]=t.node),n){const T=n.node;if(w in g||(g[w]=T),!(E in g)){const P=n.tagName()==="TEXT"?T:Array.from(T.querySelectorAll("text"));g[E]=P,r||(r={}),r[E]=P}}return a.append(t.addClass("joint-port-body")),n&&a.append(n.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:a,portLabelElement:n,portSelectors:g,portLabelSelectors:r,portContentElement:t,portContentSelectors:s},a},_updatePortGroup:function(e){for(var t=de(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(e,t),r=0,s=n.length;r<s;r++){var a=n[r],l=a.portId,c=this._portElementsCache[l]||{},f=a.portTransformation,p=a.labelTransformation;p&&c.portLabelElement&&(this.updateDOMSubtreeAttributes(c.portLabelElement.node,p.attrs,{rootBBox:new de(a.labelSize),selectors:c.portLabelSelectors}),this.applyPortTransform(c.portLabelElement,p,-f.angle||0)),this.updateDOMSubtreeAttributes(c.portElement.node,a.portAttrs,{rootBBox:new de(a.portSize),selectors:c.portSelectors}),this.applyPortTransform(c.portElement,f)}},applyPortTransform:function(e,t,n){var r=ne.createSVGMatrix().rotate(n||0).translate(t.x||0,t.y||0).rotate(t.angle||0);e.transform(r,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},bt=$n.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),$n.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,t,n){const r=Rt(t);n=(r?n:e)||{};const{parentRelative:s,deep:a,restrictedArea:l}=n;let c;if(s){if(!this.graph)throw new Error("Element must be part of a graph.");const f=this.getParentCell();f&&!f.isLink()&&(c=f.get("position"))}if(r){if(c&&(e+=c.x,t+=c.y),a||l){const{x:f,y:p}=this.get("position");this.translate(e-f,t-p,n)}else this.set("position",{x:e,y:t},n);return this}else{const f=V(this.get("position"));return s?f.difference(c):f}},translate:function(e,t,n){if(e=e||0,t=t||0,e===0&&t===0)return this;n=n||{},n.translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0},s=n.restrictedArea;if(s&&n.translateBy===this.id)if(typeof s=="function"){var a=s.call(this,r.x+e,r.y+t,n);e=a.x-r.x,t=a.y-r.y}else{var l=this.getBBox({deep:!0}),c=r.x-l.x,f=r.y-l.y,p=Math.max(s.x+c,Math.min(s.x+s.width+c-l.width,r.x+e)),g=Math.max(s.y+f,Math.min(s.y+s.height+f-l.height,r.y+t));e=p-r.x,t=g-r.y}var d={x:r.x+e,y:r.y+t};return n.tx=e,n.ty=t,n.transition?($e(n.transition)||(n.transition={}),this.transition("position",d,Se({},n.transition,{valueFunction:uv.object})),Vn(this.getEmbeddedCells(),"translate",e,t,n)):(this.startBatch("translate",n),this.set("position",d,n),Vn(this.getEmbeddedCells(),"translate",e,t,n),this.stopBatch("translate",n)),this},size:function(e,t,n){var r=this.get("size");return e===void 0?{width:r.width,height:r.height}:($e(e)&&(n=t,t=Rt(e.height)?e.height:r.height,e=Rt(e.width)?e.width:r.width),this.resize(e,t,n))},resize:function(e,t,n){if(n=n||{},this.startBatch("resize",n),n.direction){var r=this.get("size");switch(n.direction){case"left":case"right":t=r.height;break;case"top":case"bottom":e=r.width;break}var s=mn(this.get("angle")||0),a=this.getBBox(),l;if(s){var c={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(c+=Math.floor((s+45)/90),c%=4);var f=a[["bottomLeft","corner","topRight","origin"][c]](),p=V(f).rotate(a.center(),-s),g=Math.sqrt(e*e+t*t)/2,d=c*Math.PI/2;d+=Math.atan(c%2==0?t/e:e/t),d-=qt(s);var x=V.fromPolar(g,d,p);l=V(x).offset(e/-2,t/-2)}else switch(l=a.topLeft(),n.direction){case"top":case"top-right":l.offset(0,a.height-t);break;case"left":case"bottom-left":l.offset(a.width-e,0);break;case"top-left":l.offset(a.width-e,a.height-t);break}this.set("size",{width:e,height:t},n),this.position(l.x,l.y,n)}else this.set("size",{width:e,height:t},n);return this.stopBatch("resize",n),this},scale:function(e,t,n,r){var s=this.getBBox().scale(e,t,n);return this.startBatch("scale",r),this.position(s.x,s.y,r),this.resize(s.width,s.height,r),this.stopBatch("scale"),this},fitEmbeds:function(e){return this.fitToChildren(e)},fitToChildren:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");const n=this.getEmbeddedCells().filter(r=>r.isElement());return n.length===0?this:(this.startBatch("fit-embeds",e),e.deep&&Vn(n,"fitToChildren",e),this._fitToElements(Object.assign({elements:n},e)),this.stopBatch("fit-embeds"),this)},fitParent:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");if(e.deep&&e.terminator&&(e.terminator===this||e.terminator===this.id))return this;const n=this.getParentCell();if(!n||!n.isElement())return this;const r=n.getEmbeddedCells().filter(s=>s.isElement());return r.length===0?this:(this.startBatch("fit-parent",e),n._fitToElements(Object.assign({elements:r},e)),e.deep&&n.fitParent(e),this.stopBatch("fit-parent"),this)},_fitToElements:function(e={}){const t=this.graph.getCellsBBox(e.elements);if(!t)return;const{expandOnly:n,shrinkOnly:r}=e;if(n&&r)return;let{x:s,y:a,width:l,height:c}=t;const{left:f,right:p,top:g,bottom:d}=si(e.padding);s-=f,a-=g,l+=f+p,c+=d+g;let x=new de(s,a,l,c);if(n)x=this.getBBox().union(x);else if(r){const w=this.getBBox().intersect(x);if(!w)return;x=w}this.set({position:{x:x.x,y:x.y},size:{width:x.width,height:x.height}},e)},rotate:function(e,t,n,r){if(n){var s=this.getBBox().center(),a=this.get("size"),l=this.get("position");s.rotate(n,this.get("angle")-e);var c=s.x-a.width/2-l.x,f=s.y-a.height/2-l.y;this.startBatch("rotate",{angle:e,absolute:t,origin:n}),this.position(l.x+c,l.y+f,r),this.rotate(e,t,null,r),this.stopBatch("rotate")}else this.set("angle",t?e:(this.get("angle")+e)%360,r);return this},angle:function(){return mn(this.get("angle")||0)},getBBox:function(e={}){const{graph:t,attributes:n}=this,{deep:r,rotate:s}=e;if(r&&t){const d=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return d.push(this),t.getCellsBBox(d,e)}const{angle:a=0,position:{x:l,y:c},size:{width:f,height:p}}=n,g=new de(l,c,f,p);return s&&g.rotateAroundCenter(a),g},getPointFromConnectedLink:function(e,t){var n=this.getBBox(),r=n.center(),s=e.get(t);if(!s)return r;var a=s.port;if(!a||!this.hasPort(a))return r;var l=this.portProp(a,["group"]),c=this.getPortsPositions(l),f=new V(c[a]).offset(n.origin()),p=this.angle();return p&&f.rotate(r,-p),f}});Se(bt.prototype,US);const wl=$n.extend({defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,x:"calc(x)",y:"calc(y)",width:"calc(w)",height:"calc(h)"}},position:{distance:.5}}},defaults:{source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,t,n){if(e===void 0)return Lt(this.get("source"));var r,s,a=e instanceof $n;if(a)return r=Lt(t)||{},r.id=e.id,s=n,this.set("source",r,s);var l=!ct(e);return l?(r=Lt(t)||{},r.x=e.x,r.y=e.y,s=n,this.set("source",r,s)):(r=e,s=t,this.set("source",r,s))},target:function(e,t,n){if(e===void 0)return Lt(this.get("target"));var r,s,a=e instanceof $n;if(a)return r=Lt(t)||{},r.id=e.id,s=n,this.set("target",r,s);var l=!ct(e);return l?(r=Lt(t)||{},r.x=e.x,r.y=e.y,s=n,this.set("target",r,s)):(r=e,s=t,this.set("target",r,s))},router:function(e,t,n){if(e===void 0){var r=this.get("router");return r?typeof r=="object"?Lt(r):r:null}var s=typeof e=="object"||typeof e=="function",a=s?e:{name:e,args:t},l=s?t:n;return this.set("router",a,l)},connector:function(e,t,n){if(e===void 0){var r=this.get("connector");return r?typeof r=="object"?Lt(r):r:null}var s=typeof e=="object"||typeof e=="function",a=s?e:{name:e,args:t},l=s?t:n;return this.set("connector",a,l)},label:function(e,t,n){var r=this.labels();return e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=r.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],t,n)},labels:function(e,t){return arguments.length===0?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,t))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,t,n){if(!t)throw new Error("dia.Link: no label provided");var r=this.labels(),s=r.length;return e=isFinite(e)&&e!==null?e|0:s,e<0&&(e=s+e+1),r.splice(e,0,t),this.labels(r,n)},appendLabel:function(e,t){return this.insertLabel(-1,e,t)},removeLabel:function(e,t){var n=this.labels();return e=isFinite(e)&&e!==null?e|0:-1,n.splice(e,1),this.labels(n,t)},vertex:function(e,t,n){var r=this.vertices();if(e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=r.length+e),arguments.length<=1)return this.prop(["vertices",e]);var s=this._normalizeVertex(t);return this.prop(["vertices",e],s,n)},vertices:function(e,t){if(arguments.length===0)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var n=[],r=0;r<e.length;r++){var s=e[r],a=this._normalizeVertex(s);n.push(a)}return this.set("vertices",n,t)},insertVertex:function(e,t,n){if(!t)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),s=r.length;e=isFinite(e)&&e!==null?e|0:s,e<0&&(e=s+e+1);var a=this._normalizeVertex(t);return r.splice(e,0,a),this.vertices(r,n)},removeVertex:function(e,t){var n=this.vertices();return e=isFinite(e)&&e!==null?e|0:-1,n.splice(e,1),this.vertices(n,t)},_normalizeVertex:function(e){var t=!ct(e);return t?{x:e.x,y:e.y}:e},translate:function(e,t,n){return n=n||{},n.translateBy=n.translateBy||this.id,n.tx=e,n.ty=t,this.applyToPoints(function(r){return{x:(r.x||0)+e,y:(r.y||0)+t}},n)},scale:function(e,t,n,r){return this.applyToPoints(function(s){return V(s).scale(e,t,n).toJSON()},r)},applyToPoints:function(e,t){if(!Xe(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:r,target:s}=this.attributes;r.id||(n.source=e(r)),s.id||(n.target=e(s));var a=this.vertices();return a.length>0&&(n.vertices=a.map(e)),this.set(n,t)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new V(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new V(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(V),this.getTargetPoint()];return new Je(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var t;if(this.graph){var n=this.getSourceElement(),r=this.getTargetElement(),s=this.getParentCell();n&&r&&(n===r||n.isEmbeddedIn(r)?t=r:r.isEmbeddedIn(n)?t=n:t=this.graph.getCommonAncestor(n,r)),s&&(!t||t.id!==s.id)&&s.unembed(this,e),t&&t.embed(this,e)}return t},hasLoop:function(e){e=e||{};var{source:t,target:n}=this.attributes,r=t.id,s=n.id;if(!r||!s)return!1;var a=r===s;if(!a&&e.deep&&this.graph){var l=this.getSourceCell(),c=this.getTargetCell();a=l.isEmbeddedIn(c)||c.isEmbeddedIn(l)}return a},getSourceCell:function(){const{graph:e,attributes:t}=this;var n=t.source;return n&&n.id&&e&&e.getCell(n.id)||null},getSourceElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:t}=this;var n=t.target;return n&&n.id&&e&&e.getCell(n.id)||null},getTargetElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var t=[this,this.getSourceElement(),this.getTargetElement()].filter(function(n){return!!n});e=this.graph.getCommonAncestor.apply(this.graph,t)}return e||null},isRelationshipEmbeddedIn:function(e){var t=ft(e)||Rt(e)?e:e.id,n=this.getRelationshipAncestor();return!!n&&(n.id===t||n.isEmbeddedIn(t))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},t={};return t.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,t.position=e.position,t.attrs=e.attrs,t.size=e.size,t}},{endsEqual:function(e,t){var n=e.port===t.port||!e.port&&!t.port;return e.id===t.id&&n}}),_v={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))},isSafari:function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)}},addTest:function(e,t){return this._tests[e]=t},test:function(e){var t=this._tests[e];if(!t)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[e];if(typeof n<"u")return n;try{n=t()}catch{n=!1}return this._results[e]=n,n}},$S=bt.define("standard.Rectangle",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),HS=bt.define("standard.Circle",{attrs:{root:{cursor:"move"},body:{cx:"calc(s/2)",cy:"calc(s/2)",r:"calc(s/2)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),WS=bt.define("standard.Ellipse",{attrs:{root:{cursor:"move"},body:{cx:"calc(w/2)",cy:"calc(h/2)",rx:"calc(w/2)",ry:"calc(h/2)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),jS=bt.define("standard.Path",{attrs:{root:{cursor:"move"},body:{d:"M 0 0 H calc(w) V calc(h) H 0 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),qS=bt.define("standard.Polygon",{attrs:{root:{cursor:"move"},body:{points:"0 0 calc(w) 0 calc(w) calc(h) 0 calc(h)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),YS=bt.define("standard.Polyline",{attrs:{root:{cursor:"move"},body:{points:"0 0 calc(w) 0 calc(w) calc(h) 0 calc(h)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),XS=bt.define("standard.Image",{attrs:{root:{cursor:"move"},image:{width:"calc(w)",height:"calc(h)"},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),ZS=bt.define("standard.BorderedImage",{attrs:{root:{cursor:"move"},border:{width:"calc(w)",height:"calc(h)",stroke:"#333333",strokeWidth:2},background:{width:"calc(w-1)",height:"calc(h-1)",x:.5,y:.5,fill:"#FFFFFF"},image:{width:"calc(w-1)",height:"calc(h-1)",x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),QS=bt.define("standard.EmbeddedImage",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{width:"calc(0.3*w)",height:"calc(h-20)",x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",x:"calc(0.3*w+20)",y:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),KS=bt.define("standard.InscribedImage",{attrs:{root:{cursor:"move"},border:{rx:"calc(w/2)",ry:"calc(h/2)",cx:"calc(w/2)",cy:"calc(h/2)",stroke:"#333333",strokeWidth:2},background:{rx:"calc(w/2)",ry:"calc(h/2)",cx:"calc(w/2)",cy:"calc(h/2)",fill:"#FFFFFF"},image:{width:"calc(0.68*w)",height:"calc(0.68*h)",x:"calc(0.16*w)",y:"calc(0.16*h)",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),JS=bt.define("standard.HeaderedRectangle",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{width:"calc(w)",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2+15)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]});var wc=10;const eE=bt.define("standard.Cylinder",{attrs:{root:{cursor:"move"},body:{lateralArea:wc,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{cx:"calc(w/2)",cy:wc,rx:"calc(w/2)",ry:wc,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+15)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,t){if(e===void 0)return this.attr("body/lateralArea");var n={lateralArea:e},r=Xt(e),s=r?`calc(${parseFloat(e)/100}*h)`:e,a={cy:s,ry:s};return this.attr({body:n,top:a},t)}},{attributes:{"lateral-area":{set:function(e,t){var n=Xt(e);n&&(e=parseFloat(e)/100);var r=t.x,s=t.y,a=t.width,l=t.height,c=a/2,f=n?l*e:e,p=ne.KAPPA,g=p*c,d=p*(n?l*e:e),x=r,w=r+a/2,E=r+a,T=s+f,P=T-f,C=s+l-f,L=s+l,M=["M",x,T,"L",x,C,"C",r,C+d,w-g,L,w,L,"C",w+g,L,E,C+d,E,C,"L",E,T,"C",E,T-d,w+g,P,w,P,"C",w-g,P,x,T-d,x,T,"Z"];return{d:M.join(" ")}},unset:"d"}}});var tE={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},nE={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},rE=_v.test("svgforeignobject")?tE:nE;const iE=bt.define("standard.TextBlock",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{width:"calc(w)",height:"calc(h)"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},rE]},{attributes:{text:{set:function(e,t,n,r){if(n instanceof HTMLElement)n.textContent=e;else{var s=r.style||{},a={text:e,width:-5,height:"100%"},l=Se({"text-vertical-anchor":"middle"},s);return yv["text-wrap"].set.call(this,a,t,n,l),{fill:s.color||null}}},unset:function(e){if(e.textContent="",e instanceof SVGElement)return"fill"},position:function(e,t,n){if(n instanceof SVGElement)return t.center()}}}}),kv=wl.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),sE=wl.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),oE=wl.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,transform:"translate(3,6)",stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]}),aE=Object.freeze(Object.defineProperty({__proto__:null,BorderedImage:ZS,Circle:HS,Cylinder:eE,DoubleLink:sE,Ellipse:WS,EmbeddedImage:QS,HeaderedRectangle:JS,Image:XS,InscribedImage:KS,Link:kv,Path:jS,Polygon:qS,Polyline:YS,Rectangle:$S,ShadowLink:oE,TextBlock:iE},Symbol.toStringTag,{value:"Module"})),lE=Object.freeze(Object.defineProperty({__proto__:null,standard:aE},Symbol.toStringTag,{value:"Module"})),Hi={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},uE=Object.values(Hi),cE=10,fE=1,Cf=function(e,t,n=[],r={}){const{cornerType:s=Hi.POINT,cornerRadius:a=cE,cornerPreserveAspectRatio:l=!1,precision:c=fE,raw:f=!1}=r;if(uE.indexOf(s)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let p;if(s===Hi.POINT||!a){const g=[e].concat(n).concat([t]),d=new Je(g);p=new Ce(d)}else{p=new Ce,p.appendSegment(Ce.createSegment("M",e));let g;const d=n.length;for(let x=0;x<d;x++){const w=new V(n[x]),E=n[x-1]||e,T=n[x+1]||t,P=g||w.distance(E)/2;g=w.distance(T)/2;let C,L;l?C=L=-Math.min(a,P,g):(C=-Math.min(a,P),L=-Math.min(a,g));const M=w.clone().move(E,C).round(c),F=w.clone().move(T,L).round(c);switch(p.appendSegment(Ce.createSegment("L",M)),s){case Hi.CUBIC:{const $=.3333333333333333,X=2/3,y=new V($*M.x+X*w.x,X*w.y+$*M.y),S=new V($*F.x+X*w.x,X*w.y+$*F.y);p.appendSegment(Ce.createSegment("C",y,S,F));break}case Hi.LINE:{p.appendSegment(Ce.createSegment("L",F));break}case Hi.GAP:{p.appendSegment(Ce.createSegment("M",F));break}}}p.appendSegment(Ce.createSegment("L",t))}return f?p:p.serialize()};var hE=5,tg=["arc","gap","cubic"],dE=0,ng=1,pE=["smooth"],za=1/3,Va=2/3;function rg(e,t){let{x:n,y:r}=e,{x:s,y:a}=t;if(n>s){let l=n;n=s,s=l,l=r,r=a,a=l}if(r>a){let l=n;n=s,s=l,l=r,r=a,a=l}return[new V(n,r),new V(s,a)]}function gE(e,t){const[{x:n,y:r},{x:s,y:a}]=rg(e.start,e.end),[{x:l,y:c},{x:f,y:p}]=rg(t.start,t.end),g=n<=f&&l<=s,d=r<=p&&c<=a;return g&&d}function Sc(e,t,n){var r=[].concat(e,n,t);return r.reduce(function(s,a,l){var c=r[l+1];return c!=null&&(s[l]=ei(a,c)),s},[])}function mE(e){var t=e.paper,n=t._jumpOverUpdateList;if(n==null){n=t._jumpOverUpdateList=[];var r=t.model;r.on("batch:stop",function(){this.hasActiveBatch()||vE(t)}),r.on("reset",function(){n=t._jumpOverUpdateList=[]})}n.indexOf(e)<0&&(n.push(e),e.listenToOnce(e.model,"change:connector remove",function(){n.splice(n.indexOf(e),1)}))}function vE(e){for(var t=e._jumpOverUpdateList,n=0;n<t.length;n++){const r=t[n],s=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(s)}}function yE(e,t){return He(t).reduce(function(n,r){var s=e.intersection(r);return s&&n.push(s),n},[])}function ig(e,t){return ei(e,t).squaredLength()}function xE(e,t,n){return t.reduce(function(r,s,a){if(s.skip===!0)return r;var l=r.pop()||e,c=Qa(s).move(l.start,-n),f=Qa(s).move(l.start,+n),p=t[a+1];if(p!=null){var g=f.distance(p);g<=n&&(f=p.move(l.start,g),p.skip=!0)}else{var d=c.distance(l.end);if(d<n*2+ng)return r.push(l),r}var x=f.distance(l.start);if(x<n*2+ng)return r.push(l),r;var w=ei(c,f);return w.isJump=!0,r.push(ei(l.start,c),w,ei(f,l.end)),r},[])}function sg(e,t,n,r){var s=new Ce,a;return a=Ce.createSegment("M",e[0].start),s.appendSegment(a),He(e).forEach(function(l,c){if(l.isJump){var f,p,g,d;if(n==="arc"){f=-90,p=l.start.difference(l.end);var x=+(p.x<0||p.x===0&&p.y<0);x&&(f+=180);var w=l.midpoint(),E=new ve(w,l.end).rotate(w,f),T;T=new ve(l.start,w),g=T.pointAt(2/3).rotate(l.start,f),d=E.pointAt(1/3).rotate(E.end,-f),a=Ce.createSegment("C",g,d,E.end),s.appendSegment(a),T=new ve(w,l.end),g=E.pointAt(1/3).rotate(E.end,f),d=T.pointAt(1/3).rotate(l.end,-f),a=Ce.createSegment("C",g,d,l.end),s.appendSegment(a)}else if(n==="gap")a=Ce.createSegment("M",l.end),s.appendSegment(a);else if(n==="cubic"){f=l.start.theta(l.end);var P=t*.6,C=t*1.35;p=l.start.difference(l.end),x=+(p.x<0||p.x===0&&p.y<0),x&&(C*=-1),g=V(l.start.x+P,l.start.y+C).rotate(l.start,f),d=V(l.end.x-P,l.end.y+C).rotate(l.end,f),a=Ce.createSegment("C",g,d,l.end),s.appendSegment(a)}}else{var L=e[c+1];r==0||!L||L.isJump?(a=Ce.createSegment("L",l.end),s.appendSegment(a)):wE(r,s,l.end,l.start,L.end)}}),s}function wE(e,t,n,r,s){var a=n.distance(r)/2,l=n.distance(s)/2,c=-Math.min(e,a),f=-Math.min(e,l),p=n.clone().move(r,c).round(),g=n.clone().move(s,f).round(),d=new V(za*p.x+Va*n.x,Va*n.y+za*p.y),x=new V(za*g.x+Va*n.x,Va*n.y+za*g.y),w;w=Ce.createSegment("L",p),t.appendSegment(w),w=Ce.createSegment("C",d,x,g),t.appendSegment(w)}const SE=function(e,t,n,r){mE(this);var s=r.raw,a=r.size||hE,l=r.jump&&(""+r.jump).toLowerCase(),c=r.radius||dE,f=r.ignoreConnectors||pE;tg.indexOf(l)===-1&&(l=tg[0]);var p=this.paper,g=p.model,d=g.getLinks();if(d.length===1)return sg(Sc(e,t,n),a,l,c);var x=this.model,w=d.indexOf(x),E=p.options.defaultConnector||{},T=d.filter(function($,X){var y=$.get("connector")||E;return He(f).includes(y.name)?!1:X>w?y.name!=="jumpover":!0}),P=T.map(function($){return p.findViewByModel($)}),C=Sc(e,t,n),L=P.map(function($){return $==null?[]:$===this?C:Sc($.sourcePoint,$.targetPoint,$.route)},this),M=C.reduce(function($,X){var y=T.reduce(function(S,A,_){if(A!==x){const R=L[_].slice(),G=R.findIndex(J=>gE(X,J));G>-1&&X.containsPoint(R[G].end)&&R.splice(G+1,1);const j=yE(X,R);S.push.apply(S,j)}return S},[]).sort(function(S,A){return ig(X.start,S)-ig(X.start,A)});return y.length>0?$.push.apply($,xE(X,y,a)):$.push(X),$},[]),F=sg(M,a,l,c);return s?F:F.serialize()},EE=function(e,t,n=[],r={}){const{raw:s}=r;return Cf(e,t,n,{cornerType:"point",raw:s})},AE=10,bE=0,PE=function(e,t,n=[],r={}){const{radius:s=AE,raw:a}=r;return Cf(e,t,n,{cornerType:"cubic",cornerRadius:s,precision:bE,raw:a})},TE=function(e,t,n,r){var s=r&&r.raw,a;if(n&&n.length!==0){var l=[e].concat(n).concat([t]),c=Ye.throughPoints(l);a=new Ce(c)}else{a=new Ce;var f;if(f=Ce.createSegment("M",e),a.appendSegment(f),Math.abs(e.x-t.x)>=Math.abs(e.y-t.y)){var p=(e.x+t.x)/2;f=Ce.createSegment("C",p,e.y,p,t.y,t.x,t.y),a.appendSegment(f)}else{var g=(e.y+t.y)/2;f=Ce.createSegment("C",e.x,g,t.x,g,t.x,t.y),a.appendSegment(f)}}return s?a:a.serialize()},dn={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Ft={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},_f=function(e,t,n=[],r={},s){const a=!!r.raw,{direction:l=dn.AUTO,precision:c=3}=r,f={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new V(r.sourceTangent):null,targetTangent:r.targetTangent?new V(r.targetTangent):null,rotate:!!r.rotate};typeof r.sourceDirection=="string"?f.sourceDirection=r.sourceDirection:typeof r.sourceDirection=="number"?f.sourceDirection=new V(1,0).rotate(null,r.sourceDirection):f.sourceDirection=r.sourceDirection?new V(r.sourceDirection).normalize():null,typeof r.targetDirection=="string"?f.targetDirection=r.targetDirection:typeof r.targetDirection=="number"?f.targetDirection=new V(1,0).rotate(null,r.targetDirection):f.targetDirection=r.targetDirection?new V(r.targetDirection).normalize():null;const p=[e,...n,t].map(T=>new V(T));let g;if(f.sourceTangent)g=f.sourceTangent;else{const T=ME(s,p,l,f),P=p[0].distance(p[1])*f.coeff,C=p[1].difference(p[0]).normalize(),L=Gc(T,C);if(L>Math.PI/4){const M=P+(L-Math.PI/4)*f.angleTangentCoefficient;g=T.clone().scale(M,M)}else g=T.clone().scale(P,P)}let d;if(f.targetTangent)d=f.targetTangent;else{const T=NE(s,p,l,f),P=p.length-1,C=p[P-1].distance(p[P])*f.coeff,L=p[P-1].difference(p[P]).normalize(),M=Gc(T,L);if(M>Math.PI/4){const F=C+(M-Math.PI/4)*f.angleTangentCoefficient;d=T.clone().scale(F,F)}else d=T.clone().scale(C,C)}const w=IE(p,g,d,f).map(T=>RE(T,f)),E=new Ce(w).round(c);return a?E:E.serialize()};_f.Directions=dn;_f.TangentDirections=Ft;function CE(e,t,n){const{sourceBBox:r}=e;let s,a;if(!e.sourceView)r.x>t[1].x?s="right":s="left";else if(a=e.sourceView.model.angle(),n.rotate&&a){const c=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),f=t[0].clone();f.rotate(r.center(),a),s=c.sideNearestToPoint(f)}else s=r.sideNearestToPoint(t[0]);let l;switch(s){case"left":l=new V(-1,0);break;case"right":default:l=new V(1,0);break}return n.rotate&&a&&l.rotate(null,-a),l}function _E(e,t,n){const{targetBBox:r}=e;let s,a;if(!e.targetView)r.x>t[t.length-2].x?s="left":s="right";else if(a=e.targetView.model.angle(),n.rotate&&a){const c=e.targetView.getNodeUnrotatedBBox(e.targetView.el),f=t[t.length-1].clone();f.rotate(r.center(),a),s=c.sideNearestToPoint(f)}else s=r.sideNearestToPoint(t[t.length-1]);let l;switch(s){case"left":l=new V(-1,0);break;case"right":default:l=new V(1,0);break}return n.rotate&&a&&l.rotate(null,-a),l}function kE(e,t,n){const{sourceBBox:r}=e;let s,a;if(!e.sourceView)r.y>t[1].y?s="bottom":s="top";else if(a=e.sourceView.model.angle(),n.rotate&&a){const c=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),f=t[0].clone();f.rotate(r.center(),a),s=c.sideNearestToPoint(f)}else s=r.sideNearestToPoint(t[0]);let l;switch(s){case"top":l=new V(0,-1);break;case"bottom":default:l=new V(0,1);break}return n.rotate&&a&&l.rotate(null,-a),l}function LE(e,t,n){const{targetBBox:r}=e;let s,a;if(!e.targetView)r.y>t[t.length-2].y?s="top":s="bottom";else if(a=e.targetView.model.angle(),n.rotate&&a){const c=e.targetView.getNodeUnrotatedBBox(e.targetView.el),f=t[t.length-1].clone();f.rotate(r.center(),a),s=c.sideNearestToPoint(f)}else s=r.sideNearestToPoint(t[t.length-1]);let l;switch(s){case"top":l=new V(0,-1);break;case"bottom":default:l=new V(0,1);break}return n.rotate&&a&&l.rotate(null,-a),l}function og(e,t,n){const{sourceBBox:r}=e;let s,a;if(!e.sourceView)s=r.sideNearestToPoint(t[1]);else if(a=e.sourceView.model.angle(),n.rotate&&a){const c=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),f=t[0].clone();f.rotate(r.center(),a),s=c.sideNearestToPoint(f)}else s=r.sideNearestToPoint(t[0]);let l;switch(s){case"top":l=new V(0,-1);break;case"bottom":l=new V(0,1);break;case"right":l=new V(1,0);break;case"left":l=new V(-1,0);break}return n.rotate&&a&&l.rotate(null,-a),l}function ag(e,t,n){const{targetBBox:r}=e;let s,a;if(!e.targetView)s=r.sideNearestToPoint(t[t.length-2]);else if(a=e.targetView.model.angle(),n.rotate&&a){const c=e.targetView.getNodeUnrotatedBBox(e.targetView.el),f=t[t.length-1].clone();f.rotate(r.center(),a),s=c.sideNearestToPoint(f)}else s=r.sideNearestToPoint(t[t.length-1]);let l;switch(s){case"top":l=new V(0,-1);break;case"bottom":l=new V(0,1);break;case"right":l=new V(1,0);break;case"left":l=new V(-1,0);break}return n.rotate&&a&&l.rotate(null,-a),l}function lg(e,t,n){return t[1].difference(t[0]).normalize()}function ug(e,t,n){const r=t.length-1;return t[r-1].difference(t[r]).normalize()}function cg(e,t,n){const{sourceBBox:r}=e,s=r.center();return t[0].difference(s).normalize()}function fg(e,t,n){const{targetBBox:r}=e,s=r.center();return t[t.length-1].difference(s).normalize()}function ME(e,t,n,r){if(r.sourceDirection)switch(r.sourceDirection){case Ft.UP:return new V(0,-1);case Ft.DOWN:return new V(0,1);case Ft.LEFT:return new V(-1,0);case Ft.RIGHT:return new V(1,0);case Ft.AUTO:return og(e,t,r);case Ft.CLOSEST_POINT:return lg(e,t);case Ft.OUTWARDS:return cg(e,t);default:return r.sourceDirection}switch(n){case dn.HORIZONTAL:return CE(e,t,r);case dn.VERTICAL:return kE(e,t,r);case dn.CLOSEST_POINT:return lg(e,t);case dn.OUTWARDS:return cg(e,t);case dn.AUTO:default:return og(e,t,r)}}function NE(e,t,n,r){if(r.targetDirection)switch(r.targetDirection){case Ft.UP:return new V(0,-1);case Ft.DOWN:return new V(0,1);case Ft.LEFT:return new V(-1,0);case Ft.RIGHT:return new V(1,0);case Ft.AUTO:return ag(e,t,r);case Ft.CLOSEST_POINT:return ug(e,t);case Ft.OUTWARDS:return fg(e,t);default:return r.targetDirection}switch(n){case dn.HORIZONTAL:return _E(e,t,r);case dn.VERTICAL:return LE(e,t,r);case dn.CLOSEST_POINT:return ug(e,t);case dn.OUTWARDS:return fg(e,t);case dn.AUTO:default:return ag(e,t,r)}}function OE(e,t){const n=Math.cos(t),r=Math.sin(t),s=n*e.x-r*e.y,a=r*e.x+n*e.y;e.x=s,e.y=a}function Gc(e,t){let n=e.dot(t)/(e.magnitude()*t.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function hg(e,t){return e.x*t.y-e.y*t.x}function IE(e,t,n,r){const{tau:s,coeff:a}=r,l=[],c=[],f=[],p=e.length-1;for(let g=0;g<p;g++)l[g]=e[g].distance(e[g+1]);c[0]=t,c[p]=n;for(let g=1;g<p;g++){let d,x;g===1?d=e[g-1].clone().offset(c[g-1].x,c[g-1].y):d=e[g-1].clone(),g===p-1?x=e[g+1].clone().offset(c[g+1].x,c[g+1].y):x=e[g+1].clone();const w=d.difference(e[g]).normalize(),E=x.difference(e[g]).normalize(),T=Gc(w,E);let P=(Math.PI-T)/2,C;const L=hg(w,E);let M;M=hg(e[g].difference(e[g+1]),e[g].difference(e[g-1])),L<0&&(P=-P),T<Math.PI/2&&(P<0&&M<0||P>0&&M>0)&&(P=P-Math.PI),C=E.clone(),OE(C,P);const F=C.clone(),$=C.clone(),X=l[g-1]*a,y=l[g]*a;F.scale(X,X),$.scale(y,y),c[g]=[F,$]}for(let g=0;g<p;g++){let d,x;g===0?d=e[g+1].difference(c[g].x/s,c[g].y/s):d=e[g+1].difference(c[g][1].x/s,c[g][1].y/s),g===p-1?x=e[g].clone().offset(c[g+1].x/s,c[g+1].y/s):x=e[g].difference(c[g+1][0].x/s,c[g+1][0].y/s),f[g]=[d,e[g],e[g+1],x]}return f}function RE(e,t){const{tau:n}=t,r=new V;r.x=e[1].x+(e[2].x-e[0].x)/(6*n),r.y=e[1].y+(e[2].y-e[0].y)/(6*n);const s=new V;return s.x=e[2].x+(e[3].x-e[1].x)/(6*n),s.y=e[2].y+(e[3].y-e[1].y)/(6*n),new Ye(e[1],r,s,e[2])}const FE=Object.freeze(Object.defineProperty({__proto__:null,curve:_f,jumpover:SE,normal:EE,rounded:PE,smooth:TE,straight:Cf},Symbol.toStringTag,{value:"Module"}));var Jr=function(e){this.cid=io("view"),this.preinitialize.apply(this,arguments),Se(this,nw(e,BE)),this._ensureElement(),this.initialize.apply(this,arguments)},DE=/^(\S+)\s*(.*)$/,BE=["model","collection","el","id","attributes","className","tagName","events","style"];Se(Jr.prototype,zt,{tagName:"div",$:function(e){return this.$el.find(e)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof ce?e:ce(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=Ke(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var n=e[t];if(Xe(n)||(n=this[n]),!!n){var r=t.match(DE);this.delegate(r[1],r[2],n.bind(this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(Ke(this,"el"));else{var e=Se({},Ke(this,"attributes"));this.id&&(e.id=Ke(this,"id")),this.className&&(e.class=Ke(this,"className")),this.setElement(this._createElement(Ke(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}});Jr.extend=Pf;const Xr={},Zi=Jr.extend({options:{},theme:null,themeClassNamePrefix:nr("theme-"),requireSetThemeOverride:!1,defaultTheme:Xi.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=Se({},this.options,e),Jr.call(this,e)},initialize:function(){Xr[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return this.el.parentNode!==null},renderChildren:function(e){if(e||(e=Ke(this,"children")),e){var t=this.svgElement,n=ne.namespace[t?"svg":"xhtml"],r=el(e,n);(t?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttributeNode:function(e,t){let n=t;for(;n&&n.nodeType===1;){if(n.getAttribute(e))return n;if(n===this.el)return null;n=n.parentNode}return null},findAttribute:function(e,t){const n=this.findAttributeNode(e,t);return n&&n.getAttribute(e)},_ensureElement:function(){if(this.el)this.setElement(Ke(this,"el"));else{var e=Ke(this,"tagName"),t=Se({},Ke(this,"attributes")),n=Se({},Ke(this,"style"));this.id&&(t.id=Ke(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(t),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(ne.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof ce?e:ce(e),this.el=this.$el[0],this.svgElement&&(this.vel=ne(this.el))},_ensureElClassName:function(){var e=Ke(this,"className");if(e){var t=nr(e);this.svgElement?this.vel.removeClass(e).addClass(t):this.$el.removeClass(e).addClass(t)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,t){return t=t||{},this.theme&&this.requireSetThemeOverride&&!t.override?this:(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e,this)},addThemeClassName:function(e){if(e=e||this.theme,!e)return this;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(t):this.$el.addClass(t),this},removeThemeClassName:function(e){e=e||this.theme;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.removeClass(t):this.$el.removeClass(t),this},onSetTheme:function(e,t){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Xr[this.cid]=null,Jr.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,t,n){if(!t)return this;n||(n={});var r=this.getEventNamespace();for(var s in t){var a=t[s];typeof a!="function"&&(a=this[a]),a&&ce(e).on(s+r,n,a.bind(this))}return this},undelegateElementEvents:function(e){return ce(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,t){return e||(e=Ke(this,"documentEvents")),this.delegateElementEvents(document,e,t)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,t){if(!e)throw new Error("eventData(): event object required.");var n=e.data,r="__"+this.cid+"__";return t===void 0?n?n[r]||{}:{}:(n||(n=e.data={}),n[r]||(n[r]={}),Se(n[r],t),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),t=e[0]&&Se({},e[0])||{},n=e[1]&&Se({},e[1])||{},r=t.render||this.prototype&&this.prototype.render||null;return t.render=function(){return typeof r=="function"&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},t.render.__render__=r,Jr.extend.call(this,t,n)}});var kr=function(e,t){t||(t={}),this.preinitialize.apply(this,arguments),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,Se({silent:!0},t))},zE={add:!0,remove:!0,merge:!0},VE={add:!0,remove:!1},dg=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var r=Array(e.length-n),s=t.length,a;for(a=0;a<r.length;a++)r[a]=e[a+n];for(a=0;a<s;a++)e[a+n]=t[a];for(a=0;a<r.length;a++)e[a+s+n]=r[a]};Se(kr.prototype,zt,{model:hn,preinitialize:function(){},initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},add:function(e,t){return this.set(e,Se({merge:!1},t,VE))},remove:function(e,t){t=Se({},t);var n=!Array.isArray(e);e=n?[e]:e.slice();var r=this._removeModels(e,t);return!t.silent&&r.length&&(t.changes={added:[],merged:[],removed:r},this.trigger("update",this,t)),n?r[0]:r},set:function(e,t){if(e!=null){t=Se({},zE,t);var n=!Array.isArray(e);e=n?[e]:e.slice();var r=t.at;r!=null&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var s=[],a=[],l=[],c=[],f={},p=t.add,g=t.merge,d=t.remove,x=!1,w=this.comparator&&r==null&&t.sort!==!1,E=ft(this.comparator)?this.comparator:null,T,P;for(P=0;P<e.length;P++){T=e[P];var C=this.get(T);if(C){if(g&&T!==C){var L=this._isModel(T)?T.attributes:T;C.set(L,t),l.push(C),w&&!x&&(x=C.hasChanged(E))}f[C.cid]||(f[C.cid]=!0,s.push(C)),e[P]=C}else p&&(T=e[P]=this._prepareModel(T,t),T&&(a.push(T),this._addReference(T,t),f[T.cid]=!0,s.push(T)))}if(d){for(P=0;P<this.length;P++)T=this.models[P],f[T.cid]||c.push(T);c.length&&this._removeModels(c,t)}var M=!1,F=!w&&p&&d;if(s.length&&F?(M=this.length!==s.length||this.models.some(function($,X){return $!==s[X]}),this.models.length=0,dg(this.models,s,0),this.length=this.models.length):a.length&&(w&&(x=!0),dg(this.models,a,r??this.length),this.length=this.models.length),x&&this.sort({silent:!0}),!t.silent){for(P=0;P<a.length;P++)r!=null&&(t.index=r+P),T=a[P],T.trigger("add",T,this,t);(x||M)&&this.trigger("sort",this,t),(a.length||c.length||l.length)&&(t.changes={added:a,removed:c,merged:l},this.trigger("update",this,t))}return n?e[0]:e}},reset:function(e,t){t=t?Lt(t):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,Se({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,Se({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,Se({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return Array.prototype.slice.apply(this.models,arguments)},get:function(e){if(e!=null)return this._byId[e]||this._byId[this.modelId(this._isModel(e)?e.attributes:e,e.idAttribute)]||e.cid&&this._byId[e.cid]},has:function(e){return this.get(e)!=null},at:function(e){return e<0&&(e+=this.length),this.models[e]},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var n=t.length;return Xe(t)&&(t=t.bind(this)),n===1||ft(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e,t){return e[t||this.model.prototype.idAttribute||"id"]},values:function(){return new Qs(this,Lv)},keys:function(){return new Qs(this,Mv)},entries:function(){return new Qs(this,UE)},each:function(e,t){this.models.forEach(e,t)},filter:function(e,t){return this.models.filter(e,t)},find:function(e,t){return this.models.find(e,t)},findIndex:function(e,t){return this.models.findIndex(e,t)},first:function(){return this.models[0]},includes:function(e){return this.models.includes(e)},last:function(){return this.models[this.models.length-1]},isEmpty:function(){return!this.models.length},map:function(e,t){return this.models.map(e,t)},reduce:function(e,t=this.first()){return this.models.reduce(e,t)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?Lt(t):{},t.collection=this;var n;return this.model.prototype?n=new this.model(e,t):n=this.model(e,t),n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeModels:function(e,t){for(var n=[],r=0;r<e.length;r++){var s=this.get(e[r]);if(s){var a=this.models.indexOf(s);this.models.splice(a,1),this.length--,delete this._byId[s.cid];var l=this.modelId(s.attributes,s.idAttribute);l!=null&&delete this._byId[l],t.silent||(t.index=a,s.trigger("remove",s,this,t)),n.push(s),this._removeReference(s,t)}}return e.length>0&&!t.silent&&delete t.index,n},_isModel:function(e){return e instanceof hn},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes,e.idAttribute);n!=null&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes,e.idAttribute);n!=null&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if(t){if((e==="add"||e==="remove")&&n!==this)return;if(e==="changeId"){var s=this.modelId(t.previousAttributes(),t.idAttribute),a=this.modelId(t.attributes,t.idAttribute);s!=null&&delete this._byId[s],a!=null&&(this._byId[a]=t)}}this.trigger.apply(this,arguments)}});var tl=typeof Symbol=="function"&&Symbol.iterator;tl&&(kr.prototype[tl]=kr.prototype.values);var Qs=function(e,t){this._collection=e,this._kind=t,this._index=0},Lv=1,Mv=2,UE=3;tl&&(Qs.prototype[tl]=function(){return this});Qs.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var e=this._collection.at(this._index);this._index++;var t;if(this._kind===Lv)t=e;else{var n=this._collection.modelId(e.attributes,e.idAttribute);this._kind===Mv?t=n:t=[n,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var GE={toArray:1,sortBy:3},$E=[kr,GE,"models"];function HE(e){var t=e[0],n=e[1],r=e[2];iS(t,{sortBy:$a,toArray:He},n,r)}HE($E);kr.extend=Pf;function js(e){return e?Array.isArray(e)?e:[e]:[]}const _n=Zi.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(e,t){const{paper:n}=e;this.cellView=e,this.nodeSelector=t,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:t}=this;return e.isMounted()?(this.update(e,t),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(e,t=null){let n;if(typeof t=="string")n=e.findNode(t);else if(ct(t)){const r=e.model.isLink(),{label:s=null,port:a,selector:l}=t;r&&s!==null?n=e.findLabelNode(s,l):!r&&a?n=e.findPortNode(a,l):n=e.findNode(l)}else t&&(n=ne.toNode(t),n instanceof SVGElement||(n=null));return n||null},getNodeMatrix(e,t){const{options:n}=this,{layer:r}=n,{rotatableNode:s}=e,a=e.getNodeMatrix(t);return s?r?s.contains(t)?a:e.getRootRotateMatrix().inverse().multiply(a):e.getNodeRotateMatrix(t).multiply(a):a},mount(){const{MOUNTABLE:e,cellView:t,el:n,options:r,transformGroup:s,detachedTransformGroup:a,postponedUpdate:l,nodeSelector:c}=this;if(!e||s)return;if(l){this.update(t,c),this.transform();return}const{vel:f,paper:p}=t,{layer:g}=r;if(g){let d;a?(d=a,this.detachedTransformGroup=null):d=ne("g").addClass("highlight-transform").append(n),this.transformGroup=d,p.getLayerView(g).insertSortedNode(d.node,r.z)}else(!n.parentNode||n.nextSibling)&&f.append(n)},unmount(){const{MOUNTABLE:e,transformGroup:t,vel:n}=this;e&&(t?(this.transformGroup=null,this.detachedTransformGroup=t,t.remove()):n.remove())},transform(){const{transformGroup:e,cellView:t,updateRequested:n}=this;if(!e||t.model.isLink()||n)return;const r=t.getRootTranslateMatrix(),s=t.getRootRotateMatrix(),a=r.multiply(s);e.attr("transform",ne.matrixToTransformString(a))},update(){const{node:e,cellView:t,nodeSelector:n,updateRequested:r,id:s}=this;if(r)return;this.postponedUpdate=!1;const a=this.node=this.findNode(t,n);e&&this.unhighlight(t,e),a?(this.highlight(t,a),this.mount()):(this.unmount(),t.notify("cell:highlight:invalid",s,this))},onRemove(){const{node:e,cellView:t,id:n,constructor:r}=this;e&&this.unhighlight(t,e),this.unmount(),r._removeRef(t,n)},highlight(e,t){},unhighlight(e,t){},listenToUpdateAttributes(e){const t=Ke(this,"UPDATE_ATTRIBUTES");!Array.isArray(t)||t.length===0||this.listenTo(e.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:e}=this;if(!e)return;const{model:t,paper:n}=e;Ke(this,"UPDATE_ATTRIBUTES").some(s=>t.hasChanged(s))&&n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(e,t,n){const r=this.uniqueId(t,n);this.add(e,t,r,n)},unhighlight:function(e,t,n){const r=this.uniqueId(t,n);this.remove(e,r)},get(e,t=null){const{cid:n}=e,{_views:r}=this,s=r[n];if(t===null){const a=[];if(!s)return a;for(let l in s){const c=s[l];c instanceof this&&a.push(c)}return a}else{if(!s)return null;if(t in s){const a=s[t];if(a instanceof this)return a}return null}},add(e,t,n,r={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");const s=_n.get(e,n);s&&s.remove();const a=new this(r);return a.id=n,this._addRef(e,n,a),a.requestUpdate(e,t),a.listenToUpdateAttributes(e),a},_addRef(e,t,n){const{cid:r}=e,{_views:s}=this;let a=s[r];a||(a=s[r]={}),a[t]=n},_removeRef(e,t){const{cid:n}=e,{_views:r}=this,s=r[n];if(s){t&&delete s[t];for(let a in s)return;delete r[n]}},remove(e,t=null){js(this.get(e,t)).forEach(n=>{n.remove()})},getAll(e,t=null){const n=[],{_views:r}=this;for(let s in r)for(let a in r[s]){const l=r[s][a];l.cellView.paper===e&&l instanceof this&&(t===null||a===t)&&n.push(l)}return n},removeAll(e,t=null){this.getAll(e,t).forEach(n=>n.remove())},update(e,t=null,n=!1){js(this.get(e,t)).forEach(r=>{(n||r.UPDATABLE)&&r.update()})},transform(e,t=null){js(this.get(e,t)).forEach(n=>{n.UPDATABLE&&n.transform()})},unmount(e,t=null){js(this.get(e,t)).forEach(n=>n.unmount())},mount(e,t=null){js(this.get(e,t)).forEach(n=>n.mount())},uniqueId(e,t=""){return ne.ensureId(e)+JSON.stringify(t)}}),WE=_n.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,t){const{options:n}=this,{useFirstSubpath:r}=n;let s;try{const a=ne(t);if(s=a.convertToPathData().trim(),a.tagName()==="PATH"&&r){const l=s.search(/.M/i)+1;l>0&&(s=s.substr(0,l))}}catch{const l=e.getNodeBoundingRect(t);s=ne.rectToPath(Se({},n,l.toJSON()))}return s},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,t){const{vel:n,options:r}=this,{padding:s,layer:a}=r;let l=this.getNodeMatrix(e,t);if(s){!a&&t===e.el&&n.remove();let c=e.getNodeBoundingRect(t);const f=c.x+c.width/2,p=c.y+c.height/2;c=ne.transformRect(c,l);const g=Math.max(c.width,1),d=Math.max(c.height,1),x=(g+s)/g,w=(d+s)/d,E=ne.createSVGMatrix({a:x,b:0,c:0,d:w,e:f-x*f,f:p-w*p});l=l.multiply(E)}n.attr({d:this.getPathData(e,t),transform:ne.matrixToTransformString(l)})},highlight(e,t){const{vel:n,options:r}=this;n.attr(r.attrs),r.nonScalingStroke&&n.attr("vector-effect","non-scaling-stroke"),e.isNodeConnection(t)?this.highlightConnection(e):this.highlightNode(e,t)}}),pg=20;function jE(e,t){const n=e.children();for(;n.length>0;){const r=n.shift();t(r)&&n.push(...r.children())}}const qE=_n.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:pg,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,t){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:s}=this,a=t.tagName();if(!ne.isSVGGraphicsElement(t)||s.includes(a))return t.remove(),!1;if(r.includes(a)){const l=e.vel.findOne(`#${t.id}`);if(l){const{node:c}=l;let f=e.getNodeBoundingRect(c);e.model.isElement()&&(f=ne.transformRect(f,e.getNodeMatrix(c)));const p=ne("rect",f.toJSON()),{x:g,y:d}=f.center(),{angle:x,cx:w=g,cy:E=d}=l.rotate();x&&p.rotate(x,w,E),t.parent().append(p)}return t.remove(),!1}return n.forEach(l=>{l==="fill"&&t.attr("fill")==="none"||t.removeAttr(l)}),!0},transformMaskRoot(e,t){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach(r=>{t.removeAttr(r)})},getMaskShape(e,t){const{options:n,MASK_REPLACE_TAGS:r}=this,{deep:s}=n,a=t.tagName();let l;if(a==="G"){if(!s)return null;l=t.clone(),jE(l,c=>this.transformMaskChild(e,c))}else{if(r.includes(a))return null;l=t.clone()}return this.transformMaskRoot(e,l),l},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,t){const{VISIBLE:n,INVISIBLE:r,options:s}=this,{padding:a,attrs:l}=s,c=parseFloat(ne("g").attr(l).attr("stroke-width")),f=t.attr("fill")!=="none";let p=parseFloat(t.attr("stroke-width"));isNaN(p)&&(p=1);const g=p+a*2,d=g+c*2;let x=this.getMaskShape(e,t);if(!x){const w=e.getNodeBoundingRect(t.node);w.inflate(w.width?0:.5,w.height?0:.5),x=ne("rect",w.toJSON())}return x.attr(l),ne("mask",{id:this.getMaskId()}).append([x.clone().attr({fill:f?n:"none",stroke:n,"stroke-width":d}),x.clone().attr({fill:f?r:"none",stroke:r,"stroke-width":g})])},removeMask(e){const t=e.svg.getElementById(this.getMaskId());t&&e.defs.removeChild(t)},addMask(e,t){e.defs.appendChild(t.node)},highlight(e,t){const{options:n,vel:r}=this,{padding:s,attrs:a,maskClip:l=pg,layer:c}=n,f="stroke"in a?a.stroke:"#000000";!c&&t===e.el&&r.remove();const p=e.getNodeBoundingRect(t).inflate(s+l),g=this.getNodeMatrix(e,t),d=this.getMask(e,ne(t));this.addMask(e.paper,d),r.attr(p.toJSON()),r.attr({transform:ne.matrixToTransformString(g),mask:`url(#${d.id})`,fill:f})},unhighlight(e){this.removeMask(e.paper)}}),YE=_n.extend({UPDATABLE:!1,MOUNTABLE:!1,highlight:function(e,t){const{alphaValue:n=.3}=this.options;t.style.opacity=n},unhighlight:function(e,t){t.style.opacity=""}}),gg=nr("highlighted"),XE=_n.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:gg},highlight:function(e,t){ne(t).addClass(this.options.className)},unhighlight:function(e,t){ne(t).removeClass(this.options.className)}},{className:gg}),Ec={ROW:"row",COLUMN:"column"},ZE=_n.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(e,t){const n=e.model,{attribute:r,size:s=20,gap:a=5,direction:l=Ec.ROW}=this.options;if(!r)throw new Error("List: attribute is required");const c=typeof s=="number"?{width:s,height:s}:s,f=l===Ec.ROW,p=f?c.width:c.height;let g=n.get(r);Array.isArray(g)||(g=[]);const d=this._prevItems||[],x=g.map((P,C)=>_r(d[C],g[C]));if(d.length!==g.length||x.some(P=>!P)){const P=this.vel.children(),C=g.map((L,M)=>{const F=M in P?P[M].node:null;if(x[M])return F;const $=this.createListItem(L,c,F);if(!$)return null;if(!($ instanceof SVGElement))throw new Error("List: item must be an SVGElement");$.dataset.index=M,$.dataset.attribute=r;const X=M*(p+a);return $.setAttribute("transform",f?`translate(${X}, 0)`:`translate(0, ${X})`),$});this.vel.empty().append(C),this._prevItems=g}const w=g.length,E=w===0?0:w*p+(w-1)*a,T=f?{width:E,height:c.height}:{width:c.width,height:E};this.position(n,T)},position(e,t){const{vel:n,options:r}=this,{margin:s=5,position:a="top-left"}=r,{width:l,height:c}=e.size(),{left:f,right:p,top:g,bottom:d}=si(s),x=new de(f,g,l-(f+p),c-(g+d));let{x:w,y:E}=wv(x,a);switch(a){case at.CENTER:case at.TOP:case at.BOTTOM:{w-=t.width/2;break}case at.RIGHT:case at.BOTTOM_RIGHT:case at.TOP_RIGHT:{w-=t.width;break}}switch(a){case at.CENTER:case at.RIGHT:case at.LEFT:{E-=t.height/2;break}case at.BOTTOM:case at.BOTTOM_RIGHT:case at.BOTTOM_LEFT:{E-=t.height;break}}n.attr("transform",`translate(${w}, ${E})`)}},{Directions:Ec,Positions:at}),QE=Object.freeze(Object.defineProperty({__proto__:null,addClass:XE,list:ZE,mask:qE,opacity:YE,stroke:WE},Symbol.toStringTag,{value:"Module"}));function Sl(e,t,n){if(ct(n)){const{x:s,y:a}=n;if(isFinite(a)){const l=new ve(t,e),{start:c,end:f}=l.parallel(a);t=c,e=f}n=s}if(!isFinite(n))return e;var r=e.distance(t);return n===0&&r>0?e:e.move(t,-Math.min(n,r-1))}function kf(e){var t=e.getAttribute("stroke-width");return t===null?0:parseFloat(t)||0}function KE(e,t,n=0){let r,s,a,l;const{start:c,end:f}=e;switch(t){case"left":r="x",s=f,a=c,l=-1;break;case"right":r="x",s=c,a=f,l=1;break;case"top":r="y",s=f,a=c,l=-1;break;case"bottom":r="y",s=c,a=f,l=1;break;default:return}c[r]<f[r]?s[r]=a[r]:a[r]=s[r],isFinite(n)&&(s[r]+=l*n,a[r]+=l*n)}function JE(e,t,n,r){let{offset:s,alignOffset:a,align:l}=r;return l&&KE(e,l,a),Sl(e.end,e.start,s)}function Nv(e,t,n,r){var s=t.getNodeBBox(n);r.stroke&&s.inflate(kf(n)/2);var a=e.intersect(s),l=a?e.start.chooseClosest(a):e.end;return Sl(l,e.start,r.offset)}function eA(e,t,n,r){var s=t.model.angle();if(s===0)return Nv(e,t,n,r);var a=t.getNodeUnrotatedBBox(n);r.stroke&&a.inflate(kf(n)/2);var l=a.center(),c=e.clone().rotate(l,s),f=c.setLength(1e6).intersect(a),p=f?c.start.chooseClosest(f).rotate(l,-s):e.end;return Sl(p,e.start,r.offset)}function tA(e){if(!e)return null;var t=e;do{var n=t.tagName;if(typeof n!="string")return null;if(n=n.toUpperCase(),n==="G")t=t.firstElementChild;else if(n==="TITLE")t=t.nextElementSibling;else break}while(t);return t}var Ac="segmentSubdivisons",bc="shapeBBox";function nA(e,t,n,r){var s,a,l=r.selector,c=e.end;if(typeof l=="string"?s=t.findNode(l):l===!1?s=n:Array.isArray(l)?s=ts(n,l):s=tA(n),!ne.isSVGGraphicsElement(s)){if(s===n||!ne.isSVGGraphicsElement(n))return c;s=n}var f=t.getNodeShape(s),p=t.getNodeMatrix(s),g=t.getRootTranslateMatrix(),d=t.getRootRotateMatrix(),x=g.multiply(d).multiply(p),w=x.inverse(),E=ne.transformLine(e,w),T=E.start.clone(),P=t.getNodeData(s);if(r.insideout===!1){P[bc]||(P[bc]=f.bbox());var C=P[bc];if(C.containsPoint(T))return c}var L;if(f instanceof Ce){var M=r.precision||2;P[Ac]||(P[Ac]=f.getSegmentSubdivisions({precision:M})),L={precision:M,segmentSubdivisions:P[Ac]}}r.extrapolate===!0&&E.setLength(1e6),a=E.intersect(f,L),a?ne.isArray(a)&&(a=T.chooseClosest(a)):r.sticky===!0&&(f instanceof de?a=f.pointNearestToPoint(T):f instanceof Dt?a=f.intersectionWithLineFromCenterToPoint(T):a=f.closestPoint(T,L));var F=a?ne.transformPoint(a,x):c,$=r.offset||0;return r.stroke&&($+=kf(s)/2),Sl(F,e.start,$)}const rA=JE,iA=Nv,sA=eA,oA=nA,aA=Object.freeze(Object.defineProperty({__proto__:null,anchor:rA,bbox:iA,boundary:oA,rectangle:sA},Symbol.toStringTag,{value:"Module"})),lA=function(e,t,n){return e},uA=function(e,t,n){var r=t.side||"bottom",s=si(t.padding||40),a=n.sourceBBox,l=n.targetBBox,c=a.center(),f=l.center(),p,g,d;switch(r){case"bottom":d=1,p="y",g="height";break;case"top":d=-1,p="y",g="height";break;case"left":d=-1,p="x",g="width";break;case"right":d=1,p="x",g="width";break;default:throw new Error("Router: invalid side")}return c[p]+=d*(a[g]/2+s[r]),f[p]+=d*(l[g]/2+s[r]),d*(c[p]-f[p])>0?f[p]=c[p]:c[p]=f[p],[c].concat(e,f)};var cA={N:"S",S:"N",E:"W",W:"E"},fA={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function nl(e,t,n){var r=new V(e.x,t.y);return n.containsPoint(r)&&(r=new V(t.x,e.y)),r}function $c(e,t){return e[t==="W"||t==="E"?"width":"height"]}function Bt(e,t){return e.x===t.x?e.y>t.y?"N":"S":e.y===t.y?e.x>t.x?"W":"E":null}function Ua(e){return new de(e.x,e.y,0,0)}function rl(e){var t=si(e.padding||e.elementPadding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function Ov(e,t){return e.sourceBBox.clone().moveAndExpand(rl(t))}function Iv(e,t){return e.targetBBox.clone().moveAndExpand(rl(t))}function hA(e,t){if(e.sourceAnchor)return e.sourceAnchor;var n=Ov(e,t);return n.center()}function dA(e,t){if(e.targetAnchor)return e.targetAnchor;var n=Iv(e,t);return n.center()}function Rv(e,t,n){var r=new V(e.x,t.y),s=new V(t.x,e.y),a=Bt(e,r),l=Bt(e,s),c=cA[n],f=a===n||a!==c&&(l===c||l!==n)?r:s;return{points:[f],direction:Bt(f,t)}}function qa(e,t,n){var r=nl(e,t,n);return{points:[r],direction:Bt(r,t)}}function pA(e,t,n,r){var s={},a=[new V(e.x,t.y),new V(t.x,e.y)],l=a.filter(function(d){return!n.containsPoint(d)}),c=l.filter(function(d){return Bt(d,e)!==r}),f;if(c.length>0)f=c.filter(function(d){return Bt(e,d)===r}).pop(),f=f||c[0],s.points=[f],s.direction=Bt(f,t);else{f=tw(a,l)[0];var p=new V(t).move(f,-$c(n,r)/2),g=nl(p,e,n);s.points=[g,p],s.direction=Bt(p,t)}return s}function gA(e,t,n,r){var s=qa(t,e,r),a=s.points[0];if(n.containsPoint(a)){s=qa(e,t,n);var l=s.points[0];if(r.containsPoint(l)){var c=new V(e).move(l,-$c(n,Bt(e,l))/2),f=new V(t).move(a,-$c(r,Bt(t,a))/2),p=new ve(c,f).midpoint(),g=qa(e,p,n),d=Rv(p,t,g.direction);s.points=[g.points[0],d.points[0]],s.direction=d.direction}}return s}function Pc(e,t,n,r,s){var a={},l=n.union(r).inflate(1),c=l.center().distance(t)>l.center().distance(e),f=c?t:e,p=c?e:t,g,d,x;return s?(g=V.fromPolar(l.width+l.height,fA[s],f),g=l.pointNearestToPoint(g).move(g,-1)):g=l.pointNearestToPoint(f).move(f,1),d=nl(g,p,l),g.round().equals(d.round())?(d=V.fromPolar(l.width+l.height,qt(g.theta(f))+Math.PI/2,p),d=l.pointNearestToPoint(d).move(p,1).round(),x=nl(g,d,l),a.points=c?[d,x,g]:[g,x,d]):a.points=c?[d,g]:[g,d],a.direction=Bt(c?g:d,t),a}function Hc(e,t,n){var r=Ov(n,t),s=Iv(n,t),a=hA(n,t),l=dA(n,t);r=r.union(Ua(a)),s=s.union(Ua(l)),e=He(e).map(V),e.unshift(a),e.push(l);for(var c,f=[],p=0,g=e.length-1;p<g;p++){var d=null,x=e[p],w=e[p+1],E=!!Bt(x,w);if(p===0)p+1===g?r.intersect(s.clone().inflate(1))?d=Pc(x,w,r,s):E||(d=gA(x,w,r,s)):r.containsPoint(w)?d=Pc(x,w,r,Ua(w).moveAndExpand(rl(t))):E||(d=qa(x,w,r));else if(p+1===g){var T=E&&Bt(w,x)===c;s.containsPoint(x)||T?d=Pc(x,w,Ua(x).moveAndExpand(rl(t)),s,c):E||(d=pA(x,w,s,c))}else E||(d=Rv(x,w,c));d?(Array.prototype.push.apply(f,d.points),c=d.direction):c=Bt(x,w),p+1<g&&f.push(w)}return f}var Fv={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,t=this.cost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:-e,offsetY:0,cost:t},{offsetX:0,offsetY:e,cost:t},{offsetX:0,offsetY:-e,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,t,n){if(!Xe(Hc))throw new Error("Manhattan requires the orthogonal router as default fallback.");return Hc(e,Se({},Fv,t),n)},fallbackRoute:function(e,t,n){return null},draggingRoute:null};function Lf(e){this.map={},this.options=e,this.mapGridSize=100}Lf.prototype.build=function(e,t){var n=this.options,r=He(n.excludeEnds).reduce(function(f,p){var g=t.get(p);if(g){var d=e.getCell(g.id);d&&f.push(d)}return f},[]),s=[],a=e.getCell(t.get("source").id);a&&(s=Bc(s,a.getAncestors().map(function(f){return f.id})));var l=e.getCell(t.get("target").id);l&&(s=Bc(s,l.getAncestors().map(function(f){return f.id})));var c=this.mapGridSize;return e.getElements().reduce(function(f,p){var g=He(n.excludeTypes).includes(p.get("type")),d=r.find(function(F){return F.id===p.id}),x=s.includes(p.id),w=g||d||x;if(!w)for(var E=p.getBBox().moveAndExpand(n.paddingBox),T=E.origin().snapToGrid(c),P=E.corner().snapToGrid(c),C=T.x;C<=P.x;C+=c)for(var L=T.y;L<=P.y;L+=c){var M=C+"@"+L;f[M]=f[M]||[],f[M].push(E)}return f},this.map),this};Lf.prototype.isPointAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString();return He(this.map[t]).every(function(n){return!n.containsPoint(e)})};function ui(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}ui.prototype.add=function(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=t;var n=Qm(this.items,e,(function(r){return this.values[r]}).bind(this));this.items.splice(n,0,e)};ui.prototype.remove=function(e){this.hash[e]=this.CLOSE};ui.prototype.isOpen=function(e){return this.hash[e]===this.OPEN};ui.prototype.isClose=function(e){return this.hash[e]===this.CLOSE};ui.prototype.isEmpty=function(){return this.items.length===0};ui.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};function Dv(e,t){return t&&t.paddingBox?e.sourceBBox.clone().moveAndExpand(t.paddingBox):e.sourceBBox.clone()}function Bv(e,t){return t&&t.paddingBox?e.targetBBox.clone().moveAndExpand(t.paddingBox):e.targetBBox.clone()}function zv(e,t){if(e.sourceAnchor)return e.sourceAnchor;var n=Dv(e,t);return n.center()}function mA(e,t){if(e.targetAnchor)return e.targetAnchor;var n=Bv(e,t);return n.center()}function Tc(e,t,n,r,s){var a=360/n,l=e.theta(vA(e,t,r,s)),c=mn(l+a/2);return a*Math.floor(c/a)}function vA(e,t,n,r){var s=r.step,a=t.x-e.x,l=t.y-e.y,c=a/n.x,f=l/n.y,p=c*s,g=f*s;return new V(e.x+p,e.y+g)}function mg(e,t){var n=Math.abs(e-t);return n>180?360-n:n}function yA(e,t,n){var r=n.step;He(n.directions).forEach(function(s){s.gridOffsetX=s.offsetX/r*t.x,s.gridOffsetY=s.offsetY/r*t.y})}function xA(e,t,n){return{source:t.clone(),x:vg(n.x-t.x,e),y:vg(n.y-t.y,e)}}function vg(e,t){if(!e)return t;var n=Math.abs(e),r=Math.round(n/t);if(!r)return n;var s=r*t,a=n-s,l=a/r;return t+l}function wA(e,t){var n=t.source,r=ni(e.x-n.x,t.x)+n.x,s=ni(e.y-n.y,t.y)+n.y;return new V(r,s)}function Xs(e,t){return e.round(t)}function Ya(e,t,n){return Xs(wA(e.clone(),t),n)}function Ks(e){return e.clone().toString()}function Cc(e){return new V(e.x===0?0:Math.abs(e.x)/e.x,e.y===0?0:Math.abs(e.y)/e.y)}function SA(e,t,n,r,s,a,l){for(var c=[],f=Cc(s.difference(n)),p=Ks(n),g=e[p],d;g;){d=t[p];var x=Cc(d.difference(g));x.equals(f)||(c.unshift(d),f=x),p=Ks(g),g=e[p]}var w=t[p],E=Cc(w.difference(r));return E.equals(f)||c.unshift(w),c}function yg(e,t){for(var n=1/0,r=0,s=t.length;r<s;r++){var a=e.manhattanDistance(t[r]);a<n&&(n=a)}return n}function xg(e,t,n,r,s){var a=s.precision,l=s.directionMap,c=e.difference(t.center()),f=$e(l)?Object.keys(l):[],p=He(n),g=f.reduce(function(d,x){if(p.includes(x)){for(var w=l[x],E=new V(e.x+w.x*(Math.abs(c.x)+t.width),e.y+w.y*(Math.abs(c.y)+t.height)),T=new ve(e,E),P=T.intersect(t)||[],C=P.length,L,M=null,F=0;F<C;F++){var $=P[F],X=e.squaredDistance($);(L===void 0||X>L)&&(L=X,M=$)}if(M){var y=Ya(M,r,a);t.containsPoint(y)&&(y=Ya(y.offset(w.x*r.x,w.y*r.y),r,a)),d.push(y)}}return d},[]);return t.containsPoint(e)||g.push(Ya(e,r,a)),g}function EA(e,t,n,r){var s=r.precision,a,l;e instanceof de?a=Xs(zv(this,r).clone(),s):a=Xs(e.clone(),s),t instanceof de?l=Xs(mA(this,r).clone(),s):l=Xs(t.clone(),s);var c=xA(r.step,a,l),f,p,g,d;if(e instanceof de?(f=a,g=xg(f,e,r.startDirections,c,r)):(f=a,g=[f]),t instanceof de?(p=l,d=xg(l,t,r.endDirections,c,r)):(p=l,d=[p]),g=g.filter(ke=>!n(ke)),d=d.filter(ke=>!n(ke)),g.length>0&&d.length>0){for(var x=new ui,w={},E={},T={},P=0,C=g.length;P<C;P++){var L=g[P],M=Ks(L);x.add(M,yg(L,d)),w[M]=L,T[M]=0}var F=r.previousDirectionAngle,$=F===void 0,X,y,S=r.directions;yA(S,c,r);for(var A=S.length,_=He(d).reduce(function(ke,Be){var Me=Ks(Be);return ke.push(Me),ke},[]),R=r.maximumLoops;!x.isEmpty()&&R>0;){var G=x.pop(),j=w[G],J=E[G],re=T[G],I=J===void 0,B=j.equals(f),N;I?$?B?N=null:N=Tc(f,j,A,c,r):N=F:N=Tc(J,j,A,c,r);var D=g.length===d.length;if(D){for(var H=0;H<g.length;H++)if(!g[H].equals(d[H])){D=!1;break}}var k=I&&D;if(!k&&_.indexOf(G)>=0)return r.previousDirectionAngle=N,SA(E,w,j,f,p);for(P=0;P<A;P++){X=S[P];var q=X.angle;if(y=mg(N,q),!(!($&&B)&&y>r.maxAllowedDirectionChange)){var xe=Ya(j.clone().offset(X.gridOffsetX,X.gridOffsetY),c,s),se=Ks(xe);if(!(x.isClose(se)||n(xe))){if(_.indexOf(se)>=0){var fe=xe.equals(p);if(!fe){var he=Tc(xe,p,A,c,r),me=mg(q,he);if(me>r.maxAllowedDirectionChange)continue}}var pe=X.cost,Ee=B?0:r.penalties[y],Le=re+pe+Ee;(!x.isOpen(se)||Le<T[se])&&(w[se]=xe,E[se]=j,T[se]=Le,x.add(se,Le+yg(xe,d)))}}}R--}}return r.fallbackRoute.call(this,f,p,r)}function AA(e){if(e.directions=Ke(e,"directions"),e.penalties=Ke(e,"penalties"),e.paddingBox=Ke(e,"paddingBox"),e.padding=Ke(e,"padding"),e.padding){var t=si(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}He(e.directions).forEach(function(n){var r=new V(0,0),s=new V(n.offsetX,n.offsetY);n.angle=mn(r.theta(s))})}function bA(e,t,n){AA(t),n.options.perpendicular=!!t.perpendicular;var r=Dv(n,t),s=Bv(n,t),a=zv(n,t);let l;if(typeof t.isPointObstacle=="function")l=t.isPointObstacle;else{const M=new Lf(t);M.build(n.paper.model,n.model),l=F=>!M.isPointAccessible(F)}for(var c=He(e).map(V),f=[],p=a,g,d,x=0,w=c.length;x<=w;x++){var E=null;if(d=g||r,g=c[x],!g){g=s;var T=!n.model.get("source").id||!n.model.get("target").id;if(T&&Xe(t.draggingRoute)){var P=d===r?a:d,C=g.origin();E=t.draggingRoute.call(n,P,C,t)}}if(E=E||EA.call(n,d,g,l,t),E===null)return t.fallbackRouter(e,t,n);var L=E[0];L&&L.equals(p)&&E.shift(),p=E[E.length-1]||p,Array.prototype.push.apply(f,E)}return f}const Wc=function(e,t,n){return bA(e,Se({},Fv,t),n)};var PA={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,t=this.cost(),n=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:e,offsetY:e,cost:n},{offsetX:0,offsetY:e,cost:t},{offsetX:-e,offsetY:e,cost:n},{offsetX:-e,offsetY:0,cost:t},{offsetX:-e,offsetY:-e,cost:n},{offsetX:0,offsetY:-e,cost:t},{offsetX:e,offsetY:-e,cost:n}]},fallbackRoute:function(e,t,n){var r=e.theta(t),s=[],a={x:t.x,y:e.y},l={x:e.x,y:t.y};if(r%180>90){var c=a;a=l,l=c}var f=r%90<45?a:l,p=new ve(e,f),g=90*Math.ceil(r/90),d=V.fromPolar(p.squaredLength(),qt(g+135),f),x=new ve(t,d),w=p.intersection(x),E=w||t,T=w?E:e,P=360/n.directions.length,C=T.theta(t),L=mn(C+P/2),M=P*Math.floor(L/P);return n.previousDirectionAngle=M,E&&s.push(E.round()),s.push(t),s}};const TA=function(e,t,n){if(!Xe(Wc))throw new Error("Metro requires the manhattan router.");return Wc(e,Se({},PA,t),n)},te={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},wg=[te.LEFT,te.RIGHT,te.TOP,te.BOTTOM],tr={[te.LEFT]:te.RIGHT,[te.RIGHT]:te.LEFT,[te.TOP]:te.BOTTOM,[te.BOTTOM]:te.TOP},CA=[te.TOP,te.BOTTOM],Tr={0:te.RIGHT,180:te.LEFT,270:te.TOP,90:te.BOTTOM};function Bn(e){return e.angle()}function Bi(e){return new Je(e).simplify({threshold:1}).points}function Js(e,t){const{point:n,x0:r,y0:s,view:a,bbox:l,direction:c}=e,{point:f,x0:p,y0:g,view:d,bbox:x,direction:w}=t;let E;if(a)a.model.isLink()?E=Sg(f,n,a):c===te.ANCHOR_SIDE?E=l.sideNearestToPoint(n):c===te.MAGNET_SIDE?E=a.model.getBBox().sideNearestToPoint(n):E=c;else{const P=new de(r,s,0,0);E=wg.includes(c)?c:P.sideNearestToPoint(f)}let T;if(d)d.model.isLink()?T=Sg(n,f,d):w===te.ANCHOR_SIDE?T=x.sideNearestToPoint(f):w===te.MAGNET_SIDE?T=d.model.getBBox().sideNearestToPoint(f):T=w;else{const P=new de(p,g,0,0);T=wg.includes(w)?w:P.sideNearestToPoint(n)}return[E,T]}function _A(e,t,n){const{x0:r,y0:s,width:a,height:l,point:c,margin:f}=e,p=r+a,g=s+l,d=r-f,x=p+f,w=s-f,{x:E}=c,{x0:T,y0:P}=t;return T===E&&P<s?te.BOTTOM:T<E&&P<w?n.point.x===E?te.BOTTOM:te.RIGHT:T>E&&P<w?n.point.x===E?te.BOTTOM:te.LEFT:T<d&&P>w||T>x&&P>w?te.TOP:T>=d&&T<=E&&P>g||T<=x&&T>=E&&P>g?n.point.x<T?te.RIGHT:te.LEFT:te.BOTTOM}function kA(e,t,n){const{x0:r,y0:s,width:a,height:l,point:c,margin:f}=e,p=r+a,g=s+l,d=r-f,x=p+f,w=g+f,{x:E}=c,{x0:T,y0:P}=t;return T===E&&P>g?te.TOP:T<E&&P>w?n.point.x===E?te.TOP:te.RIGHT:T>E&&P>w?n.point.x===E?te.TOP:te.LEFT:T<d&&P<w||T>x&&P<w?te.BOTTOM:T>=d&&T<=E&&P<s||T<=x&&T>=E&&P<s?n.point.x<T?te.RIGHT:te.LEFT:te.TOP}function LA(e,t,n){const{y0:r,x0:s,width:a,height:l,point:c,margin:f}=e,p=s+a,g=r+l,d=s-f,x=r-f,w=g+f,{x:E,y:T}=c,{x0:P,y0:C}=t;return P<E&&C===T?te.RIGHT:P<=d&&C<T?te.BOTTOM:P<=d&&C>T?te.TOP:P>=d&&C<x||P>=d&&C>w?te.LEFT:P>p&&C>=x&&C<=T||P>p&&C<=w&&C>=T?n.point.y<C?te.BOTTOM:te.TOP:te.RIGHT}function MA(e,t,n){const{y0:r,x0:s,width:a,height:l,point:c,margin:f}=e,p=s+a,g=r+l,d=p+f,x=r-f,w=g+f,{x:E,y:T}=c,{x0:P,y0:C}=t;return P>E&&C===T?te.LEFT:P>=d&&C<T?te.BOTTOM:P>=d&&C>T?te.TOP:P<=d&&C<x||P<=d&&C>w?te.RIGHT:P<s&&C>=x&&C<=T||P<s&&C<=w&&C>=T?n.point.y<C?te.BOTTOM:te.TOP:te.LEFT}function NA(e,t,n){const[r]=Js(e,t);switch(r){case te.TOP:return _A(e,t,n);case te.RIGHT:return MA(e,t,n);case te.BOTTOM:return kA(e,t,n);case te.LEFT:return LA(e,t,n)}}function Sg(e,t,n){const r=n.getTangentAtLength(n.getClosestPointLength(t)),s=Math.round(Bn(r)/90)*90;if(s%180===0&&e.y===t.y)return e.x<t.x?te.LEFT:te.RIGHT;if(e.x===t.x)return e.y<t.y?te.TOP:te.BOTTOM;switch(s){case 0:case 180:case 360:return e.y<t.y?te.TOP:te.BOTTOM;case 90:case 270:return e.x<t.x?te.LEFT:te.RIGHT}}function Eg(e,t,n,r,s,a,l){r===te.AUTO&&(r=s?te.MAGNET_SIDE:te.ANCHOR_SIDE);const c=e&&e.model.isElement(),{x:f,y:p,width:g=0,height:d=0}=c?de.fromRectUnion(n,e.model.getBBox()):a;return{point:t,x0:f,y0:p,view:e,bbox:n,width:g,height:d,direction:r,margin:c?l:0}}function OA({x:e,y:t}){const n=new V(e,t);return{point:n,x0:n.x,y0:n.y,view:null,bbox:new de(e,t,0,0),width:0,height:0,direction:null,margin:0}}function il(e,t,n){const r=t.point.clone(),{x0:s,y0:a,width:l,height:c}=t;switch(e){case"left":r.x=s-n;break;case"right":r.x=s+l+n;break;case"top":r.y=a-n;break;case"bottom":r.y=a+c+n;break}return r}function jc(e,t,{dx:n=0,dy:r=0}){const s={x:e.point.x+n,y:e.point.y+r},a={x:t.point.x+n,y:t.point.y+r};return[e.point,s,a,t.point]}function Ag(e,t,n,r){const s=mn(n-90);let a=0,l=0;s===90?l=-r:s===180?a=-r:s===270?l=r:s===0&&(a=r);const c=jc(e,t,{dx:a,dy:l}),f=c[2],p=new ve(t.point,f),g=Tr[Bn(p)];return{loopRoute:c,continueDirection:g}}function IA(e,t){const{x0:n,x1:r,outsidePoint:s}=e,{x0:a,x1:l,outsidePoint:c}=t;let f=Math.min(n,a),p=Math.max(r,l);if(e.direction===t.direction){const L=e.y0<t.y0?e:t,M=L===e?t:e,F=e.direction===te.TOP?L:M;f=F.x0,p=F.x1}const{x:g}=s,{x:d}=c,x=Math.abs(g-f),w=Math.abs(d-f),E=x+w,T=Math.abs(g-p),P=Math.abs(d-p),C=T+P;return[E,C]}function RA(e,t){const{y0:n,y1:r,outsidePoint:s}=e,{y0:a,y1:l,outsidePoint:c}=t;let f=Math.min(n,a),p=Math.max(r,l);if(e.direction===t.direction){const L=e.x0<t.x0?e:t,M=L===e?t:e,F=e.direction===te.LEFT?L:M;f=F.y0,p=F.y1}const{y:g}=s,{y:d}=c,x=Math.abs(g-f),w=Math.abs(d-f),E=x+w,T=Math.abs(g-p),P=Math.abs(d-p),C=T+P;return[E,C]}function bg(e,t,n){switch(t){case te.LEFT:e.inflate(0,n).moveAndExpand({x:-n,width:n});break;case te.RIGHT:e.inflate(0,n).moveAndExpand({width:n});break;case te.TOP:e.inflate(n,0).moveAndExpand({y:-n,height:n});break;case te.BOTTOM:e.inflate(n,0).moveAndExpand({height:n});break}return e}function Pr(e,t,n={}){const{point:r,x0:s,y0:a,width:l,height:c,margin:f}=e,{point:p,x0:g,y0:d,width:x,height:w,margin:E}=t,{targetInSourceBBox:T=!1}=n,P=g+x,C=d+w,L=s+l,M=a+c,F=s-f,$=L+f,X=a-f,y=M+f,S=g-E,A=P+E,_=d-E,R=C+E,[G,j]=Js(e,t),J=il(G,{point:r,x0:s,y0:a,width:l,height:c},f),re=il(j,{point:p,x0:g,y0:d,width:x,height:w},E),{x:I,y:B}=J,{x:N,y:D}=re,H=(g+P)/2,k=(d+C)/2,q=(s+L)/2,xe=(a+M)/2,se=(q<H?L+g:P+s)/2,fe=(xe<k?M+d:C+a)/2,he=new de(s,a,l,c),me=new de(g,d,x,w),pe=he.clone().inflate(f),Ee=me.clone().inflate(E),Le=Object.assign({},e,{x1:L,y1:M,outsidePoint:J,direction:G}),ke=Object.assign({},t,{x1:P,y1:C,outsidePoint:re,direction:j}),[Be,Me]=IA(Le,ke),[le,we]=RA(Le,ke);if(G==="left"&&j==="right"){const ie=pe.containsPoint(re),z=Ee.containsPoint(J);if(ie||z){const K=(B+D)/2;return[{x:I,y:B},{x:I,y:K},{x:N,y:K},{x:N,y:D}]}if(F<N){let K=fe,ye=I,Re=N;const De=le<we;return(K>=X&&K<=y||K>=_&&K<=R)&&(y>=_&&De?K=Math.min(_,X):X<=R&&!De&&(K=Math.max(R,y)),ye=Math.min(I,S),Re=Math.max(N,$),De&&B<d||!De&&B>C?ye=I:(De&&D<a||!De&&D>M)&&(Re=N)),[{x:ye,y:B},{x:ye,y:K},{x:Re,y:K},{x:Re,y:D}]}const Z=(I+N)/2;return[{x:Z,y:B},{x:Z,y:D}]}else if(G==="right"&&j==="left"){const ie=pe.containsPoint(re),z=Ee.containsPoint(J);if(ie||z){const K=(B+D)/2;return[{x:I,y:B},{x:I,y:K},{x:N,y:K},{x:N,y:D}]}if($>N){let K=fe,ye=I,Re=N;const De=le<we;return(K>=X&&K<=y||K>=_&&K<=R)&&(y>=_&&De?K=Math.min(_,X):X<=R&&!De&&(K=Math.max(R,y)),ye=Math.max(I,A),Re=Math.min(N,F),De&&B<d||!De&&B>C?ye=I:(De&&D<a||!De&&D>M)&&(Re=N)),[{x:ye,y:B},{x:ye,y:K},{x:Re,y:K},{x:Re,y:D}]}const Z=(I+N)/2;return[{x:Z,y:B},{x:Z,y:D}]}else if(G==="top"&&j==="bottom"){const ie=pe.containsPoint(re),z=Ee.containsPoint(J);if(ie||z){const K=(I+N)/2;return[{x:I,y:B},{x:K,y:B},{x:K,y:D},{x:N,y:D}]}if(X<D){let K=se,ye=B,Re=D;const De=Be<Me;return(K>=F&&K<=$||K>=S&&K<=A)&&($>=S&&De?K=Math.min(S,F):F<=A&&!De&&(K=Math.max(A,$)),ye=Math.min(B,_),Re=Math.max(D,y),De&&I<g||!De&&I>P?ye=B:(De&&N<s||!De&&N>L)&&(Re=D)),[{x:I,y:ye},{x:K,y:ye},{x:K,y:Re},{x:N,y:Re}]}const Z=(B+D)/2;return[{x:I,y:Z},{x:N,y:Z}]}else if(G==="bottom"&&j==="top"){const ie=pe.containsPoint(re),z=Ee.containsPoint(J);if(ie||z){const K=(I+N)/2;return[{x:I,y:B},{x:K,y:B},{x:K,y:D},{x:N,y:D}]}if(y>D){let K=se,ye=B,Re=D;const De=Be<Me;return(K>=F&&K<=$||K>=S&&K<=A)&&($>=S&&De?K=Math.min(S,F):F<=A&&!De&&(K=Math.max(A,$)),ye=Math.max(B,R),Re=Math.min(D,X),De&&I<g||!De&&I>P?ye=B:(De&&N<s||!De&&N>L)&&(Re=D)),[{x:I,y:ye},{x:K,y:ye},{x:K,y:Re},{x:N,y:Re}]}const Z=(B+D)/2;return[{x:I,y:Z},{x:N,y:Z}]}else if(G==="top"&&j==="top"){if((T||Kr.rectWithRect(pe,me)||B<=d&&(pe.bottomRight().x<=N||pe.bottomLeft().x>=N)||B>=d&&(Ee.bottomRight().x<=I||Ee.bottomLeft().x>=I))&&I!==N)return[{x:I,y:Math.min(B,D)},{x:N,y:Math.min(B,D)}];let z,Z=Math.min((M+d)/2,D),K=Math.min((a+C)/2,B);return D<B?Me>Be?z=Math.min(I,S):z=Math.max(I,A):Me>Be?z=Math.min(N,F):z=Math.max(N,$),[{x:I,y:K},{x:z,y:K},{x:z,y:Z},{x:N,y:Z}]}else if(G==="bottom"&&j==="bottom"){if((T||Kr.rectWithRect(pe,me)||B>=D&&(pe.topRight().x<=N||pe.topLeft().x>=N)||B<=D&&(Ee.topRight().x<=I||Ee.topLeft().x>=I))&&I!==N)return[{x:I,y:Math.max(B,D)},{x:N,y:Math.max(B,D)}];let z,Z=Math.max((a+C)/2,D),K=Math.max((M+d)/2,B);return D>B?Me>Be?z=Math.min(I,S):z=Math.max(I,A):Me>Be?z=Math.min(N,F):z=Math.max(N,$),[{x:I,y:K},{x:z,y:K},{x:z,y:Z},{x:N,y:Z}]}else if(G==="left"&&j==="left"){if((T||Kr.rectWithRect(pe,me)||I<=N&&(pe.bottomRight().y<=D||pe.topRight().y>=D)||I>=N&&(Ee.bottomRight().y<=B||Ee.topRight().y>=B))&&B!==D)return[{x:Math.min(I,N),y:B},{x:Math.min(I,N),y:D}];let z,Z=Math.min((L+g)/2,N),K=Math.min((s+P)/2,I);return N>I?le<=we?z=Math.min(X,D):z=Math.max(y,D):le<=we?z=Math.min(_,B):z=Math.max(R,B),[{x:K,y:B},{x:K,y:z},{x:Z,y:z},{x:Z,y:D}]}else if(G==="right"&&j==="right"){if((T||Kr.rectWithRect(pe,me)||I>=N&&(pe.bottomLeft().y<=D||pe.topLeft().y>=D)||I<=N&&(Ee.bottomLeft().y<=B||Ee.topLeft().y>=B))&&B!==D)return[{x:Math.max(I,N),y:B},{x:Math.max(I,N),y:D}];let z,Z=Math.max((s+P)/2,N),K=Math.max((L+g)/2,I);return N<=I?le<=we?z=Math.min(X,D):z=Math.max(y,D):le<=we?z=Math.min(_,B):z=Math.max(R,B),[{x:K,y:B},{x:K,y:z},{x:Z,y:z},{x:Z,y:D}]}else if(G==="top"&&j==="right"){if(pe.containsPoint(p)){if(I<=A){const K=Math.max(I+f,N),ye=Math.min(X,_);return[{x:I,y:ye},{x:K,y:ye},{x:K,y:D}]}const Z=(I-f+N)/2;return[{x:I,y:B},{x:Z,y:B},{x:Z,y:D}]}if(X>D){if(I<N){let Z=_;return R<=X&&A>=I&&(Z=fe),[{x:I,y:Z},{x:N,y:Z},{x:N,y:D}]}return[{x:I,y:D}]}const z=Math.max(se,A);if(I>N&&M>=D)return[{x:I,y:B},{x:z,y:B},{x:z,y:D}];if(z>F&&B<C){const Z=Math.min(X,_),K=Math.max($,A);return[{x:I,y:Z},{x:K,y:Z},{x:K,y:D}]}return[{x:I,y:B},{x:z,y:B},{x:z,y:D}]}else if(G==="top"&&j==="left"){if(pe.containsPoint(p)){if(I>=S){const K=Math.min(I-f,N),ye=Math.min(X,_);return[{x:I,y:ye},{x:K,y:ye},{x:K,y:D}]}const Z=(I+f+N)/2;return[{x:I,y:B},{x:Z,y:B},{x:Z,y:D}]}if(X>D){if(I>N){let Z=_;return R<=X&&S<=I&&(Z=fe),[{x:I,y:Z},{x:N,y:Z},{x:N,y:D}]}return[{x:I,y:D}]}const z=Math.min(S,se);if(I<N&&M>=D)return[{x:I,y:B},{x:z,y:B},{x:z,y:D}];if(z<$&&B<C){const Z=Math.min(X,_),K=Math.min(F,S);return[{x:I,y:Z},{x:K,y:Z},{x:K,y:D}]}return[{x:I,y:B},{x:z,y:B},{x:z,y:D}]}else if(G==="bottom"&&j==="right"){if(pe.containsPoint(p)){if(I<=A){const K=Math.max(I+f,N),ye=Math.max(y,R);return[{x:I,y:ye},{x:K,y:ye},{x:K,y:D}]}const Z=(I-f+N)/2;return[{x:I,y:B},{x:Z,y:B},{x:Z,y:D}]}if(y<D){if(I<N){let Z=R;return _>=y&&A>=I&&(Z=fe),[{x:I,y:Z},{x:N,y:Z},{x:N,y:D}]}return[{x:I,y:D}]}const z=Math.max(se,A);if(I>N&&a<=D)return[{x:I,y:B},{x:z,y:B},{x:z,y:D}];if(z>F&&B>d){const Z=Math.max(y,R),K=Math.max($,A);return[{x:I,y:Z},{x:K,y:Z},{x:K,y:D}]}return[{x:I,y:B},{x:z,y:B},{x:z,y:D}]}else if(G==="bottom"&&j==="left"){if(pe.containsPoint(p)){if(I>=S){const K=Math.min(I-f,N),ye=Math.max(y,R);return[{x:I,y:ye},{x:K,y:ye},{x:K,y:D}]}const Z=(I+f+N)/2;return[{x:I,y:B},{x:Z,y:B},{x:Z,y:D}]}if(y<D){if(I>N){let Z=R;return _>=y&&S<=I&&(Z=fe),[{x:I,y:Z},{x:N,y:Z},{x:N,y:D}]}return[{x:I,y:D}]}const z=Math.min(S,se);if(I<N&&a<=D)return[{x:I,y:B},{x:z,y:B},{x:z,y:D}];if(z<$&&B>d){const Z=Math.max(y,R),K=Math.min(F,S);return[{x:I,y:Z},{x:K,y:Z},{x:K,y:D}]}return[{x:I,y:B},{x:z,y:B},{x:z,y:D}]}else if(G==="left"&&j==="bottom"){if(pe.containsPoint(p)){if(B<=R){const K=Math.min(F,S),ye=Math.max(B+f,D);return[{x:K,y:B},{x:K,y:ye},{x:N,y:ye}]}const Z=(B-f+D)/2;return[{x:I,y:B},{x:I,y:Z},{x:N,y:Z}]}if(F>N){if(B<D){let Z=S;return A<=F&&R>=B&&(Z=se),[{x:Z,y:B},{x:Z,y:D},{x:N,y:D}]}return[{x:N,y:B}]}const z=Math.max(R,fe);if(B>D&&L>=N)return[{x:I,y:B},{x:I,y:z},{x:N,y:z}];if(z>X&&I<P){const Z=Math.min(F,S),K=Math.max(y,R);return[{x:Z,y:B},{x:Z,y:K},{x:N,y:K}]}return[{x:I,y:B},{x:I,y:z},{x:N,y:z}]}else if(G==="left"&&j==="top"){if(pe.containsPoint(p)){if(B>=_){const K=Math.min(B-f,D),ye=Math.min(F,S);return[{x:ye,y:B},{x:ye,y:K},{x:N,y:K}]}const Z=(B+f+D)/2;return[{x:I,y:B},{x:I,y:Z},{x:N,y:Z}]}if(F>N){if(B>D){let Z=S;return A<=F&&_<=B&&(Z=se),[{x:Z,y:B},{x:Z,y:D},{x:N,y:D}]}return[{x:N,y:B}]}const z=Math.min(_,fe);if(B<D&&L>=N)return[{x:I,y:B},{x:I,y:z},{x:N,y:z}];if(z<y&&I<P){const Z=Math.min(F,S),K=Math.min(X,_);return[{x:Z,y:B},{x:Z,y:K},{x:N,y:K}]}return[{x:I,y:B},{x:I,y:z},{x:N,y:z}]}else if(G==="right"&&j==="top"){if(pe.containsPoint(p)){if(B>=_){const K=Math.max($,A),ye=Math.min(B-f,D);return[{x:K,y:B},{x:K,y:ye},{x:N,y:ye}]}const Z=(B+f+D)/2;return[{x:I,y:B},{x:I,y:Z},{x:N,y:Z}]}if($<N){if(B>D){let Z=A;return S>=$&&_<=B&&(Z=se),[{x:Z,y:B},{x:Z,y:D},{x:N,y:D}]}return[{x:N,y:B}]}const z=Math.min(_,fe);if(B<D&&s<=N)return[{x:I,y:B},{x:I,y:z},{x:N,y:z}];if(z<y&&I>g){const Z=Math.max($,A),K=Math.min(X,_);return[{x:Z,y:B},{x:Z,y:K},{x:N,y:K}]}return[{x:I,y:B},{x:I,y:z},{x:N,y:z}]}else if(G==="right"&&j==="bottom"){if(pe.containsPoint(p)){if(B<=R){const K=Math.max($,A),ye=Math.max(B+f,D);return[{x:K,y:B},{x:K,y:ye},{x:N,y:ye}]}const Z=(B-f+D)/2;return[{x:I,y:B},{x:I,y:Z},{x:N,y:Z}]}if($<N){if(B<D){let Z=A;return S>=$&&R>=B&&(Z=se),[{x:Z,y:B},{x:Z,y:D},{x:N,y:D}]}return[{x:N,y:B}]}const z=Math.max(R,fe);if(B>D&&s<=N)return[{x:I,y:B},{x:I,y:z},{x:N,y:z}];if(z>X&&I>g){const Z=Math.max($,A),K=Math.max(y,R);return[{x:Z,y:B},{x:Z,y:K},{x:N,y:K}]}return[{x:I,y:B},{x:I,y:z},{x:N,y:z}]}}function Pg(e,t,n){const r=e===te.LEFT||e===te.RIGHT;let s=0,a=0;switch(mn(Math.round(t))){case 0:case 90:s=r?0:n,a=r?n:0;break;case 180:case 270:s=r?0:-n,a=r?-n:0;break}return{dx:s,dy:a}}function Vv(e,t,n){const{sourceDirection:r=te.AUTO,targetDirection:s=te.AUTO}=t,a=t.margin||20,l=t.useVertices||!1,c=!!n.model.source().port,f=Eg(n.sourceView,n.sourceAnchor,n.sourceBBox,r,c,n.sourceAnchor,a),p=!!n.model.target().port,g=Eg(n.targetView,n.targetAnchor,n.targetBBox,s,p,n.targetAnchor,a);let d=[];if(!l||e.length===0)return Bi(Pr(f,g));const x=e.map(M=>OA(M)),[w]=x,[E]=Js(f,w),T=f.view&&f.view.model.isElement(),P=T?bg(f.view.model.getBBox(),E,a):null,C=T?P.containsPoint(w.point):!1;if(C){const M=il(E,f,a),F=M.equals(w.point),$=f.point.x===w.point.x,X=f.point.y===w.point.y,y=$&&(E===te.TOP||E===te.BOTTOM),S=X&&(E===te.LEFT||E===te.RIGHT),A=new ve(f.point,M),_=A.containsPoint(w.point),R=C&&(S||y);if(F)d.push(f.point,w.point),w.direction=tr[E];else if(_||R){const G=Bn(_?A:new ve(f.point,w.point)),{dx:j,dy:J}=Pg(E,G,a),re=jc({point:M},w,{dx:j,dy:J}),I=re[2],B=new ve(w.point,I),N=Tr[Bn(B)];w.direction=N,d.push(...re)}else w.direction=E,w.margin=a,d.push(...Pr(f,w,{targetInSourceBBox:!0}),w.point)}else{const M=x[1]||g,F=NA(f,w,M);w.direction=F,d.push(...Pr(f,w),w.point)}for(let M=0;M<x.length-1;M++){const F=x[M],$=x[M+1],X=new ve(F.point,$.point),y=Bn(X);if(y%90===0){const _=Tr[y],R=Bi([...d,F.point]),G=new ve(R[R.length-2],R[R.length-1]),j=Tr[Math.round(Bn(G))];if(_!==tr[j]){d.push(F.point,$.point);const[,J]=Js(F,$);$.direction=J}else{const{loopRoute:J,continueDirection:re}=Ag(F,$,y,a);$.direction=re,d.push(...J)}continue}const[S,A]=Tg(F,$);F.direction=S,$.direction=A,d.push(...Pr(F,$),$.point)}const L=x[x.length-1];if(g.view&&g.view.model.isElement()){const[,M]=Js(L,g),F=il(M,g,a),$=Bi([...d,L.point]),X=new ve($[$.length-2],$[$.length-1]),y=Math.round(Bn(X)),S=Tr[y],A=F.equals(L.point);if(!A||A&&S===M){L.direction=S;let _=Pr(L,g);const[R,G]=Bi([..._,g.point]),j=new ve(R,G),J=Math.round(Bn(j)),re=Tr[J],I=bg(g.view.model.getBBox(),M,a),B=L.point.x===g.point.x,N=L.point.y===g.point.y,D=I.containsPoint(L.point),H=B&&(M===te.TOP||M===te.BOTTOM),k=N&&(M===te.LEFT||M===te.RIGHT);if(!A&&D&&(k||H)){const{dx:q,dy:xe}=Pg(M,y,a);_=jc(L,{point:F},{dx:q,dy:xe})}else D&&M!==tr[S]?(L.margin=a,L.direction=M,_=Pr(L,g)):re!==S&&S===tr[re]&&(L.margin=a,_=Pr(L,g));d.push(..._)}}else{const M=L,F=g,$=new ve(M.point,F.point),X=Bn($);if(X%90===0){const y=Tr[X],S=Bi(d),A=new ve(S[S.length-2],M.point),_=Tr[Math.round(Bn(A))];if(y!==tr[_])d.push(M.point);else{const{loopRoute:R}=Ag(M,F,X,a);R.pop(),d.push(...R)}}else{const[y,S]=Tg(M,F);M.direction=y,F.direction=S,d.push(...Pr(M,F))}}return Bi(d)}function Tg(e,t){const n=e.direction,r=CA.includes(n);let s=e.direction,a=t.direction;if(r){const l=e.point.y>t.point.y,c=t.point.x-e.point.x;n===te.BOTTOM?(s=l?tr[n]:c>=0?te.RIGHT:te.LEFT,c>0?a=l?te.LEFT:te.TOP:c<0&&(a=l?te.RIGHT:te.TOP)):(s=l?c>=0?te.RIGHT:te.LEFT:tr[n],c>0?a=l?te.BOTTOM:te.LEFT:c<0&&(a=l?te.BOTTOM:te.RIGHT))}else{const l=e.point.x>t.point.x,c=t.point.y-e.point.y;n===te.RIGHT?(s=l?tr[n]:c>=0?te.BOTTOM:te.TOP,c>0?a=l?te.TOP:te.LEFT:c<0&&(a=l?te.BOTTOM:te.LEFT)):(s=l?c>=0?te.BOTTOM:te.TOP:tr[n],c>0?a=l?te.RIGHT:te.TOP:c<0&&(a=l?te.RIGHT:te.BOTTOM))}return[s,a]}Vv.Directions=te;const FA=Vv,DA=Object.freeze(Object.defineProperty({__proto__:null,manhattan:Wc,metro:TA,normal:lA,oneSide:uA,orthogonal:Hc,rightAngle:FA},Symbol.toStringTag,{value:"Module"}));function BA(e,t,n,r){var s="ratio"in r?r.ratio:.5;return e.getPointAtRatio(s)}function zA(e,t,n,r){var s="length"in r?r.length:20;return e.getPointAtLength(s)}function VA(e,t,n,r){var s=1e6,a=e.getConnection(),l=e.getConnectionSubdivisions(),c=new ve(n.clone().offset(0,s),n.clone().offset(0,-1e6)),f=new ve(n.clone().offset(s,0),n.clone().offset(-1e6,0)),p=c.intersect(a,{segmentSubdivisions:l}),g=f.intersect(a,{segmentSubdivisions:l}),d=[];return p&&Array.prototype.push.apply(d,p),g&&Array.prototype.push.apply(d,g),d.length>0?n.chooseClosest(d):"fallbackAt"in r?Uv(e,r.fallbackAt):Gv(e,t,n,r)}function UA(e,t,n,r){var s=e.getClosestPoint(n);return s||new V}function vo(e){return function(t,n,r,s){if(r instanceof Element){var a=this.paper.findView(r),l;if(a)if(a.isNodeConnection(r)){var c="fixedAt"in s?s.fixedAt:"50%";l=Uv(a,c)}else l=a.getNodeBBox(r).center();else l=new V;return e.call(this,t,n,l,s)}return e.apply(this,arguments)}}function Uv(e,t){var n=parseFloat(t);return Xt(t)?e.getPointAtRatio(n/100):e.getPointAtLength(n)}const GA=vo(VA),Gv=vo(UA),$A=Object.freeze(Object.defineProperty({__proto__:null,connectionClosest:Gv,connectionLength:zA,connectionPerpendicular:GA,connectionRatio:BA,resolveRef:vo},Symbol.toStringTag,{value:"Module"}));function rr(e){return function(t,n,r,s){var a=!!s.rotate,l=a?t.getNodeUnrotatedBBox(n):t.getNodeBBox(n),c=l[e](),f=s.dx;if(f){var p=Xt(f);f=parseFloat(f),isFinite(f)&&(p&&(f/=100,f*=l.width),c.x+=f)}var g=s.dy;if(g){var d=Xt(g);g=parseFloat(g),isFinite(g)&&(d&&(g/=100,g*=l.height),c.y+=g)}return a?c.rotate(t.model.getBBox().center(),-t.model.angle()):c}}function HA(e,t,n,r){var s=e.model.angle(),a=e.getNodeBBox(t),l=a.center(),c=a.origin(),f=a.corner(),p=r.padding;if(isFinite(p)||(p=0),c.y+p<=n.y&&n.y<=f.y-p){var g=n.y-l.y;l.x+=s===0||s===180?0:g*1/Math.tan(qt(s)),l.y+=g}else if(c.x+p<=n.x&&n.x<=f.x-p){var d=n.x-l.x;l.y+=s===90||s===270?0:d*Math.tan(qt(s)),l.x+=d}return l}function WA(e,t,n,r){var s=!!r.rotate,a,l,c;s?(a=e.getNodeUnrotatedBBox(t),c=e.model.getBBox().center(),l=e.model.angle()):a=e.getNodeBBox(t);var f=r.padding;isFinite(f)&&a.inflate(f),s&&n.rotate(c,l);var p=a.sideNearestToPoint(n),g;switch(p){case"left":g=a.leftMiddle();break;case"right":g=a.rightMiddle();break;case"top":g=a.topMiddle();break;case"bottom":g=a.bottomMiddle();break}return s?g.rotate(c,-l):g}function jA(e,t,n,r,s){return e.model.getPointFromConnectedLink(this.model,s).offset(r.dx,r.dy)}const qA=rr("center"),YA=rr("topMiddle"),XA=rr("bottomMiddle"),ZA=rr("leftMiddle"),QA=rr("rightMiddle"),KA=rr("origin"),JA=rr("topRight"),eb=rr("bottomLeft"),tb=rr("corner"),nb=vo(HA),rb=vo(WA),ib=jA,qc=Object.freeze(Object.defineProperty({__proto__:null,bottom:XA,bottomLeft:eb,bottomRight:tb,center:qA,left:ZA,midSide:rb,modelCenter:ib,perpendicular:nb,right:QA,top:YA,topLeft:KA,topRight:JA},Symbol.toStringTag,{value:"Module"})),sb=kr.extend({initialize:function(e,t){t.cellNamespace?this.cellNamespace=t.cellNamespace:this.cellNamespace=typeof joint<"u"&&Un(joint,"shapes")?joint.shapes:null,this.graph=t.graph},model:function(e,t){const r=t.collection.cellNamespace,{type:s}=e,a=ts(r,s,".");if(!a)throw new Error(`dia.Graph: Could not find cell constructor for type: '${s}'. Make sure to add the constructor to 'cellNamespace'.`);return new a(e,t)},_addReference:function(e,t){kr.prototype._addReference.apply(this,arguments),!t.dry&&!e.graph&&(e.graph=this.graph)},_removeReference:function(e,t){kr.prototype._removeReference.apply(this,arguments),!t.dry&&e.graph===this.graph&&(e.graph=null)},comparator:function(e){return e.get("z")||0}}),Mf=hn.extend({initialize:function(e,t){t=t||{};var n=new sb([],{model:t.cellModel,cellNamespace:t.cellNamespace,graph:this});hn.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:t,target:n}=e.attributes;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:t,target:n}=e.attributes;t.id&&this._out[t.id]&&this._out[t.id][e.id]&&delete this._out[t.id][e.id],n.id&&this._in[n.id]&&this._in[n.id][e.id]&&delete this._in[n.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var t=e.previous("source");t.id&&this._out[t.id]&&delete this._out[t.id][e.id];var n=e.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var t=e.previous("target");t.id&&this._in[t.id]&&delete this._in[t.id][e.id];var n=e.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(e={}){var t=hn.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(e.cellAttributes),t},fromJSON:function(e,t){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,t)},set:function(e,t,n){var r;return typeof e=="object"?(r=e,n=t):(r={})[e]=t,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,n),r=go(r,"cells")),hn.prototype.set.call(this,r,n)},clear:function(e){e=Se({},e,{clear:!0});var t=this.get("cells");if(t.length===0)return this;this.startBatch("clear",e);var n=t.sortBy(function(r){return r.isLink()?1:2});do n.shift().remove(e);while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e){let t;if(e instanceof hn?t=e.attributes:t=e,!ft(t.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,t){return Array.isArray(e)?this.addCells(e,t):(e instanceof hn?e.has("z")||e.set("z",this.maxZIndex()+1):e.z===void 0&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,t),t||{}),this)},addCells:function(e,t){return e.length===0?this:(e=ew(e),t.maxPosition=t.position=e.length-1,this.startBatch("add",t),e.forEach(function(n){this.addCell(n,t),t.position--},this),this.stopBatch("add",t),this)},resetCells:function(e,t){var n=He(e).map(function(r){return this._prepareCell(r,t)},this);return this.get("cells").reset(n,t),this},removeCells:function(e,t){return e.length&&(this.startBatch("remove"),Vn(e,"remove",t),this.stopBatch("remove")),this},_removeCell:function(e,t,n){n=n||{},n.clear||(n.disconnectLinks?this.disconnectLinks(e,n):this.removeLinks(e,n)),this.get("cells").remove(e,{silent:!0})},transferCellEmbeds:function(e,t,n={}){const r="transfer-embeds";this.startBatch(r);const s=e.getEmbeddedCells();t.embed(s,{...n,reparent:!0}),this.stopBatch(r)},transferCellConnectedLinks:function(e,t,n={}){const r="transfer-connected-links";this.startBatch(r),this.getConnectedLinks(e,n).forEach(a=>{a.getSourceCell()===e&&a.prop(["source","id"],t.id,n),a.getTargetCell()===e&&a.prop(["target","id"],t.id,n)}),this.stopBatch(r)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").toArray().filter(e=>e.isElement())},getLinks:function(){return this.get("cells").toArray().filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,t){t=t||{};var n=t.indirect,r=t.inbound,s=t.outbound;r===void 0&&s===void 0&&(r=s=!0);var a=[],l={};s&&c(this,e),r&&f(this,e);function c(d,x){if(zn(d.getOutboundEdges(x.id),(function(E,T){if(!l[T]){var P=d.getCell(T);a.push(P),l[T]=!0,n&&(r&&f(d,P),s&&c(d,P))}}).bind(d)),n&&x.isLink()){var w=x.getTargetCell();w&&w.isLink()&&(l[w.id]||(a.push(w),c(d,w)))}}function f(d,x){if(zn(d.getInboundEdges(x.id),(function(E,T){if(!l[T]){var P=d.getCell(T);a.push(P),l[T]=!0,n&&(r&&f(d,P),s&&c(d,P))}}).bind(d)),n&&x.isLink()){var w=x.getSourceCell();w&&w.isLink()&&(l[w.id]||(a.push(w),f(d,w)))}}if(t.deep){var p=e.getEmbeddedCells({deep:!0}),g={};p.forEach(function(d){d.isElement()&&(g[d.id]=!0)}),p.forEach(function(d){d.isLink()||(s&&zn(this.getOutboundEdges(d.id),(function(x,w){if(!l[w]){var E=this.getCell(w),{source:T,target:P}=E.attributes,C=T.id,L=P.id;if(!t.includeEnclosed&&C&&g[C]&&L&&g[L])return;a.push(this.getCell(w)),l[w]=!0}}).bind(this)),r&&zn(this.getInboundEdges(d.id),(function(x,w){if(!l[w]){var E=this.getCell(w),{source:T,target:P}=E.attributes,C=T.id,L=P.id;if(!t.includeEnclosed&&C&&g[C]&&L&&g[L])return;a.push(this.getCell(w)),l[w]=!0}}).bind(this)))},this)}return a},getNeighbors:function(e,t){t||(t={});var n=t.inbound,r=t.outbound;n===void 0&&r===void 0&&(n=r=!0);var s=this.getConnectedLinks(e,t).reduce((function(c,f){var{source:p,target:g}=f.attributes,d=f.hasLoop(t);if(n&&Un(p,"id")&&!c[p.id]){var x=this.getCell(p.id);x.isElement()&&(d||x&&x!==e&&(!t.deep||!x.isEmbeddedIn(e)))&&(c[p.id]=x)}if(r&&Un(g,"id")&&!c[g.id]){var w=this.getCell(g.id);w.isElement()&&(d||w&&w!==e&&(!t.deep||!w.isEmbeddedIn(e)))&&(c[g.id]=w)}return c}).bind(this),{});if(e.isLink()){if(n){var a=e.getSourceCell();a&&a.isElement()&&!s[a.id]&&(s[a.id]=a)}if(r){var l=e.getTargetCell();l&&l.isElement()&&!s[l.id]&&(s[l.id]=l)}}return He(s)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(n){for(var r=[],s=n.get("parent");s;)r.push(s),s=this.getCell(s).get("parent");return r},this);e=e.sort(function(n,r){return n.length-r.length});var t=He(e.shift()).find(function(n){return e.every(function(r){return r.includes(n)})});return this.getCell(t)},getSuccessors:function(e,t){t=t||{};var n=[];return this.search(e,function(r){r!==e&&n.push(r)},Se({},t,{outbound:!0})),n},cloneCells:dv,cloneSubgraph:function(e,t){var n=this.getSubgraph(e,t);return this.cloneCells(n)},getSubgraph:function(e,t){t=t||{};var n=[],r={},s=[],a=[];return He(e).forEach(function(l){if(r[l.id]||(n.push(l),r[l.id]=l,l.isLink()?a.push(l):s.push(l)),t.deep){var c=l.getEmbeddedCells({deep:!0});c.forEach(function(f){r[f.id]||(n.push(f),r[f.id]=f,f.isLink()?a.push(f):s.push(f))})}}),a.forEach(function(l){var{source:c,target:f}=l.attributes;if(c.id&&!r[c.id]){var p=this.getCell(c.id);n.push(p),r[p.id]=p,s.push(p)}if(f.id&&!r[f.id]){var g=this.getCell(f.id);n.push(this.getCell(f.id)),r[g.id]=g,s.push(g)}},this),s.forEach(function(l){var c=this.getConnectedLinks(l,t);c.forEach(function(f){var{source:p,target:g}=f.attributes;!r[f.id]&&p.id&&r[p.id]&&g.id&&r[g.id]&&(n.push(f),r[f.id]=f)})},this),n},getPredecessors:function(e,t){t=t||{};var n=[];return this.search(e,function(r){r!==e&&n.push(r)},Se({},t,{inbound:!0})),n},search:function(e,t,n){n=n||{},n.breadthFirst?this.bfs(e,t,n):this.dfs(e,t,n)},bfs:function(e,t,n={}){const r={},s={},a=[];for(a.push(e),s[e.id]=0;a.length>0;){var l=a.shift();if(r[l.id]||(r[l.id]=!0,t.call(this,l,s[l.id])===!1))continue;const c=this.getNeighbors(l,n);for(let f=0,p=c.length;f<p;f++){const g=c[f];s[g.id]=s[l.id]+1,a.push(g)}}},dfs:function(e,t,n={}){const r={},s={},a=[];for(a.push(e),s[e.id]=0;a.length>0;){const l=a.pop();if(r[l.id]||(r[l.id]=!0,t.call(this,l,s[l.id])===!1))continue;const c=this.getNeighbors(l,n),f=a.length;for(let p=0,g=c.length;p<g;p++){const d=c[p];s[d.id]=s[l.id]+1,a.splice(f,0,d)}}},getSources:function(){var e=[];return zn(this._nodes,(function(t,n){(!this._in[n]||rn(this._in[n]))&&e.push(this.getCell(n))}).bind(this)),e},getSinks:function(){var e=[];return zn(this._nodes,(function(t,n){(!this._out[n]||rn(this._out[n]))&&e.push(this.getCell(n))}).bind(this)),e},isSource:function(e){return!this._in[e.id]||rn(this._in[e.id])},isSink:function(e){return!this._out[e.id]||rn(this._out[e.id])},isSuccessor:function(e,t){var n=!1;return this.search(e,function(r){if(r===t&&r!==e)return n=!0,!1},{outbound:!0}),n},isPredecessor:function(e,t){var n=!1;return this.search(e,function(r){if(r===t&&r!==e)return n=!0,!1},{inbound:!0}),n},isNeighbor:function(e,t,n){n=n||{};var r=n.inbound,s=n.outbound;r===void 0&&s===void 0&&(r=s=!0);var a=!1;return this.getConnectedLinks(e,n).forEach(function(l){var{source:c,target:f}=l.attributes;if(r&&Un(c,"id")&&c.id===t.id||s&&Un(f,"id")&&f.id===t.id)return a=!0,!1}),a},disconnectLinks:function(e,t){this.getConnectedLinks(e).forEach(function(n){n.set(n.attributes.source.id===e.id?"source":"target",{x:0,y:0},t)})},removeLinks:function(e,t){Vn(this.getConnectedLinks(e),"remove",t)},findElementsAtPoint:function(e,t){return this._filterAtPoint(this.getElements(),e,t)},findLinksAtPoint:function(e,t){return this._filterAtPoint(this.getLinks(),e,t)},findCellsAtPoint:function(e,t){return this._filterAtPoint(this.getCells(),e,t)},_filterAtPoint:function(e,t,n={}){return e.filter(r=>r.getBBox({rotate:!0}).containsPoint(t,n))},findElementsInArea:function(e,t={}){return this._filterInArea(this.getElements(),e,t)},findLinksInArea:function(e,t={}){return this._filterInArea(this.getLinks(),e,t)},findCellsInArea:function(e,t={}){return this._filterInArea(this.getCells(),e,t)},_filterInArea:function(e,t,n={}){const r=new de(t),{strict:s=!1}=n,a=s?"containsRect":"intersect";return e.filter(l=>r[a](l.getBBox({rotate:!0})))},findElementsUnderElement:function(e,t){return this._filterCellsUnderElement(this.getElements(),e,t)},findLinksUnderElement:function(e,t){return this._filterCellsUnderElement(this.getLinks(),e,t)},findCellsUnderElement:function(e,t){return this._filterCellsUnderElement(this.getCells(),e,t)},_isValidElementUnderElement:function(e,t){return e.id!==t.id&&!e.isEmbeddedIn(t)},_isValidLinkUnderElement:function(e,t){return e.source().id!==t.id&&e.target().id!==t.id&&!e.isEmbeddedIn(t)},_validateCellsUnderElement:function(e,t){return e.filter(n=>n.isLink()?this._isValidLinkUnderElement(n,t):this._isValidElementUnderElement(n,t))},_getFindUnderElementGeometry:function(e,t="bbox"){const n=e.getBBox({rotate:!0});return t!=="bbox"?wv(n,t):n},_filterCellsUnderElement:function(e,t,n={}){const r=this._getFindUnderElementGeometry(t,n.searchBy),s=r.type===Fe.Point?this._filterAtPoint(e,r):this._filterInArea(e,r,n);return this._validateCellsUnderElement(s,t)},findModelsInArea:function(e,t){return this.findElementsInArea(e,t)},findModelsFromPoint:function(e){return this.findElementsAtPoint(e)},findModelsUnderElement:function(e,t){return this.findElementsUnderElement(e,t)},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,t={}){const{rotate:n=!0}=t;return He(e).reduce(function(r,s){const a=s.getBBox({rotate:n});return a?r?r.union(a):a:r},null)},translate:function(e,t,n){var r=this.getCells().filter(function(s){return!s.isEmbedded()});return Vn(r,"translate",e,t,n),this},resize:function(e,t,n){return this.resizeCells(e,t,this.getCells(),n)},resizeCells:function(e,t,n,r){var s=this.getCellsBBox(n);if(s){var a=Math.max(e/s.width,0),l=Math.max(t/s.height,0);Vn(n,"scale",a,l,s.origin(),r)}return this},startBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",Se({},t,{batchName:e}))},stopBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",Se({},t,{batchName:e}))},hasActiveBatch:function(e){const t=this._batches;let n;return arguments.length===0?n=Object.keys(t):Array.isArray(e)?n=e:n=[e],n.some(r=>t[r]>0)}},{validations:{multiLinks:function(e,t){var{source:n,target:r}=t.attributes;if(n.id&&r.id){var s=t.getSourceCell();if(s){var a=e.getConnectedLinks(s,{outbound:!0}),l=a.filter(function(c){var{source:f,target:p}=c.attributes;return f&&f.id===n.id&&(!f.port||f.port===n.port)&&p&&p.id===r.id&&(!p.port||p.port===r.port)});if(l.length>1)return!1}}return!0},linkPinning:function(e,t){var{source:n,target:r}=t.attributes;return n.id&&r.id}}});mS(Mf.prototype,["resetCells","addCells","removeCells"],Vc.cells);const It={GRID:"grid",CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},Yc=Zi.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return nr(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,t){this.el.insertBefore(e,this.insertPivot(t))},insertNode:function(e){const{el:t}=this;e.parentNode!==t&&t.appendChild(e)},insertPivot:function(e){const{el:t,pivotNodes:n}=this;e=+e,e||(e=0);let r=n[e];if(r)return r;r=n[e]=document.createComment("z-index:"+(e+1));let s=-1/0;for(let a in n)a=+a,a<e&&a>s&&(s=a,e-1);if(s!==-1/0){const a=n[s];t.insertBefore(r,a.nextSibling)}else t.insertBefore(r,t.firstChild);return r},removePivots:function(){const{el:e,pivotNodes:t}=this;for(let n in t)e.removeChild(t[n]);this.pivotNodes={}}}),ob=["transform","x","y","cx","cy","dx","dy","x1","y1","x2","y2","points","d","r","rx","ry","width","height","stroke-width","font-size"],ab=["r","rx","ry","width","height","stroke-width","font-size"],lb=ob.reduce((e,t)=>(e[t]=!0,e),{}),ub=ab.reduce((e,t)=>(e[t]=!0,e),{});function Cg(e,t){const n={};for(let r in e)e.hasOwnProperty(r)&&(n[r]=$v(r,e[r],t));return n}function $v(e,t,n){if(e in lb&&ns(t)){let r=rs(t,n);return e in ub&&(r=Math.max(0,r)),r}return t}const zi={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},cb={TOOLS:"TOOLS"},Ve=Zi.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],t=this.model.get("type");return t&&t.toLowerCase().split(".").forEach(function(n,r,s){e.push("type-"+s.slice(0,r+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var e={},t={},n=0,r,s,a,l=Ke(this,"presentationAttributes");for(var c in l)if(l.hasOwnProperty(c)){var f=l[c];for(Array.isArray(f)||(f=[f]),r=0,s=f.length;r<s;r++){a=f[r];var p=e[a];p||(p=e[a]=1<<n++),t[c]|=p}}var g=Ke(this,"initFlag");for(Array.isArray(g)||(g=[g]),r=0,s=g.length;r<s;r++)a=g[r],e[a]||(e[a]=1<<n++);if(n>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=t},hasFlag:function(e,t){return e&this.getFlag(t)},removeFlag:function(e,t){return e^e&this.getFlag(t)},getFlag:function(e){var t=this._flags;if(!t)return 0;var n=0;if(Array.isArray(e))for(var r=0,s=e.length;r<s;r++)n|=t[e[r]];else n|=t[e];return n},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||qi(this),Zi.call(this,e)},initialize:function(){this.setFlags(),Zi.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,t){var n=e.getChangeFlag(this._presentationAttributes);t.updateHandled||!n||(t.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),t.tool&&(t.async=!1),this.requestUpdate(n,t))},requestUpdate:function(e,t){const{paper:n}=this;n&&e>0&&n.requestViewUpdate(this,e,this.UPDATE_PRIORITY,t)},parseDOMJSON:function(e,t){var n=el(e),r=n.selectors,s=n.groupSelectors;for(var a in s){if(r[a])throw new Error("dia.CellView: ambiguous group selector");r[a]=s[a]}if(t){var l=this.selector;if(r[l])throw new Error("dia.CellView: ambiguous root selector.");r[l]=t}return{fragment:n.fragment,selectors:r}},can:function(e){var t=Xe(this.options.interactive)?this.options.interactive(this):this.options.interactive;return $e(t)&&t[e]!==!1||Yx(t)&&t!==!1},findBySelector:function(e,t,n){if(!e||e===".")return[t];if(n){var r=n[e];if(r)return Array.isArray(r)?r:[r]}return this.useCSSSelectors?ce(t).find(e).toArray():[]},findNodes:function(e){return this.findBySelector(e,this.el,this.selectors)},findNode:function(e){const[t=null]=this.findNodes(e);return t},notify:function(e){if(this.paper){var t=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(t)),this.paper.trigger.apply(this.paper,[e,this].concat(t))}},getBBox:function(e){var t;if(e&&e.useModelGeometry){var n=this.model;t=n.getBBox().bbox(n.angle())}else t=this.getNodeBBox(this.el);return this.paper.localToPaperRect(t)},getNodeBBox:function(e){const t=this.getNodeBoundingRect(e),n=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(e)),r=this.getNodeMatrix(e);return ne.transformRect(t,n.multiply(r))},getNodeRotateMatrix(e){return!this.rotatableNode||this.rotatableNode.contains(e)?this.getRootRotateMatrix():ne.createSVGMatrix()},getNodeUnrotatedBBox:function(e){var t=this.getNodeBoundingRect(e),n=this.getNodeMatrix(e),r=this.getRootTranslateMatrix();return ne.transformRect(t,r.multiply(n))},getRootTranslateMatrix:function(){var e=this.model,t=e.position(),n=ne.createSVGMatrix().translate(t.x,t.y);return n},getRootRotateMatrix:function(){var e=ne.createSVGMatrix(),t=this.model,n=t.angle();if(n){var r=t.getBBox(),s=r.width/2,a=r.height/2;e=e.translate(s,a).rotate(n).translate(-s,-a)}return e},_notifyHighlight:function(e,t,n={}){const{el:r}=this;let s;if(typeof t=="string"?s=this.findNode(t)||r:[s=r]=this.$(t),n.partial=s!==r,n.type===void 0){let a;switch(!0){case n.embedding:a=zi.EMBEDDING;break;case n.connecting:a=zi.CONNECTING;break;case n.magnetAvailability:a=zi.MAGNET_AVAILABILITY;break;case n.elementAvailability:a=zi.ELEMENT_AVAILABILITY;break;default:a=zi.DEFAULT;break}n.type=a}return this.notify(e,s,n),this},highlight:function(e,t){return this._notifyHighlight("cell:highlight",e,t)},unhighlight:function(e,t={}){return this._notifyHighlight("cell:unhighlight",e,t)},findMagnet:function(e){const t=this.el;let n=this.$(e)[0];n||(n=t);do{const r=n.getAttribute("magnet"),s=n===t;if((r||s)&&r!=="false")return n;if(s)return;n=n.parentNode}while(n)},findProxyNode:function(e,t){e||(e=this.el);const n=e.getAttribute(`${t}-selector`);if(n){const r=this.findNode(n);if(r)return r}return e},getSelector:function(e,t){var n;if(e===this.el)return typeof t=="string"&&(n=":scope > "+t),n;if(e){var r=ne(e).index()+1;n=e.tagName+":nth-child("+r+")",t&&(n+=" > "+t),n=this.getSelector(e.parentNode,n)}return n},addLinkFromMagnet:function(e,t,n){var r=this.paper,s=r.model,a=r.getDefaultLink(this,e);return a.set({source:this.getLinkEnd(e,t,n,a,"source"),target:{x:t,y:n}}).addTo(s,{async:!1,ui:!0}),a.findView(r)},getLinkEnd:function(e,...t){const n=this.model,r=n.id,s=this.findAttributeNode("port",e),a=e.getAttribute("joint-selector"),l={id:r};if(a!=null&&(l.magnet=a),s!=null){let c=s.getAttribute("port");s.getAttribute("port-id-type")==="number"&&(c=parseInt(c,10)),l.port=c,!n.hasPort(c)&&!a&&(l.selector=this.getSelector(e))}else a==null&&this.el!==e&&(l.selector=this.getSelector(e));return this.customizeLinkEnd(l,e,...t)},customizeLinkEnd:function(e,t,n,r,s,a){const{paper:l}=this,{connectionStrategy:c}=l.options;if(typeof c=="function"){var f=c.call(l,e,this,t,new V(n,r),s,a,l);if(f)return f}return e},getMagnetFromLinkEnd:function(e){var t=e.port,n=e.magnet,r=this.model,s;return t!=null&&r.isElement()&&r.hasPort(t)?s=this.findPortNode(t,n)||this.el:(n||(n=e.selector),!n&&t!=null&&(n='[port="'+t+'"]'),s=this.findNode(n)),this.findProxyNode(s,"magnet")},dragLinkStart:function(e,t,n,r){this.model.startBatch("add-link");const s=this.addLinkFromMagnet(t,n,r);s.notifyPointerdown(e,n,r),s.eventData(e,s.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:s})},dragLink:function(e,t,n){var r=this.eventData(e),s=r.linkView;if(s)s.pointermove(e,t,n);else{var a=this.paper,l=a.options.magnetThreshold,c=this.getEventTarget(e),f=r.targetMagnet;if(l==="onleave"){if(f===c||ne(f).contains(c))return}else if(a.eventData(e).mousemoved<=l)return;this.dragLinkStart(e,f,t,n)}},dragLinkEnd:function(e,t,n){var r=this.eventData(e),s=r.linkView;s&&(s.pointerup(e,t,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,t){rn(t)||(e instanceof SVGElement?ne(e).attr(t):ce(e).attr(t))},processNodeAttributes:function(e,t){var n,r,s,a,l,c,f,p,g,d=[];const x={};for(n in t)t.hasOwnProperty(n)&&(x[ne.attributeNames[n]]=t[n]);for(n in x)if(x.hasOwnProperty(n))if(r=x[n],s=this.getAttributeDefinition(n),s)if(r===null){let w;if(Xe(s.unset)?w=s.unset.call(this,e,x,this):w=s.unset,!w&&ft(s.set)&&(w=s.set),w||(w=n),ft(w)&&w){if(c||(c={}),w in c)continue;c[w]=r}else if(Array.isArray(w)&&w.length>0)for(c||(c={}),a=0,l=w.length;a<l;a++){const E=w[a];E in c||(c[E]=r)}}else!Xe(s.qualify)||s.qualify.call(this,r,e,x,this)?(ft(s.set)&&(c||(c={}),c[s.set]=r),d.push(n,s)):(c||(c={}),c[n]=r);else c||(c={}),c[n]=r;for(a=0,l=d.length;a<l;a+=2)n=d[a],s=d[a+1],r=t[n],Xe(s.set)&&(f||(f={}),f[n]=r),Xe(s.position)&&(p||(p={}),p[n]=r),Xe(s.offset)&&(g||(g={}),g[n]=r);return{raw:x,normal:c,set:f,position:p,offset:g}},updateRelativeAttributes:function(e,t,n,r){r||(r={});var s,a,l,c=Cg(t.raw||{},n),f=t.normal||{};for(const S in f)f[S]=c[S];var p=t.set,g=t.position,d=t.offset;for(s in p){a=c[s],l=this.getAttributeDefinition(s);var x=l.set.call(this,a,n.clone(),e,c,this);$e(x)?Se(f,x):x!==void 0&&(f[s]=x)}if(e instanceof HTMLElement){this.setNodeAttributes(e,f);return}var w=f.transform,E=ne.transformStringToMatrix(w),T=V(E.e,E.f);w&&(f=go(f,"transform"),E.e=E.f=0);var P,C,L;if(g||d){var M=this.getNodeScale(e,r.scalableNode);P=M.sx,C=M.sy}var F=!1;for(s in g)a=c[s],l=this.getAttributeDefinition(s),L=l.position.call(this,a,n.clone(),e,c,this),L&&(T.offset(V(L).scale(P,C)),F||(F=!0));this.setNodeAttributes(e,f);var $=!1;if(d){var X=this.getNodeBoundingRect(e);if(X.width>0&&X.height>0){var y=ne.transformRect(X,E).scale(1/P,1/C);for(s in d)a=c[s],l=this.getAttributeDefinition(s),L=l.offset.call(this,a,y,e,c,this),L&&(T.offset(V(L).scale(P,C)),$||($=!0))}}(w!==void 0||F||$)&&(T.round(1),E.e=T.x,E.f=T.y,e.setAttribute("transform",ne.matrixToTransformString(E)))},getNodeScale:function(e,t){var n,r;if(t&&t.contains(e)){var s=t.scale();n=1/s.sx,r=1/s.sy}else n=1,r=1;return{sx:n,sy:r}},cleanNodesCache:function(){this.metrics={}},cleanNodeCache:function(e){const t=e.id;t&&delete this.metrics[t]},nodeCache:function(e){var t=this.metrics;if(!t)return{};var n=ne.ensureId(e),r=t[n];return r||(r=t[n]={}),r},getNodeData:function(e){var t=this.nodeCache(e);return t.data||(t.data={}),t.data},getNodeBoundingRect:function(e){var t=this.nodeCache(e);return t.boundingRect===void 0&&(t.boundingRect=ne(e).getBBox()),new de(t.boundingRect)},getNodeMatrix:function(e){const t=this.nodeCache(e);if(t.magnetMatrix===void 0){const{rotatableNode:n,el:r}=this;let s;n&&n.contains(e)?s=n:s=r,t.magnetMatrix=ne(e).getTransformToElement(s)}return ne.createSVGMatrix(t.magnetMatrix)},getNodeShape:function(e){var t=this.nodeCache(e);return t.geometryShape===void 0&&(t.geometryShape=ne(e).toGeometryShape()),t.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,t,n,r){var s,a,l,c,f={},p=[];for(var g in e)if(e.hasOwnProperty(g)&&(l=e[g],!!ct(l))){var d=n[g]=this.findBySelector(g,t,r);for(s=0,a=d.length;s<a;s++){var x=d[s];c=ne.ensureId(x);var w=r&&r[g]===x,E=f[c];if(E){E.array||(p.push(c),E.array=!0,E.attributes=[E.attributes],E.selectedLength=[E.selectedLength]);var T=E.attributes,P=E.selectedLength;if(w)T.unshift(l),P.unshift(-1);else{var C=Qm(P,a);T.splice(C,0,l),P.splice(C,0,a)}}else f[c]={attributes:l,selectedLength:w?-1:a,node:x,array:!1}}}for(s=0,a=p.length;s<a;s++)c=p[s],l=f[c],l.attributes=gt({},...l.attributes.reverse());return f},getEventTarget:function(e,t={}){const{target:n,type:r,clientX:s=0,clientY:a=0}=e;return t.fromPoint||r==="touchmove"||r==="touchend"||"pointerId"in e&&n.hasPointerCapture(e.pointerId)?document.elementFromPoint(s,a):n},updateDOMSubtreeAttributes:function(e,t,n){n||(n={}),n.rootBBox||(n.rootBBox=de()),n.selectors||(n.selectors=this.selectors);var r={},s={},a=[],l=[],c,f,p,g,d,x=n.roAttributes,w=this.findNodesAttributes(x||t,e,r,n.selectors),E=x?this.findNodesAttributes(t,e,r,n.selectors):w;for(var T in w)if(g=w[T],p=g.attributes,f=g.node,d=this.processNodeAttributes(f,p),!d.set&&!d.position&&!d.offset&&!d.raw.ref)this.setNodeAttributes(f,Cg(d.normal,n.rootBBox));else{var P=E[T]&&E[T].attributes,C=P&&p.ref===void 0?P.ref:p.ref,L;if(C){if(L=(r[C]||this.findBySelector(C,e,n.selectors))[0],!L)throw new Error('dia.CellView: "'+C+'" reference does not exist.')}else L=null;if(c={node:f,refNode:L,processedAttributes:d,allAttributes:P},L){var M=l.findIndex(function(F){return F.refNode===f});M>-1?l.splice(M,0,c):l.push(c)}else a.push(c)}a.push(...l);for(let F=0,$=a.length;F<$;F++){c=a[F],f=c.node,L=c.refNode;const X=L?ne.ensureId(L):"";let y=s[X];y||(y=s[X]=L?ne(L).getBBox({target:fb(f,L)}):n.rootBBox),x?(d=this.processNodeAttributes(f,c.allAttributes),this.mergeProcessedAttributes(d,c.processedAttributes)):d=c.processedAttributes,this.updateRelativeAttributes(f,d,y,n)}},mergeProcessedAttributes:function(e,t){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),Se(e.set,t.set),Se(e.position,t.position),Se(e.offset,t.offset);var n=e.normal&&e.normal.transform;n!==void 0&&t.normal&&(t.normal.transform=n),e.normal=t.normal},onMount(e){e||(this.mountTools(),_n.mount(this))},onDetach(){this.unmountTools(),_n.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var t=this._toolsView;return t?e?t.getName()===e:!0:!1},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const e=this._toolsView;return e&&e.unmount(),this},mountTools(){const e=this._toolsView;return e&&!e.isMounted()&&e.mount(),this},updateTools:function(e){var t=this._toolsView;return t&&t.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){_n.remove(this)},updateHighlighters:function(e=!1){_n.update(this,null,e)},transformHighlighters:function(){_n.transform(this)},preventDefaultInteraction(e){this.eventData(e,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(e){const{defaultInteractionPrevented:t=!1}=this.eventData(e);return t},pointerdblclick:function(e,t,n){this.notify("cell:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){this.notify("cell:pointerclick",e,t,n)},contextmenu:function(e,t,n){this.notify("cell:contextmenu",e,t,n)},pointerdown:function(e,t,n){const{model:r}=this,{graph:s}=r;s&&(r.startBatch("pointer"),this.eventData(e,{graph:s})),this.notify("cell:pointerdown",e,t,n)},pointermove:function(e,t,n){this.notify("cell:pointermove",e,t,n)},pointerup:function(e,t,n){const{graph:r}=this.eventData(e);this.notify("cell:pointerup",e,t,n),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,t,n,r){this.notify("cell:mousewheel",e,t,n,r)},onevent:function(e,t,n,r){this.notify(t,e,n,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:t,model:n}=this;if(t.isAsync()){if(n.isLink()){const a=n.getSourceElement();if(a){const c=t.findViewByModel(a);c&&(t.dumpView(c),t.checkViewVisibility(c))}const l=n.getTargetElement();if(l){const c=t.findViewByModel(l);c&&(t.dumpView(c),t.checkViewVisibility(c))}}t.dumpView(this),t.checkViewVisibility(this)}const r=this.getEventTarget(e,{fromPoint:!0}),s=t.findView(r);s!==this&&(this.mouseleave(e),s&&s.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e},isIntersecting:function(e,t){return Kr.exists(e,this.getNodeBBox(this.el),t)},isEnclosedIn:function(e){return e.containsRect(this.getNodeBBox(this.el))},isInArea:function(e,t={}){return t.strict?this.isEnclosedIn(e):this.isIntersecting(e)},isAtPoint:function(e,t){return this.getNodeBBox(this.el).containsPoint(e,t)}},{Flags:cb,Highlighting:zi,addPresentationAttributes:function(e){return gt({},Ke(this.prototype,"presentationAttributes"),e,function(t,n){if(!(!t||!n)&&(typeof t=="string"&&(t=[t]),typeof n=="string"&&(n=[n]),Array.isArray(t)&&Array.isArray(n)))return ri(t.concat(n))})},evalAttribute:$v});Object.defineProperty(Ve.prototype,"useCSSSelectors",{get(){const e=this.model.useCSSSelectors;return e!==void 0?e:Xi.useCSSSelectors}});function fb(e,t){let n=e;do{if(n.contains(t))return n;n=n.parentNode}while(n);return null}const Ge={TOOLS:Ve.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Vi={MOVE:"move",MAGNET:"magnet"},Qi=Ve.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=Ve.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){Ve.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Ge.UPDATE],position:[Ge.TRANSLATE,Ge.TOOLS],size:[Ge.RESIZE,Ge.PORTS,Ge.TOOLS],angle:[Ge.ROTATE,Ge.TOOLS],markup:[Ge.RENDER],ports:[Ge.PORTS]},initFlag:[Ge.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,t){const{useCSSSelectors:n}=this;this.hasFlag(e,Ge.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(e,Ge.RENDER))this.render(),this.updateTools(t),this.updateHighlighters(!0),r=!0,e=this.removeFlag(e,[Ge.RENDER,Ge.UPDATE,Ge.RESIZE,Ge.TRANSLATE,Ge.ROTATE,Ge.PORTS,Ge.TOOLS]);else{let s=!1;this.hasFlag(e,Ge.RESIZE)&&(this.resize(t),s=!0,e=this.removeFlag(e,[Ge.RESIZE,Ge.UPDATE]),n&&(e=this.removeFlag(e,Ge.PORTS))),this.hasFlag(e,Ge.UPDATE)&&(this.update(this.model,null,t),e=this.removeFlag(e,Ge.UPDATE),s=!0,n&&(e=this.removeFlag(e,Ge.PORTS))),this.hasFlag(e,Ge.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,Ge.TRANSLATE),r=!0),this.hasFlag(e,Ge.ROTATE)&&(this.rotate(),e=this.removeFlag(e,Ge.ROTATE),r=!0),this.hasFlag(e,Ge.PORTS)&&(this._renderPorts(),s=!0,e=this.removeFlag(e,Ge.PORTS)),s&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(e,Ge.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,Ge.TOOLS)),e},_initializePorts:function(){},update:function(e,t){this.cleanNodesCache();const{useCSSSelectors:n}=this;n&&this._removePorts();var r=this.model,s=r.attr();this.updateDOMSubtreeAttributes(this.el,s,{rootBBox:new de(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:t===s?null:t}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.ElementView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el),n=this.selectors=t.selectors;this.rotatableNode=ne(n[this.rotatableSelector])||null,this.scalableNode=ne(n[this.scalableSelector])||null,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=this.vel;t.append(ne(e)),this.rotatableNode=t.findOne(".rotatable"),this.scalableNode=t.findOne(".scalable");var n=this.selectors={};n[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this.useCSSSelectors||this._renderPorts(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),t=this.getRotateString();t&&(e+=" "+t),this.vel.attr("transform",e)},getTranslateString:function(){const{x:e,y:t}=this.model.position();return`translate(${e},${t})`},getRotateString:function(){const e=this.model.angle();if(!e)return null;const{width:t,height:n}=this.model.size();return`rotate(${e},${t/2},${n/2})`},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var t=this.model,n=t.angle(),r=t.size(),s=this.scalableNode,a=!1;s.node.getElementsByTagName("path").length>0&&(a=!0);var l=s.getBBox({recursive:a}),c=r.width/(l.width||1),f=r.height/(l.height||1);s.attr("transform","scale("+c+","+f+")");var p=this.rotatableNode,g=p&&p.attr("transform");if(g){p.attr("transform",g+" rotate("+-n+","+r.width/2+","+r.height/2+")");var d=s.getBBox({target:this.paper.cells});t.set("position",{x:d.x,y:d.y},Se({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const t=e.model||this.model,r=(e.paper||this.paper).model,s=e.initialZIndices={},a=t.getEmbeddedCells({deep:!0}),l=r.getConnectedLinks(t,{deep:!0,includeEnclosed:!0});[t,...a,...l].forEach(p=>s[p.id]=p.attributes.z),t.startBatch("to-front"),t.toFront({deep:!0,ui:!0});const c=r.getElements().reduce((p,g)=>Math.max(p,g.attributes.z||0),0);l.forEach(p=>{p.attributes.z<=c&&p.set("z",c+1,{ui:!0})}),t.stopBatch("to-front");const f=t.parent();f?(r.getCell(f).unembed(t,{ui:!0}),e.initialParentId=f):e.initialParentId=null},processEmbedding:function(e={},t,n,r){const s=e.model||this.model,a=e.paper||this.paper,l=a.model,{findParentBy:c,frontParentOnly:f,validateEmbedding:p}=a.options;let g;Xe(c)?g=He(c.call(l,this,t,n,r)):c==="pointer"?g=l.findElementsAtPoint({x:n,y:r}):g=l.findElementsUnderElement(s,{searchBy:c}),g=g.filter(w=>w instanceof $n&&s.id!==w.id&&!w.isEmbeddedIn(s)),f&&(g=g.slice(-1));let d=null;const x=e.candidateEmbedView;for(let w=g.length-1;w>=0;w--){const E=g[w];if(x&&x.model.id==E.id){d=x;break}else{const T=E.findView(a);if(!Xe(p)||p.call(a,this,T)){d=T;break}}}d&&d!=x&&(this.clearEmbedding(e),e.candidateEmbedView=d.highlight(d.findProxyNode(null,"container"),{embedding:!0})),!d&&x&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var t=e.candidateEmbedView;t&&(t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const t=e.candidateEmbedView,n=e.model||this.model,r=e.paper||this.paper;if(t)t.model.embed(n,{ui:!0}),t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:s}=r.options,{initialParentId:a}=e;if(a&&typeof s=="function"&&!s.call(r,this)){this._disallowUnembed(e);return}}r.model.getConnectedLinks(n,{deep:!0}).forEach(s=>{s.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:t,whenNotAllowed:n="revert"}=e,r=t||this.model,a=(e.paper||this.paper).model;switch(n){case"remove":{r.remove({ui:!0});break}case"revert":{const{initialParentId:l,initialPosition:c,initialZIndices:f}=e;if(c){const{x:g,y:d}=c;r.position(g,d,{deep:!0,ui:!0})}f&&Object.keys(f).forEach(g=>{const d=a.getCell(g);d&&d.set("z",f[g],{ui:!0})});const p=a.getCell(l);p&&p.embed(r,{ui:!0});break}}},getTargetParentView:function(e){const{candidateEmbedView:t=null}=this.eventData(e);return t},getDelegatedView:function(){for(var e=this,t=e.model,n=e.paper;e&&!t.isLink();){if(!t.isEmbedded()||e.can("stopDelegation"))return e;t=t.getParentCell(),e=n.findViewByModel(t)}return null},findProxyNode:function(e,t){e||(e=this.el);const n=e.getAttribute(`${t}-selector`);if(n){const r=this.findAttribute("port",e);if(r){const s=this.findPortNode(r,n);if(s)return s}else{const s=this.findNode(n);if(s)return s}}return e},notifyPointerdown(e,t,n){Ve.prototype.pointerdown.call(this,e,t,n),this.notify("element:pointerdown",e,t,n)},notifyPointermove(e,t,n){Ve.prototype.pointermove.call(this,e,t,n),this.notify("element:pointermove",e,t,n)},notifyPointerup(e,t,n){this.notify("element:pointerup",e,t,n),Ve.prototype.pointerup.call(this,e,t,n)},pointerdblclick:function(e,t,n){Ve.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){Ve.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,t,n)},contextmenu:function(e,t,n){Ve.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,t,n)},pointerdown:function(e,t,n){this.notifyPointerdown(e,t,n),this.dragStart(e,t,n)},pointermove:function(e,t,n){const r=this.eventData(e),{targetMagnet:s,action:a,delegatedView:l}=r;switch(s&&this.magnetpointermove(e,s,t,n),a){case Vi.MAGNET:this.dragMagnet(e,t,n);break;case Vi.MOVE:(l||this).drag(e,t,n);default:if(r.preventPointerEvents)break;this.notifyPointermove(e,t,n);break}this.eventData(e,r)},pointerup:function(e,t,n){const r=this.eventData(e),{targetMagnet:s,action:a,delegatedView:l}=r;switch(s&&this.magnetpointerup(e,s,t,n),a){case Vi.MAGNET:this.dragMagnetEnd(e,t,n);break;case Vi.MOVE:(l||this).dragEnd(e,t,n);default:if(r.preventPointerEvents)break;this.notifyPointerup(e,t,n)}s&&this.magnetpointerclick(e,s,t,n),this.checkMouseleave(e)},mouseover:function(e){Ve.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){Ve.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){Ve.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){Ve.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,t,n,r){Ve.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,t,n,r)},onmagnet:function(e,t,n){const{currentTarget:r}=e;this.magnetpointerdown(e,r,t,n),this.eventData(e,{targetMagnet:r}),this.dragMagnetStart(e,t,n)},magnetpointerdown:function(e,t,n,r){this.notify("element:magnet:pointerdown",e,t,n,r)},magnetpointermove:function(e,t,n,r){this.notify("element:magnet:pointermove",e,t,n,r)},magnetpointerup:function(e,t,n,r){this.notify("element:magnet:pointerup",e,t,n,r)},magnetpointerdblclick:function(e,t,n,r){this.notify("element:magnet:pointerdblclick",e,t,n,r)},magnetcontextmenu:function(e,t,n,r){this.notify("element:magnet:contextmenu",e,t,n,r)},dragStart:function(e,t,n){if(this.isDefaultInteractionPrevented(e))return;var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(e,{action:Vi.MOVE,delegatedView:r});const s=r.model.position();r.eventData(e,{initialPosition:s,pointerOffset:s.difference(t,n),restrictedArea:this.paper.getRestrictedArea(r,t,n)})},dragMagnetStart:function(e,t,n){const{paper:r}=this,s=e.isPropagationStopped();if(s&&this.eventData(e,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(e)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:a=e.currentTarget}=this.eventData(e);if(e.stopPropagation(),!r.options.validateMagnet.call(r,this,a,e)){s?this.dragStart(e,t,n):this.pointerdown(e,t,n);return}r.options.magnetThreshold<=0&&this.dragLinkStart(e,a,t,n),this.eventData(e,{action:Vi.MAGNET})},drag:function(e,t,n){var r=this.paper,s=r.options.gridSize,a=this.model,l=this.eventData(e),{pointerOffset:c,restrictedArea:f,embedding:p}=l,g=ni(t+c.x,s),d=ni(n+c.y,s);a.position(g,d,{restrictedArea:f,deep:!0,ui:!0}),r.options.embeddingMode&&(p||(this.prepareEmbedding(l),p=!0),this.processEmbedding(l,e,t,n)),this.eventData(e,{embedding:p})},dragMagnet:function(e,t,n){this.dragLink(e,t,n)},dragEnd:function(e,t,n){var r=this.eventData(e);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(e,t,n){this.dragLinkEnd(e,t,n)},magnetpointerclick:function(e,t,n,r){var s=this.paper;s.eventData(e).mousemoved>s.options.clickThreshold||this.notify("element:magnet:pointerclick",e,t,n,r)}},{Flags:Ge});Se(Qi.prototype,GS);const Ue={TOOLS:Ve.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LABELS:"LABELS",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},eo=Ve.extend({className:function(){var e=Ve.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},_labelCache:null,_labelSelectors:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){Ve.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Ue.RENDER],attrs:[Ue.UPDATE],router:[Ue.UPDATE],connector:[Ue.CONNECTOR],labels:[Ue.LABELS,Ue.TOOLS],labelMarkup:[Ue.LABELS],vertices:[Ue.UPDATE],source:[Ue.SOURCE,Ue.UPDATE],target:[Ue.TARGET,Ue.UPDATE]},initFlag:[Ue.RENDER,Ue.SOURCE,Ue.TARGET,Ue.TOOLS],UPDATE_PRIORITY:1,EPSILON:1e-6,confirmUpdate:function(e,t){if(t||(t={}),this.hasFlag(e,Ue.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,Ue.SOURCE)}if(this.hasFlag(e,Ue.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,Ue.TARGET)}const{paper:n,sourceView:r,targetView:s}=this;if(n&&(r&&!n.isViewMounted(r)||s&&!n.isViewMounted(s)))return e;if(this.hasFlag(e,Ue.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(t),e=this.removeFlag(e,[Ue.RENDER,Ue.UPDATE,Ue.LABELS,Ue.TOOLS,Ue.CONNECTOR]),_v.test("isSafari")&&this.__fixSafariBug268376(),e;let a=!1;const{model:l}=this,{attributes:c}=l;let f=this.hasFlag(e,Ue.LABELS);f&&(this.onLabelsChange(l,c.labels,t),e=this.removeFlag(e,Ue.LABELS),a=!0);const p=this.hasFlag(e,Ue.UPDATE),g=this.hasFlag(e,Ue.CONNECTOR);return(p||g)&&(p?t.translateBy&&l.isRelationshipEmbeddedIn(t.translateBy)?this.translate(t.tx,t.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(t),e=this.removeFlag(e,[Ue.UPDATE,Ue.TOOLS,Ue.CONNECTOR]),f=!1,a=!0),f&&this.updateLabelPositions(),a&&this.updateHighlighters(),this.hasFlag(e,Ue.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,Ue.TOOLS)),e},__fixSafariBug268376:function(){const{el:e}=this,t=Array.from(e.childNodes),n=document.createDocumentFragment();for(let r=0,s=t.length;r<s;r++)e.removeChild(t[r]),n.appendChild(t[r]);e.appendChild(n)},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(Ue.UPDATE),e)},isLabelsRenderRequired:function(e={}){const t=this.model.previous("labels");if(!t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var n=e.propertyPathArray||[],r=n.length;if(r>1){var s=!!t[n[1]];if(s){if(r===2)return"markup"in Object(e.propertyValue);if(n[2]!=="markup")return!1}}}return!0},onLabelsChange:function(e,t,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.LinkView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el);this.selectors=t.selectors,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=ne(e);Array.isArray(t)||(t=[t]),this.vel.append(t)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if(typeof e=="string")return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var t=ne(e),n=document.createDocumentFragment();if(!Array.isArray(t))n.appendChild(t.node);else for(var r=0,s=t.length;r<s;r++){var a=t[r].node;n.appendChild(a)}return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var t=e.fragment;if(!(e.fragment instanceof DocumentFragment)||!e.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var n,r=t.childNodes;return r.length>1||r[0].nodeName.toUpperCase()!=="G"?n=ne("g").append(t):n=ne(r[0]),n.addClass("label"),{node:n.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,t=e.labels,n=this._labelCache={},r=this._labelSelectors={},s=this.model,a=s.attributes.labels||[],l=a.length;if(l===0)return t&&t.remove(),this;t?t.empty():(t=e.labels=ne("g").addClass("labels"),this.options.labelsLayer&&(t.addClass(nr(Ke(this,"className"))),t.attr("model-id",s.id)));for(var c=0;c<l;c++){var f=a[c],p=this._normalizeLabelMarkup(this._getLabelMarkup(f.markup)),g,d;if(p)g=p.node,d=p.selectors;else{var x=s._builtins.defaultLabel,w=this._normalizeLabelMarkup(this._getLabelMarkup(x.markup)),E=s._getDefaultLabel(),T=this._normalizeLabelMarkup(this._getLabelMarkup(E.markup)),P=T||w;g=P.node,d=P.selectors}g.setAttribute("label-idx",c),t.append(g),n[c]=g;var C=this.selector;if(d[C])throw new Error("dia.LinkView: ambiguous label root selector.");d[C]=g,r[c]=d}return t.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:t,model:n,_V:r,options:s}=this,{labels:a}=r;if(!a||!n.hasLabels())return;const{node:l}=a;s.labelsLayer?t.getLayerView(s.labelsLayer).insertSortedNode(l,n.get("z")):l.parentNode!==e&&e.appendChild(l)},unmountLabels:function(){const{options:e,_V:t}=this;if(!t)return;const{labels:n}=t;n&&e.labelsLayer&&n.remove()},findLabelNodes:function(e,t){const n=this._labelCache[e];if(!n)return[];const r=this._labelSelectors[e];return this.findBySelector(t,n,r)},findLabelNode:function(e,t){const[n=null]=this.findLabelNodes(e,t);return n},_mergeLabelAttrs:function(e,t,n,r){return t===null?null:t===void 0?n===null?null:n===void 0?e?void 0:r:e?n:gt({},r,n):e?gt({},n,t):gt({},r,n,t)},_mergeLabelSize:function(e,t){return e===null?null:e===void 0?t===null?null:t===void 0?void 0:t:gt({},t,e)},updateLabels:function(){if(!this._V.labels)return this;this.paper.options.labelLayer||this.cleanNodeCache(this.el);for(var e=this.model,t=e.get("labels")||[],n=this.can("labelMove"),r=e._builtins.defaultLabel,s=r.attrs,a=e._getDefaultLabel(),l=a.markup,c=a.attrs,f=a.size,p=0,g=t.length;p<g;p++){var d=this._labelCache[p];d.setAttribute("cursor",n?"move":"default");var x=this._labelSelectors[p],w=t[p],E=w.markup,T=w.attrs,P=w.size,C=this._mergeLabelAttrs(E||l,T,c,s),L=this._mergeLabelSize(P,f);this.updateDOMSubtreeAttributes(d,C,{rootBBox:new de(L),selectors:x})}return this},removeRedundantLinearVertices:function(e){const n=this.model,r=n.vertices(),s=[this.sourceAnchor,...r,this.targetAnchor],a=s.length,l=new Je(s);l.simplify({threshold:.001});const c=l.points.map(p=>p.toJSON()),f=c.length;return a===f?0:(n.vertices(c.slice(1,f-1),e),a-f)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new V(this.sourceAnchor);case"target":return new V(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new V(this.sourcePoint);case"target":return new V(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var t=this.sourceView;if(!t)break;return this.sourceMagnet||t.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,t=0){const{route:n,path:r}=this;if(!n||!r)return;const s=new Je(n);s.translate(e,t),this.route=s.points,this.sourcePoint.offset(e,t),this.targetPoint.offset(e,t),this.sourceAnchor.offset(e,t),this.targetAnchor.offset(e,t),r.translate(e,t),this.updateDOM()},updateDOM(){const{el:e,model:t,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,t.attr(),{selectors:n}),this.updateLabelPositions(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,t=e.vertices(),n=this.findAnchors(t),r=this.sourceAnchor=n.source,s=this.targetAnchor=n.target,a=this.findRoute(t);this.route=a;var l=this.findConnectionPoints(a,r,s);this.sourcePoint=l.source,this.targetPoint=l.target},updatePath:function(){const{route:e,sourcePoint:t,targetPoint:n}=this,r=this.findPath(e,t.clone(),n.clone());this.path=r},findAnchorsOrdered:function(e,t,n,r){var s,a,l,c,f=this.model,p=f.get(e),g=f.get(n),d=this.getEndView(e),x=this.getEndView(n),w=this.getEndMagnet(e),E=this.getEndMagnet(n);d?(t?l=new V(t):x?l=E:l=new V(g),s=this.getAnchor(p.anchor,d,w,l,e)):s=new V(p),x?(c=new V(r||s),a=this.getAnchor(g.anchor,x,E,c,n)):a=new V(g);var T={};return T[e]=s,T[n]=a,T},findAnchors:function(e){var t=this.model,n=e[0],r=e[e.length-1];return t.target().priority&&!t.source().priority?this.findAnchorsOrdered("target",r,"source",n):this.findAnchorsOrdered("source",n,"target",r)},findConnectionPoints:function(e,t,n){var r=e[0],s=e[e.length-1],a=this.model,l=a.get("source"),c=a.get("target"),f=this.sourceView,p=this.targetView,g=this.paper.options,d,x,w;if(f&&!f.isNodeConnection(this.sourceMagnet)){d=this.sourceMagnet||f.el;var E=l.connectionPoint||g.defaultConnectionPoint,T=r||n,P=new ve(T,t);w=this.getConnectionPoint(E,f,d,P,"source")}else w=t;var C;if(p&&!p.isNodeConnection(this.targetMagnet)){x=this.targetMagnet||p.el;var L=c.connectionPoint||g.defaultConnectionPoint,M=s||t,F=new ve(M,n);C=this.getConnectionPoint(L,p,x,F,"target")}else C=n;return{source:w,target:C}},getAnchor:function(e,t,n,r,s){var a=t.isNodeConnection(n),l=this.paper.options;if(e||(a?e=l.defaultLinkAnchor:this.options.perpendicular?e={name:"perpendicular"}:e=l.defaultAnchor),!e)throw new Error("Anchor required.");var c;if(typeof e=="function")c=e;else{var f=e.name,p=a?"linkAnchorNamespace":"anchorNamespace";if(c=l[p][f],typeof c!="function")throw new Error("Unknown anchor: "+f)}var g=c.call(this,t,n,r,e.args||{},s,this);return g?g.round(this.decimalsRounding):new V},getConnectionPoint:function(e,t,n,r,s){var a,l=r.end,c=this.paper.options;if(!e)return l;var f;if(typeof e=="function")f=e;else{var p=e.name;if(f=c.connectionPointNamespace[p],typeof f!="function")throw new Error("Unknown connection point: "+p)}return a=f.call(this,r,t,n,e.args||{},s,this),a?a.round(this.decimalsRounding):l},isIntersecting:function(e,t){const n=this.getConnection();return n?Kr.exists(e,n,t,{segmentSubdivisions:this.getConnectionSubdivisions()}):!1},isEnclosedIn:function(e){const t=this.getConnection();if(!t)return!1;const n=t.bbox();return n?e.containsRect(n):!1},isAtPoint:function(e){const t=new de(e);return t.inflate(this.EPSILON),this.isIntersecting(t)},_getDefaultLabelPositionProperty:function(){var e=this.model,t=e._builtins.defaultLabel,n=t.position,r=e._getDefaultLabel(),s=this._normalizeLabelPosition(r.position);return gt({},n,s)},_normalizeLabelPosition:function(e){return typeof e=="number"?{distance:e,offset:null,angle:0,args:null}:e},_mergeLabelPositionProperty:function(e,t){return e===null?null:e===void 0?t===null?null:t:gt({},t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;var e=this.path;if(!e)return this;var t=this.model,n=t.get("labels")||[];if(!n.length)return this;for(var r=this._getDefaultLabelPositionProperty(),s=0,a=n.length;s<a;s++){var l=this._labelCache[s];if(l){var c=n[s],f=this._normalizeLabelPosition(c.position),p=this._mergeLabelPositionProperty(f,r),g=this._getLabelTransformationMatrix(p);l.setAttribute("transform",ne.matrixToTransformString(g)),this._cleanLabelMatrices(s)}}return this},_cleanLabelMatrices:function(e){const{metrics:t,_labelSelectors:n}=this,r=n[e];if(r)for(let s in r){const{id:a}=r[s];a&&a in t&&delete t[a].magnetMatrix}},updateEndProperties:function(e){const{model:t,paper:n}=this,r=`${e}View`,s=t.get(e),a=s&&s.id;if(!a)return this[r]=null,this.updateEndMagnet(e),!0;const l=n.getModelById(a);if(!l)throw new Error("LinkView: invalid "+e+" cell.");const c=l.findView(n);return c?(this[r]=c,this.updateEndMagnet(e),!0):!1},updateEndMagnet:function(e){const t=`${e}Magnet`,n=this.getEndView(e);if(n){let r=n.getMagnetFromLinkEnd(this.model.get(e));r===n.el&&(r=null),this[t]=r}else this[t]=null},_getLabelPositionProperty:function(e){return this.model.label(e).position||{}},_getLabelPositionAngle:function(e){var t=this._getLabelPositionProperty(e);return t.angle||0},_getLabelPositionArgs:function(e){var t=this._getLabelPositionProperty(e);return t.args},_getDefaultLabelPositionArgs:function(){var e=this.model._getDefaultLabel(),t=e.position||{};return t.args},_mergeLabelPositionArgs:function(e,t){return e===null?null:e===void 0?t===null?null:t:gt({},t,e)},addLabel:function(e,t,n,r){var s,a,l=0,c;typeof e!="number"?(s=e.x,a=e.y,typeof t=="number"?(l=t,c=n):c=t):(s=e,a=t,typeof n=="number"?(l=n,c=r):c=n);var f=this._getDefaultLabelPositionArgs(),p=c,g=this._mergeLabelPositionArgs(p,f),d={position:this.getLabelPosition(s,a,l,g)},x=-1;return this.model.insertLabel(x,d,c),x},addVertex:function(e,t,n){var r=typeof e!="number",s=r?e.x:e,a=r?e.y:t,l=r?t:n,c={x:s,y:a},f=this.getVertexIndex(s,a);return this.model.insertVertex(f,c,l),f},sendToken:function(e,t,n){function r(d,x){return function(){d.remove(),typeof x=="function"&&x()}}var s,a,l;$e(t)?(s=t.duration,a=t.direction==="reverse",l=t.connection):(s=t,a=!1,l=null),s=s||1e3;var c={dur:s+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};a&&(c.keyPoints="1;0",c.keyTimes="0;1");var f=ne(e),p;if(typeof l=="string")p=this.findNode(l);else{var g=this._V;p=g.connection?g.connection.node:this.el.querySelector("path")}if(!(p instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");f.appendTo(this.paper.cells).animateAlongPath(c,p),setTimeout(r(f,n),s)},findRoute:function(e){e||(e=[]);var t=this.paper.options.routerNamespace||DA,n=this.model.router(),r=this.paper.options.defaultRouter;if(!n)if(r)n=r;else return e.map(V);var s=Xe(n)?n:t[n.name];if(!Xe(s))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');var a=n.args||{},l=s.call(this,e,a,this);return l||e.map(V)},findPath:function(e,t,n){var r=this.paper.options.connectorNamespace||FE,s=this.model.connector(),a=this.paper.options.defaultConnector;s||(s=a||{});var l=Xe(s)?s:r[s.name];if(!Xe(l))throw new Error('dia.LinkView: unknown connector: "'+s.name+'".');var c=Lt(s.args||{});c.raw=!0;var f=l.call(this,t,n,e,c,this);return typeof f=="string"&&(f=new Ce(ne.normalizePathData(f))),f},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("data"))return t.data;var n=e.serialize();return t.data=n,n},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("segmentSubdivisions"))return t.segmentSubdivisions;var n=e.getSegmentSubdivisions();return t.segmentSubdivisions=n,n},getConnectionLength:function(){var e=this.path;if(!e)return 0;var t=this.metrics;if(t.hasOwnProperty("length"))return t.length;var n=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return t.length=n,n},getPointAtLength:function(e){var t=this.path;return t?t.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var t=this.path;return t?(Xt(e)&&(e=parseFloat(e)/100),t.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var t=this.path;return t?t.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var t=this.path;return t?t.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var t=this.path;return t?t.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var t=this.path;return t?t.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var t=this.path;return t?t.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,t,n,r){var s={},a=0,l;typeof n=="number"?(a=n,l=r):l=n,l&&(s.args=l);var c=!(l&&l.absoluteDistance),f=l&&l.absoluteDistance&&l.reverseDistance,p=l&&l.absoluteOffset,g=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},x=new V(e,t),w=g.closestPointT(x,d),E=g.lengthAtT(w,d);c&&(E=E/this.getConnectionLength()||0),f&&(E=-1*(this.getConnectionLength()-E)||1),s.distance=E;var T;p||(T=g.tangentAtT(w));var P;if(T)P=T.pointOffset(x);else{var C=g.pointAtT(w),L=x.difference(C);P={x:L.x,y:L.y}}return s.offset=P,s.angle=a,s},_getLabelTransformationMatrix:function(e){var t,n=0,r={};if(typeof e=="number")t=e;else if(typeof e.distance=="number")r=e.args||{},t=e.distance,n=e.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var s=t>0&&t<=1,a=0,l={x:0,y:0};if(e.offset){var c=e.offset;typeof c=="number"&&(a=c),c.x&&(l.x=c.x),c.y&&(l.y=c.y)}var f=l.x!==0||l.y!==0||a===0,p=r.keepGradient,g=r.ensureLegibility,d=this.path,x={segmentSubdivisions:this.getConnectionSubdivisions()},w=s?t*this.getConnectionLength():t,E=d.tangentAtLength(w,x),T,P=n;if(E){if(f)T=E.start.clone(),T.offset(l);else{var C=E.clone();C.rotate(E.start,-90),C.setLength(a),T=C.end}p&&(P=E.angle()+n,g&&(P=mn((P+90)%180-90)))}else T=d.start.clone(),f&&T.offset(l);return ne.createSVGMatrix().translate(T.x,T.y).rotate(P)},getLabelCoordinates:function(e){var t=this._getLabelTransformationMatrix(e);return new V(t.e,t.f)},getVertexIndex:function(e,t){for(var n=this.model,r=n.vertices(),s=this.getClosestPointLength(new V(e,t)),a=0,l=r.length;a<l;a++){var c=r[a],f=this.getClosestPointLength(c);if(s<f)break}return a},notifyPointerdown(e,t,n){Ve.prototype.pointerdown.call(this,e,t,n),this.notify("link:pointerdown",e,t,n)},notifyPointermove(e,t,n){Ve.prototype.pointermove.call(this,e,t,n),this.notify("link:pointermove",e,t,n)},notifyPointerup(e,t,n){this.notify("link:pointerup",e,t,n),Ve.prototype.pointerup.call(this,e,t,n)},pointerdblclick:function(e,t,n){Ve.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){Ve.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,t,n)},contextmenu:function(e,t,n){Ve.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,t,n)},pointerdown:function(e,t,n){this.notifyPointerdown(e,t,n),this.dragStart(e,t,n)},pointermove:function(e,t,n){var r=this._dragData;r&&this.eventData(e,r);var s=this.eventData(e);switch(s.action){case"label-move":this.dragLabel(e,t,n);break;case"arrowhead-move":this.dragArrowhead(e,t,n);break;case"move":this.drag(e,t,n);break}r&&Se(r,this.eventData(e)),this.notifyPointermove(e,t,n)},pointerup:function(e,t,n){var r=this._dragData;r&&(this.eventData(e,r),this._dragData=null);var s=this.eventData(e);switch(s.action){case"label-move":this.dragLabelEnd(e,t,n);break;case"arrowhead-move":this.dragArrowheadEnd(e,t,n);break;case"move":this.dragEnd(e,t,n)}this.notifyPointerup(e,t,n),this.checkMouseleave(e)},mouseover:function(e){Ve.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){Ve.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){Ve.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){Ve.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,t,n,r){Ve.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,t,n,r)},onlabel:function(e,t,n){this.notifyPointerdown(e,t,n),this.dragLabelStart(e,t,n);var r=this.eventData(e).stopPropagation;r&&e.stopPropagation()},dragLabelStart:function(e,t,n){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(e))return;var r=e.currentTarget,s=parseInt(r.getAttribute("label-idx"),10),a=this._getDefaultLabelPositionProperty(),l=this._normalizeLabelPosition(this._getLabelPositionProperty(s)),c=this._mergeLabelPositionProperty(l,a),f=this.getLabelCoordinates(c),p=f.x-t,g=f.y-n,d=this._getLabelPositionAngle(s),x=this._getLabelPositionArgs(s),w=this._getDefaultLabelPositionArgs(),E=this._mergeLabelPositionArgs(x,w);this.eventData(e,{action:"label-move",labelIdx:s,dx:p,dy:g,positionAngle:d,positionArgs:E,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragArrowheadStart:function(e,t,n){if(this.can("arrowheadMove")){var r=e.target,s=r.getAttribute("end"),a=this.startArrowheadMove(s,{ignoreBackwardsCompatibility:!0});this.eventData(e,a)}},dragStart:function(e,t,n){this.isDefaultInteractionPrevented(e)||this.can("linkMove")&&this.eventData(e,{action:"move",dx:t,dy:n})},dragLabel:function(e,t,n){var r=this.eventData(e),s={position:this.getLabelPosition(t+r.dx,n+r.dy,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete s.position.offset;const a={ui:!0};this.paper.isAsync()&&e.type==="touchmove"&&(a.async=!1),this.model.label(r.labelIdx,s,a)},dragArrowhead:function(e,t,n){this.paper.options.snapLinks?!this._snapArrowhead(e,t,n)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(e,t,n):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(e,t,n):this._connectArrowhead(this.getEventTarget(e),t,n,this.eventData(e))},drag:function(e,t,n){var r=this.eventData(e);this.model.translate(t-r.dx,n-r.dy,{ui:!0}),this.eventData(e,{dx:t,dy:n})},dragLabelEnd:function(){},dragArrowheadEnd:function(e,t,n){var r=this.eventData(e),s=this.paper;s.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,t,n),s.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,e)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(e){switch(e.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(e.arrowhead,e.initialEnd,{ui:!0});break}},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,t){var n=e.arrowhead,r=e.initialEnd,s=this.model.prop(n),a=s&&!wl.endsEqual(r,s);if(a){var l=this.paper;r.id&&this.notify("link:disconnect",t,l.findViewByModel(r.id),e.initialMagnet,n),s.id&&this.notify("link:connect",t,l.findViewByModel(s.id),e.magnetUnderPointer,n)}},_snapToPoints:function(e,t,n){let r=null,s=1/0,a=null,l=1/0,c=e.x,f=e.y;for(let p=0;p<t.length;p++){const g=Math.abs(t[p].x-e.x);g<s&&(s=g,r=t[p]);const d=Math.abs(t[p].y-e.y);d<l&&(l=d,a=t[p])}return s<n&&(c=r.x),l<n&&(f=a.y),{x:c,y:f}},_snapArrowheadSelf:function(e,t,n){const{paper:r,model:s}=this,{snapLinksSelf:a}=r.options,l=this.eventData(e),c=a.radius||20,f=this.getEndAnchor(l.arrowhead==="source"?"target":"source"),p=s.vertices(),g=[f,...p],d=this._snapToPoints({x:t,y:n},g,c),x=r.localToClientPoint(d);this._connectArrowhead(document.elementFromPoint(x.x,x.y),d.x,d.y,this.eventData(e))},_snapArrowhead:function(e,t,n){const{paper:r}=this,{snapLinks:s,connectionStrategy:a}=r.options,l=this.eventData(e);let c=!1;var f=s.radius||50,p=r.findElementViewsInArea({x:t-f,y:n-f,width:2*f,height:2*f},s.findInAreaOptions),g=l.closestView||null,d=l.closestMagnet||null,x=l.magnetProxy||null;l.closestView=l.closestMagnet=l.magnetProxy=null;var w=Number.MAX_VALUE,E=new V(t,n);p.forEach(function($){const X=[];$.el.getAttribute("magnet")!=="false"&&X.push({bbox:$.model.getBBox(),magnet:$.el}),$.$("[magnet]").toArray().forEach(y=>{X.push({bbox:$.getNodeBBox(y),magnet:y})}),X.forEach(y=>{const{magnet:S,bbox:A}=y,_=A.center().squaredDistance(E);_<w&&(d===S||r.options.validateConnection.apply(r,l.validateConnectionArgs($,$.el===S?null:S)))&&(w=_,l.closestView=$,l.closestMagnet=S)})},this);var T,P=null,C=l.closestView,L=l.closestMagnet;L&&(P=l.magnetProxy=C.findProxyNode(L,"highlighter"));var M=l.arrowhead,F=d!==L;if(g&&F&&g.unhighlight(x,{connecting:!0,snapping:!0}),C){const{prevEnd:$,prevX:X,prevY:y}=l;if(l.prevX=t,l.prevY=n,c=!0,!F&&(typeof a!="function"||X===t&&y===n)||(T=C.getLinkEnd(L,t,n,this.model,M),!F&&_r($,T)))return c;l.prevEnd=T,F&&C.highlight(P,{connecting:!0,snapping:!0})}else T={x:t,y:n};return this.model.set(M,T||{x:t,y:n},{ui:!0}),g&&this.notify("link:snap:disconnect",e,g,d,M),C&&this.notify("link:snap:connect",e,C,L,M),c},_snapArrowheadEnd:function(e){var t=e.closestView,n=e.closestMagnet;t&&n&&(t.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=t.findMagnet(n)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,t,n,r){const{paper:s,model:a}=this;if(r.eventTarget!==e){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const l=r.viewUnderPointer=s.findView(e);if(l){const c=r.magnetUnderPointer=l.findMagnet(e),f=r.magnetProxy=l.findProxyNode(c,"highlighter");c&&this.paper.options.validateConnection.apply(s,r.validateConnectionArgs(l,c))?f&&l.highlight(f,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=e,a.set(r.arrowhead,{x:t,y:n},{ui:!0})},_connectArrowheadEnd:function(e={},t,n){const{model:r}=this,{viewUnderPointer:s,magnetUnderPointer:a,magnetProxy:l,arrowhead:c}=e;if(!a||!l||!s)return;s.unhighlight(l,{connecting:!0});const f=s.getLinkEnd(a,t,n,r,c);r.set(c,f,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var t=this.el.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){e.z!==null&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var t=[];t[4]=e,t[5]=this;var n,r=0,s=0;e==="source"?(r=2,n="target"):(s=2,n="source");var a=this.model.get(n);if(a.id){var l=t[r]=this.paper.findViewByModel(a.id),c=l.getMagnetFromLinkEnd(a);c===l.el&&(c=void 0),t[r+1]=c}function f(p,g){return t[s]=p,t[s+1]=p.el===g?void 0:g,t}return f},_markAvailableMagnets:function(e){function t(d,x){var w=d.paper,E=w.options.validateConnection;return E.apply(w,this.validateConnectionArgs(d,x))}var n=this.paper,r=n.model.getCells();e.marked={};for(var s=0,a=r.length;s<a;s++){var l=r[s].findView(n);if(l){var c=Array.prototype.slice.call(l.el.querySelectorAll("[magnet]"));l.el.getAttribute("magnet")!=="false"&&c.push(l.el);var f=c.filter(t.bind(e,l));if(f.length>0){for(var p=0,g=f.length;p<g;p++)l.highlight(f[p],{magnetAvailability:!0});l.highlight(null,{elementAvailability:!0}),e.marked[l.model.id]=f}}}},_unmarkAvailableMagnets:function(e){for(var t=Object.keys(e.marked),n,r,s=0,a=t.length;s<a;s++){n=t[s],r=e.marked[n];var l=this.paper.findViewByModel(n);if(l){for(var c=0,f=r.length;c<f;c++)l.unhighlight(r[c],{magnetAvailability:!0});l.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,t){t||(t={});var n={action:"arrowhead-move",arrowhead:e,whenNotAllowed:t.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:Lt(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(n),t.ignoreBackwardsCompatibility!==!0&&(this._dragData=n),n},onMount:function(){Ve.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){Ve.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){Ve.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Ue});Object.defineProperty(eo.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var t=this.model.source();return new de(t.x,t.y)}var n=this.sourceMagnet;return e.isNodeConnection(n)?new de(this.sourceAnchor):e.getNodeBBox(n||e.el)}});Object.defineProperty(eo.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var t=this.model.target();return new de(t.x,t.y)}var n=this.targetMagnet;return e.isNodeConnection(n)?new de(this.targetAnchor):e.getNodeBBox(n||e.el)}});const hb=Yc.extend({style:{"pointer-events":"none"},_gridCache:null,_gridSettings:null,init(){Yc.prototype.init.apply(this,arguments);const{options:{paper:e}}=this;this._gridCache=null,this._gridSettings=[],this.listenTo(e,"transform resize",this.updateGrid)},setGrid(e){this._gridSettings=this.getGridSettings(e),this.renderGrid()},getGridSettings(e){const t=[];return e&&(Array.isArray(e)?e:[e||{}]).forEach(r=>{t.push(...this._resolveDrawGridOption(r))}),t},removeGrid(){const{_gridCache:e}=this;e&&(e.root.remove(),this._gridCache=null)},renderGrid(){const{options:{paper:e}}=this,{_gridSettings:t}=this;if(this.removeGrid(),t.length===0)return;const n=e.options.drawGridSize||e.options.gridSize;if(n<=1)return;const r=this._getGridRefs();t.forEach((s,a)=>{const l=this._getPatternId(a),c=gt({},s),{scaleFactor:f=1}=c;c.width=n*f||1,c.height=n*f||1;let p;r.exist(l)?p=r.get(l):(p=ne("pattern",{id:l,patternUnits:"userSpaceOnUse"},ne(c.markup)),r.add(l,p)),Xe(c.render)&&c.render(p.node.firstChild,c,e),p.attr({width:c.width,height:c.height})}),r.root.appendTo(this.el),this.updateGrid()},updateGrid(){const{_gridCache:e,_gridSettings:t,options:{paper:n}}=this;if(!e)return;const{root:r,patterns:s}=e,{x:a,y:l,width:c,height:f}=n.getArea();r.attr({x:a,y:l,width:c,height:f});for(const p in s)s[p].attr({x:-a,y:-l});t.forEach((p,g)=>{if(Xe(p.update)){const d=s[this._getPatternId(g)];p.update(d.node.firstChild,p,n)}})},_getPatternId(e){return`pattern_${this.options.paper.cid}_${e}`},_getGridRefs(){let{_gridCache:e}=this;if(e)return e;const t=ne("defs"),n=ne("svg",{width:"100%",height:"100%"},[t]);return e=this._gridCache={root:n,patterns:{},add:function(r,s){const a=ne("rect",{width:"100%",height:"100%",fill:`url(#${r})`});t.append(s),n.append(a),this.patterns[r]=s},get:function(r){return this.patterns[r]},exist:function(r){return this.patterns[r]!==void 0}},e},_resolveDrawGridOption(e){var t=this.options.patterns;if(ft(e)&&Array.isArray(t[e]))return t[e].map(function(f){return Se({},f)});var n=e||{args:[{}]},r=Array.isArray(n),s=n.name;if(!r&&!s&&!n.markup&&(s="dot"),s&&Array.isArray(t[s])){var a=t[s].map(function(f){return Se({},f)}),l=Array.isArray(n.args)?n.args:[n.args||{}];nn(l[0],go(e,"args"));for(var c=0;c<l.length;c++)a[c]&&Se(a[c],l[c]);return a}return r?n:[n]}}),Ui={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},db=50,_g=20,kg=1e3,pb=1/0,Ga=9007199254740991,_c=Ve.Highlighting,Lg={[_c.DEFAULT]:{name:"stroke",options:{padding:3}},[_c.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[_c.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},gb=[{name:It.GRID},{name:It.BACK},{name:It.CELLS},{name:It.LABELS},{name:It.FRONT},{name:It.TOOLS}],Mg=Zi.extend({className:"paper",options:{width:800,height:600,gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,elementView:Qi,linkView:eo,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,t){return!1},highlighting:Lg,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:function(){const{cellNamespace:e}=this.model.get("cells"),t=ts(e,["standard","Link"]);if(!t)throw new Error("dia.Paper: no default link model found. Use `options.defaultLink` to specify a default link model.");return new t},defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"boundary"},connectionStrategy:null,validateMagnet:function(e,t,n){return t.getAttribute("magnet")!=="passive"},validateConnection:function(e,t,n,r,s,a){return(s==="target"?n:e)instanceof Qi},embeddingMode:!1,validateEmbedding:function(e,t){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Ui.APPROX,frozen:!1,autoFreeze:!1,onViewUpdate:function(e,t,n,r,s){t&(e.FLAG_INSERT|e.FLAG_REMOVE)||r.mounting||r.isolate||s.requestConnectedLinksUpdate(e,n,r)},onViewPostponed:function(e,t,n){return n.forcePostponedViewUpdate(e,t)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:QE,anchorNamespace:qc,linkAnchorNamespace:$A,connectionPointNamespace:aA,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},stylesheet:`
        .joint-element .scalable * {
            vector-effect: non-scaling-stroke;
        }
    `,svg:null,viewport:null,defs:null,tools:null,layers:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,DEFAULT_FIND_BUFFER:200,init:function(){const{options:e}=this;e.cellViewNamespace||(e.cellViewNamespace=typeof joint<"u"&&Un(joint,"shapes")?joint.shapes:null);const t=this.model=e.model||new Mf;this._layers={},this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.resetViews(t.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates&&this._updates.id&&ja(this._updates.id),this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("transform",this.update)},onCellAdded:function(e,t,n){var r=n.position;this.isAsync()||!Rt(r)?this.renderView(e,n):(n.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(e,n),r===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,t,n){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,n)},onCellChange:function(e,t){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===Ui.APPROX){const n=this.findViewByModel(e);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,t)}},onGraphReset:function(e,t){this.resetLayers(),this.resetViews(e.models,t)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var t=e&&e.batchName,n=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(t)&&!n.hasActiveBatch(r)&&this.updateViews(e)}var s=this.SORT_DELAYING_BATCHES;s.includes(t)&&!n.hasActiveBatch(s)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:t,defaultRouter:n,defaultConnectionPoint:r,defaultAnchor:s,defaultLinkAnchor:a,highlighting:l,cellViewNamespace:c,interactive:f}=e;!c&&typeof joint<"u"&&Un(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),Xe(t)||(e.defaultConnector=tn(t)),Xe(n)||(e.defaultRouter=tn(n)),Xe(r)||(e.defaultConnectionPoint=tn(r)),Xe(s)||(e.defaultAnchor=tn(s)),Xe(a)||(e.defaultLinkAnchor=tn(a)),ct(f)&&(e.interactive=Se({},f)),ct(l)&&(e.highlighting=Ef({},l,Lg))},children:function(){var e=ne.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:nr("paper-background"),selector:"background",style:{position:"absolute",inset:0}},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",style:{position:"absolute",inset:0},children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:nr("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:t}=this;if(e in t)return t[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{el:e,childNodes:t,options:n,stylesheet:r}=this,{svg:s,defs:a,layers:l}=t;return e.style.position="relative",s.style.overflow=n.overflow?"visible":"hidden",this.svg=s,this.defs=a,this.layers=l,this.renderLayers(),ne.ensureId(s),this.addStylesheet(r),n.background&&this.drawBackground(n.background),n.drawGrid&&this.setGrid(n.drawGrid),this},addStylesheet:function(e){e&&ne(this.svg).prepend(ne.createSVGStyle(e))},createLayer(e){switch(e){case It.GRID:return new hb({name:e,paper:this,patterns:this.constructor.gridPatterns});default:return new Yc({name:e})}},renderLayers:function(e=gb){this.removeLayers(),e.forEach(({name:s,sorted:a})=>{const l=this.createLayer(s);this.layers.appendChild(l.el),this._layers[s]=l});const t=this.getLayerView(It.CELLS),n=this.getLayerView(It.TOOLS),r=this.getLayerView(It.LABELS);this.tools=n.el,this.cells=this.viewport=t.el,t.vel.addClass(nr("viewport")),r.vel.addClass(nr("viewport")),t.el.style.webkitUserSelect="none",t.el.style.userSelect="none",r.el.style.webkitUserSelect="none",r.el.style.userSelect="none"},removeLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].remove(),delete e[t]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].removePivots()})},update:function(){return this._background&&this.updateBackgroundImage(this._background),this},scale:function(e,t,n){const r=this.matrix();return e===void 0?ne.matrixToScale(r):(t===void 0&&(t=e),e=Math.max(e||0,this.MIN_SCALE),t=Math.max(t||0,this.MIN_SCALE),r.a=e,r.d=t,this.matrix(r,n),this)},scaleUniformAtPoint:function(e,t,n){const{a:r,d:s,e:a,f:l}=this.matrix();if(e=Math.max(e||0,this.MIN_SCALE),e===r&&e===s)return this;const c=ne.createSVGMatrix().translate(a-t.x*(e-r),l-t.y*(e-s)).scale(e,e);return this.matrix(c,n),this},translate:function(e,t,n){const r=this.matrix();return e===void 0?ne.matrixToTranslate(r):(e||(e=0),t||(t=0),r.e===e&&r.f===t?this:(r.e=e,r.f=t,this.matrix(r,n),this))},matrix:function(e,t={}){var n=this.layers;if(e===void 0){var r=n.getAttribute("transform");return(this._viewportTransformString||null)===r?e=this._viewportMatrix:(e=n.getCTM(),this._viewportMatrix=e,this._viewportTransformString=r),ne.createSVGMatrix(e)}const s=this.matrix(),a=ne.createSVGMatrix(e),l=this._viewportTransformString,c=ne.matrixToTransformString(a);if(c===l)return this;if(!l&&ne.matrixToTransformString()===c)return this;const{a:f,d:p,e:g,f:d}=a;return n.setAttribute("transform",c),this._viewportMatrix=a,this._viewportTransformString=n.getAttribute("transform"),(f!==s.a||p!==s.d)&&this.trigger("scale",f,p,t),(g!==s.e||d!==s.f)&&this.trigger("translate",g,d,t),this.trigger("transform",a,t),this},clientMatrix:function(){return ne.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,t,n){if(e instanceof Ve)for(var r=e.model,s=this.model.getConnectedLinks(r),a=0,l=s.length;a<l;a++){var c=s[a],f=this.findViewByModel(c);if(f){var p=["UPDATE"];c.getTargetCell()===r&&p.push("TARGET"),c.getSourceCell()===r&&p.push("SOURCE");var g=Math.max(t+1,f.UPDATE_PRIORITY);this.scheduleViewUpdate(f,f.getFlag(p),g,n)}}},forcePostponedViewUpdate:function(e,t){if(!e||!(e instanceof Ve))return!1;var n=e.model;if(n.isElement())return!1;if(!(t&e.getFlag(["SOURCE","TARGET"]))){var r={silent:!0},s=0,a=this.findViewByModel(n.getSourceCell());a&&!this.isViewMounted(a)&&(s=this.dumpView(a,r),e.updateEndMagnet("source"));var l=0,c=this.findViewByModel(n.getTargetCell());if(c&&!this.isViewMounted(c)&&(l=this.dumpView(c,r),e.updateEndMagnet("target")),s===0&&l===0)return!this.dumpView(e,r)}return!1},requestViewUpdate:function(e,t,n,r){r||(r={}),this.scheduleViewUpdate(e,t,n,r);var s=this.isAsync();if(!(this.isFrozen()||s&&r.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var a=this.updateViews(r);s&&this.notifyAfterRender(a,r)}},scheduleViewUpdate:function(e,t,n,r){const{_updates:s,options:a}=this;s.idle&&a.autoFreeze&&(s.idle=!1,this.unfreeze());const{FLAG_REMOVE:l,FLAG_INSERT:c,UPDATE_PRIORITY:f,cid:p}=e;let g=s.priorities[n];if(g||(g=s.priorities[n]={}),n>f)for(let w=n-1;w>=f;w--){const E=s.priorities[w];!E||!(p in E)||(g[p]|=E[p],delete E[p])}let d=g[p]||0;if((d&t)===t)return;d||s.count++,t&l&&d&c?g[p]^=c:t&c&&d&l&&(g[p]^=l),g[p]|=t;const x=a.onViewUpdate;typeof x=="function"&&x.call(this,e,t,n,r||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=this._updates,n=e.cid,r=t.priorities[e.UPDATE_PRIORITY],s=this.registerMountedView(e)|r[n];return delete r[n],s},dumpView:function(e,t={}){const n=this.dumpViewUpdate(e);if(!n)return 0;const r=!t.silent;r&&this.notifyBeforeRender(t);const s=this.updateView(e,n,t);if(r){const a={updated:1,priority:e.UPDATE_PRIORITY};this.notifyAfterRender(a,t)}return s},updateView:function(e,t,n){if(!e)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:s,FLAG_INIT:a,model:l}=e;if(e instanceof Ve){if(t&r)return this.removeView(l),0;if(t&s){const c=!!(t&a);c&&(t^=a),this.insertView(e,c),t^=s}}return t?e.confirmUpdate(t,n||{}):0},requireView:function(e,t){var n=this.findViewByModel(e);return n?(this.dumpView(n,t),n):null},registerUnmountedView:function(e){var t=e.cid,n=this._updates;if(t in n.unmounted)return 0;var r=n.unmounted[t]|=e.FLAG_INSERT;return n.unmountedCids.push(t),delete n.mounted[t],r},registerMountedView:function(e){var t=e.cid,n=this._updates;if(t in n.mounted)return 0;n.mounted[t]=!0,n.mountedCids.push(t);var r=n.unmounted[t]||0;return delete n.unmounted[t],r},isViewMounted:function(e){if(!e)return!1;var t=e.cid,n=this._updates;return t in n.mounted},dumpViews:function(e){var t=nn({},e,{viewport:null});this.checkViewport(t),this.updateViews(t)},updateViews:function(e){this.notifyBeforeRender(e);let t,n=0,r=0,s=Ga;do r++,t=this.updateViewsBatch(e),n+=t.updated,s=Math.min(t.priority,s);while(!t.empty);const a={updated:n,batches:r,priority:s};return this.notifyAfterRender(a,e),a},hasScheduledUpdates:function(){const e=this._updates.priorities,t=Object.keys(e);let n=t.length;for(;n>0&&n--;)for(let r in e[t[n]])return!0;return!1},updateViewsAsync:function(e,t){e||(e={}),t||(t={processed:0,priority:Ga});const{_updates:n,options:r}=this,s=n.id;if(s){ja(s),t.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);const a=this.updateViewsBatch(e),l=nn({},e,{mountBatchSize:kg-a.mounted,unmountBatchSize:kg-a.unmounted}),c=this.checkViewport(l),f=c.unmounted,p=c.mounted;let g=t.processed;const d=n.count;a.updated>0?(g+=a.updated+a.unmounted,a.processed=g,t.priority=Math.min(a.priority,t.priority),a.empty&&p===0?(a.unmounted+=f,a.mounted+=p,a.priority=t.priority,this.notifyAfterRender(a,e),t.processed=0,t.priority=Ga,n.count=0):t.processed=g):n.idle||r.autoFreeze&&(this.freeze(),n.idle=!0,this.trigger("render:idle",e));const x=e.progress;if(d&&typeof x=="function"&&x.call(this,a.empty,g,d,a,this),n.id!==s)return}if(n.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");n.id=zc(this.updateViewsAsync,this,e,t)},notifyBeforeRender:function(e={}){let t=e.beforeRender;typeof t!="function"&&(t=this.options.beforeRender,typeof t!="function")||t.call(this,e,this)},notifyAfterRender:function(e,t={}){let n=t.afterRender;typeof n!="function"&&(n=this.options.afterRender),typeof n=="function"&&n.call(this,e,t,this),this.trigger("render:done",e,t)},updateViewsBatch:function(e){e||(e={});var t=e.batchSize||pb,n=this._updates,r=0,s=0,a=0,l=0,c=Ga,f=!0,p=this.options,g=n.priorities,d="viewport"in e?e.viewport:p.viewport;typeof d!="function"&&(d=null);var x=p.onViewPostponed;typeof x!="function"&&(x=null);var w=Object.keys(g);e:for(var E=0,T=w.length;E<T;E++){var P=+w[E],C=g[P];for(var L in C){if(r>=t){f=!1;break e}var M=Xr[L];if(!M){delete C[L];continue}var F=C[L];if(!(F&M.FLAG_REMOVE)){var $=L in n.unmounted;if(M.DETACHABLE&&d&&!d.call(this,M,!$,this)){$||(this.registerUnmountedView(M),this.detachView(M)),n.unmounted[L]|=F,delete C[L],a++;continue}$&&(F|=M.FLAG_INSERT,l++),F|=this.registerMountedView(M)}var X=this.updateView(M,F,e);if(X>0&&(C[L]=X,!x||!x.call(this,M,X,this)||C[L])){s++,f=!1;continue}c>P&&(c=P),r++,delete C[L]}}return{priority:c,updated:r,postponed:s,unmounted:a,mounted:l,empty:f}},getUnmountedViews:function(){const e=this._updates,t=Object.keys(e.unmounted),n=t.length,r=new Array(n);for(var s=0;s<n;s++)r[s]=Xr[t[s]];return r},getMountedViews:function(){const e=this._updates,t=Object.keys(e.mounted),n=t.length,r=new Array(n);for(var s=0;s<n;s++)r[s]=Xr[t[s]];return r},checkUnmountedViews:function(e,t){t||(t={});var n=0;typeof e!="function"&&(e=null);for(var r=("mountBatchSize"in t)?t.mountBatchSize:1/0,s=this._updates,a=s.unmountedCids,l=s.unmounted,c=0,f=Math.min(a.length,r);c<f;c++){var p=a[c];if(p in l){var g=Xr[p];if(g){if(g.DETACHABLE&&e&&!e.call(this,g,!1,this)){a.push(p);continue}n++;var d=this.registerMountedView(g);d&&this.scheduleViewUpdate(g,d,g.UPDATE_PRIORITY,{mounting:!0})}}}return a.splice(0,c),n},checkMountedViews:function(e,t){t||(t={});var n=0;if(typeof e!="function")return n;for(var r=("unmountBatchSize"in t)?t.unmountBatchSize:1/0,s=this._updates,a=s.mountedCids,l=s.mounted,c=0,f=Math.min(a.length,r);c<f;c++){var p=a[c];if(p in l){var g=Xr[p];if(g){if(!g.DETACHABLE||e.call(this,g,!0,this)){a.push(p);continue}n++;var d=this.registerUnmountedView(g);d&&this.detachView(g)}}}return a.splice(0,c),n},checkViewVisibility:function(e,t={}){let n="viewport"in t?t.viewport:this.options.viewport;typeof n!="function"&&(n=null);const r=this._updates,{mounted:s,unmounted:a}=r,l=!e.DETACHABLE||!n||n.call(this,e,!1,this);let c=!1,f=!1;if(e.cid in s&&!l){this.registerUnmountedView(e)&&this.detachView(e);const d=r.mountedCids.indexOf(e.cid);r.mountedCids.splice(d,1),c=!0}if(!c&&e.cid in a&&l){const g=r.unmountedCids.indexOf(e.cid);r.unmountedCids.splice(g,1);var p=this.registerMountedView(e);p&&this.scheduleViewUpdate(e,p,e.UPDATE_PRIORITY,{mounting:!0}),f=!0}return{mounted:f?1:0,unmounted:c?1:0}},checkViewport:function(e){var t=nn({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in t?t.viewport:this.options.viewport,r=this.checkMountedViews(n,t);if(r>0){var s=this._updates.unmountedCids;t.mountBatchSize=Math.min(s.length-r,t.mountBatchSize)}var a=this.checkUnmountedViews(n,t);return{mounted:a,unmounted:r}},freeze:function(e){e||(e={});var t=this._updates,n=e.key,r=this.options.frozen,s=t.freezeKey;if(n&&n!==s){if(r&&s)return;t.freezeKey=n,t.keyFrozen=r}this.options.frozen=!0;var a=t.id;t.id=null,this.isAsync()&&a&&ja(a)},unfreeze:function(e){e||(e={});var t=this._updates,n=e.key,r=t.freezeKey;n&&r&&n!==r||(t.freezeKey=null,!(n&&n===r&&t.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=t.keyFrozen=!1,t.sort&&(this.sortViews(),t.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Ui.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,t=e.width,n=e.height;return Rt(t)||(t=this.el.clientWidth),Rt(n)||(n=this.el.clientHeight),{width:t,height:n}},setDimensions:function(e,t,n={}){const{options:r}=this,{width:s,height:a}=r;let l=e===void 0?s:e,c=t===void 0?a:t;if(s===l&&a===c)return;r.width=l,r.height=c,this._setDimensions();const f=this.getComputedSize();this.trigger("resize",f.width,f.height,n)},_setDimensions:function(){const{options:e}=this;let t=e.width,n=e.height;Rt(t)&&(t=`${Math.round(t)}px`),Rt(n)&&(n=`${Math.round(n)}px`),this.$el.css({width:t===null?"":t,height:n===null?"":n})},fitToContent:function(e,t,n,r){$e(e)?r=e:r=Se({gridWidth:e,gridHeight:t,padding:n},r);const{x:s,y:a,width:l,height:c}=this.getFitToContentArea(r),{sx:f,sy:p}=this.scale();return this.translate(-s*f,-a*p,r),this.setDimensions(l*f,c*p,r),new de(s,a,l,c)},getFitToContentArea:function(e={}){const t=e.gridWidth||1,n=e.gridHeight||1,r=si(e.padding||0),s=Math.max(e.minWidth||0,t),a=Math.max(e.minHeight||0,n),l=e.maxWidth||Number.MAX_VALUE,c=e.maxHeight||Number.MAX_VALUE,f=e.allowNewOrigin,p="contentArea"in e?new de(e.contentArea):this.getContentArea(e),{sx:g,sy:d}=this.scale();p.x*=g,p.y*=d,p.width*=g,p.height*=d;let x=Math.ceil((p.width+p.x)/t),w=Math.ceil((p.height+p.y)/n);e.allowNegativeBottomRight||(x=Math.max(x,1),w=Math.max(w,1)),x*=t,w*=n;let E=0;(f==="negative"&&p.x<0||f==="positive"&&p.x>=0||f==="any")&&(E=Math.ceil(-p.x/t)*t,E+=r.left,x+=E);let T=0;return(f==="negative"&&p.y<0||f==="positive"&&p.y>=0||f==="any")&&(T=Math.ceil(-p.y/n)*n,T+=r.top,w+=T),x+=r.right,w+=r.bottom,x=Math.max(x,s),w=Math.max(w,a),x=Math.min(x,l),w=Math.min(w,c),new de(-E/g,-T/d,x/g,w/d)},transformToFitContent:function(e){e||(e={});let t,n;if("contentArea"in e){const M=e.contentArea;t=this.localToPaperRect(M),n=new V(M)}else t=this.getContentBBox(e),n=this.paperToLocalPoint(t);if(!t.width||!t.height)return;nn(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const r=si(e.padding),s=e.minScaleX||e.minScale,a=e.maxScaleX||e.maxScale,l=e.minScaleY||e.minScale,c=e.maxScaleY||e.maxScale;let f;if(e.fittingBBox)f=e.fittingBBox;else{const M=this.translate(),F=this.getComputedSize();f={x:M.tx,y:M.ty,width:F.width,height:F.height}}f=new de(f).moveAndExpand({x:r.left,y:r.top,width:-r.left-r.right,height:-r.top-r.bottom});const p=this.matrix(),{a:g,d,e:x,f:w}=p;let E=f.width/t.width*g,T=f.height/t.height*d;if(e.preserveAspectRatio&&(E=T=Math.min(E,T)),e.scaleGrid){const M=e.scaleGrid;E=M*Math.floor(E/M),T=M*Math.floor(T/M)}E=Math.min(a,Math.max(s,E)),T=Math.min(c,Math.max(l,T));const P={x:E/g,y:T/d};let C=f.x-n.x*E-x,L=f.y-n.y*T-w;switch(e.verticalAlign){case"middle":L=L+(f.height-t.height*P.y)/2;break;case"bottom":L=L+(f.height-t.height*P.y);break}switch(e.horizontalAlign){case"middle":C=C+(f.width-t.width*P.x)/2;break;case"right":C=C+(f.width-t.width*P.x);break}p.a=E,p.d=T,p.e=C,p.f=L,this.matrix(p,e)},scaleContentToFit:function(e){this.transformToFitContent(e)},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new de:ne(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:t}=this.options;let n;return Xe(t)?n=t.apply(this,e):t===!0?n=this.getArea():t?n=new de(t):n=null,n},createViewForModel:function(e){const{options:t}=this;var n,r,s=t.cellViewNamespace,a=e.get("type")+"View",l=ts(s,a,".");e.isLink()?(n=t.linkView,r=eo):(n=t.elementView,r=Qi);var c=n.prototype instanceof Jr?l||n:n.call(this,e)||l||r;return new c({model:e,interactive:t.interactive,labelsLayer:t.labelsLayer===!0?It.LABELS:t.labelsLayer})},removeView:function(e){const{id:t}=e,{_views:n,_updates:r}=this,s=n[t];if(s){var{cid:a}=s;const{mounted:l,unmounted:c}=r;s.remove(),delete n[t],delete l[a],delete c[a]}return s},renderView:function(e,t){const{id:n}=e,r=this._views;let s,a,l=!0;return n in r&&(s=r[n],s.model===e?(a=s.FLAG_INSERT,l=!1):this.removeView(e)),l&&(s=r[n]=this.createViewForModel(e),s.paper=this,a=this.registerUnmountedView(s)|this.FLAG_INIT|s.getFlag(Ke(s,"initFlag"))),this.requestViewUpdate(s,a,s.UPDATE_PRIORITY,t),s},onImageDragStart:function(){return!1},resetViews:function(e,t){t||(t={}),e||(e=[]),this._resetUpdates(),this.removeViews();const n=this.options.autoFreeze?null:"reset";this.freeze({key:n});for(var r=0,s=e.length;r<s;r++)this.renderView(e[r],t);this.unfreeze({key:n}),this.sortViews()},removeViews:function(){Vn(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var e=Array.from(this.cells.childNodes).filter(n=>n.getAttribute("model-id")),t=this.model.get("cells");Xw(e,function(n,r){var s=t.get(n.getAttribute("model-id")),a=t.get(r.getAttribute("model-id")),l=s.attributes.z||0,c=a.attributes.z||0;return l===c?0:l<c?-1:1})},insertView:function(e,t){const n=this.getLayerView(It.CELLS),{el:r,model:s}=e;switch(this.options.sorting){case Ui.APPROX:n.insertSortedNode(r,s.get("z"));break;case Ui.EXACT:default:n.insertNode(r);break}e.onMount(t)},detachView(e){e.unmount(),e.onDetach()},findView:function(e){var t=ft(e)?this.cells.querySelector(e):e instanceof ce?e[0]:e,n=this.findAttribute("model-id",t);if(n)return this._views[n]},findViewByModel:function(e){var t=ft(e)||Rt(e)?e:e&&e.id;return this._views[t]},findViewsFromPoint:function(e){e=new V(e);var t=this.model.getElements().map(this.findViewByModel,this);return t.filter(function(n){return n&&n.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,t){t=nn(t||{},{strict:!1}),e=new de(e);var n=this.model.getElements().map(this.findViewByModel,this),r=t.strict?"containsRect":"intersect";return n.filter(function(s){return s&&e[r](s.vel.getBBox({target:this.cells}))},this)},findElementViewsInArea(e,t){return this._filterViewsInArea(e,(n,r)=>this.model.findElementsInArea(n,r),t)},findLinkViewsInArea:function(e,t){return this._filterViewsInArea(e,(n,r)=>this.model.findLinksInArea(n,r),t)},findCellViewsInArea:function(e,t){return this._filterViewsInArea(e,(n,r)=>this.model.findCellsInArea(n,r),t)},findElementViewsAtPoint:function(e,t){return this._filterViewsAtPoint(e,n=>this.model.findElementsInArea(n),t)},findLinkViewsAtPoint:function(e,t){return this._filterViewsAtPoint(e,n=>this.model.findLinksInArea(n),t)},findCellViewsAtPoint:function(e,t){return this._filterViewsAtPoint(e,n=>this.model.findCellsInArea(n),t)},_findInExtendedArea:function(e,t,n={}){const{buffer:r=this.DEFAULT_FIND_BUFFER}=n,s=new de(e).inflate(r);return t(s,n).map(l=>this.findViewByModel(l))},_filterViewsInArea:function(e,t,n={}){const r=new de(e);return this._findInExtendedArea(r,t,n).filter(l=>l?l.isInArea(r,n):!1)},_filterViewsAtPoint:function(e,t,n={}){const r=new de(e);return this._findInExtendedArea(r,t,n).filter(l=>l?l.isAtPoint(e,n):!1)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...t){typeof e=="string"&&this.trigger("tools:event",e,...t)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,t){return this.clientToLocalPoint(e,t).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,t){var n=new V(e,t),r=ne.transformPoint(n,this.matrix());return r},localToPaperRect:function(e,t,n,r){var s=new de(e,t,n,r),a=ne.transformRect(s,this.matrix());return a},paperToLocalPoint:function(e,t){var n=new V(e,t),r=ne.transformPoint(n,this.matrix().inverse());return r},paperToLocalRect:function(e,t,n,r){var s=new de(e,t,n,r),a=ne.transformRect(s,this.matrix().inverse());return a},localToClientPoint:function(e,t){var n=new V(e,t),r=ne.transformPoint(n,this.clientMatrix());return r},localToClientRect:function(e,t,n,r){var s=new de(e,t,n,r),a=ne.transformRect(s,this.clientMatrix());return a},clientToLocalPoint:function(e,t){var n=new V(e,t),r=ne.transformPoint(n,this.clientMatrix().inverse());return r},clientToLocalRect:function(e,t,n,r){var s=new de(e,t,n,r),a=ne.transformRect(s,this.clientMatrix().inverse());return a},localToPagePoint:function(e,t){return this.localToPaperPoint(e,t).offset(this.pageOffset())},localToPageRect:function(e,t,n,r){return this.localToPaperRect(e,t,n,r).offset(this.pageOffset())},pageToLocalPoint:function(e,t){var n=new V(e,t),r=n.difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(e,t,n,r){var s=this.pageOffset(),a=new de(e,t,n,r);return a.x-=s.x,a.y-=s.y,this.paperToLocalRect(a)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new V(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof eo))throw new Error("Must provide a linkView.");var t=e.model,n=this.options,r=this.model,s=r.constructor.validations;return!(!n.multiLinks&&!s.multiLinks.call(this,r,t)||!n.linkPinning&&!s.linkPinning.call(this,r,t)||typeof n.allowLink=="function"&&!n.allowLink.call(this,e,this))},getDefaultLink:function(e,t){return Xe(this.options.defaultLink)?this.options.defaultLink.call(this,e,t):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:t,type:n}=e;const{highlighting:r,highlighterNamespace:s}=this.options;if(t===void 0){if(!r||n&&(t=r[n],t===!1))return!1;t||(t=r.default)}if(!t)return!1;ft(t)&&(t={name:t});const a=t.name,l=s[a];if(!l)throw new Error('Unknown highlighter ("'+a+'")');if(typeof l.highlight!="function")throw new Error('Highlighter ("'+a+'") is missing required highlight() method');if(typeof l.unhighlight!="function")throw new Error('Highlighter ("'+a+'") is missing required unhighlight() method');return{highlighter:l,options:t.options||{},name:a}},onCellHighlight:function(e,t,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:s,options:a}=r;s.highlight(e,t,a)},onCellUnhighlight:function(e,t,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:s,options:a}=r;s.unhighlight(e,t,a)},pointerdblclick:function(e){e.preventDefault(),e=Et(e);var t=this.findView(e.target);if(!this.guard(e,t)){var n=this.snapToGrid(e.clientX,e.clientY);t?t.pointerdblclick(e,n.x,n.y):this.trigger("blank:pointerdblclick",e,n.x,n.y)}},pointerclick:function(e){var t=this.eventData(e);if(t.mousemoved<=this.options.clickThreshold){e=Et(e);var n=this.findView(e.target);if(this.guard(e,n))return;var r=this.snapToGrid(e.clientX,e.clientY);n?n.pointerclick(e,r.x,r.y):this.trigger("blank:pointerclick",e,r.x,r.y)}},contextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}e=Et(e),this.contextMenuTrigger(e)},contextMenuTrigger:function(e){var t=this.findView(e.target);if(!this.guard(e,t)){var n=this.snapToGrid(e.clientX,e.clientY);t?t.contextmenu(e,n.x,n.y):this.trigger("blank:contextmenu",e,n.x,n.y)}},pointerdown:function(e){e=Et(e);const{target:t,button:n}=e,r=this.findView(t),s=n===2;if(r){if(!s&&this.guard(e,r))return;const a=this.FORM_CONTROL_TAG_NAMES.includes(t.tagName);this.options.preventDefaultViewAction&&!a&&e.preventDefault(),a&&r.preventDefaultInteraction(e);const l=this.customEventTrigger(e,r);if(l){if(l.isPropagationStopped())return;e.data=l.data}const c=t.closest("[magnet]");if(c&&r.el!==c&&r.el.contains(c)){const f=Et(new ce.Event(e.originalEvent,{data:e.data,currentTarget:c}));if(this.onmagnet(f),f.isDefaultPrevented()&&e.preventDefault(),f.isPropagationStopped()){if(s)return;this.delegateDragEvents(r,f.data);return}e.data=f.data}}if(s){this.contextMenuFired=!0;const a=new ce.Event(e.originalEvent,{type:"contextmenu",data:e.data});this.contextMenuTrigger(a)}else{const a=this.snapToGrid(e.clientX,e.clientY);r?r.pointerdown(e,a.x,a.y):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,a.x,a.y)),this.delegateDragEvents(r,e.data)}},pointermove:function(e){var t=this.eventData(e);t.mousemoved||(t.mousemoved=0,this.undelegateEvents());var n=++t.mousemoved;if(!(n<=this.options.moveThreshold)){e=Et(e);var r=this.snapToGrid(e.clientX,e.clientY),s=t.sourceView;s?s.pointermove(e,r.x,r.y):this.trigger("blank:pointermove",e,r.x,r.y),this.eventData(e,t)}},pointerup:function(e){this.undelegateDocumentEvents();var t=Et(e),n=this.snapToGrid(t.clientX,t.clientY),r=this.eventData(e).sourceView;r?r.pointerup(t,n.x,n.y):this.trigger("blank:pointerup",t,n.x,n.y),t.isPropagationStopped()||this.pointerclick(new ce.Event(e.originalEvent,{type:"click",data:e.data})),this.delegateEvents()},mouseover:function(e){e=Et(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=Et(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=Et(e);const{target:t,relatedTarget:n,currentTarget:r}=e,s=this.findView(t);if(this.guard(e,s))return;const a=this.findView(n);s&&(a===s||(s.mouseenter(e),this.el.contains(n)))||a||r===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=Et(e);const{target:t,relatedTarget:n,currentTarget:r}=e,s=this.findView(t);if(this.guard(e,s))return;const a=this.findView(n);s&&(a===s||(s.mouseleave(e),this.el.contains(n)))||a||r===this.el&&this.trigger("paper:mouseleave",e)},_processMouseWheelEvtBuf:Kx(function(){const{event:e,deltas:t}=this._mw_evt_buffer,n=t.reduce((l,c)=>l+Ww(c,db),0),r=Math.pow(.995,n),{x:s,y:a}=this.clientToLocalPoint(e.clientX,e.clientY);this.trigger("paper:pinch",e,s,a,r),this._mw_evt_buffer={event:null,deltas:[]}},_g,{maxWait:_g}),mousewheel:function(e){e=Et(e);const t=this.findView(e.target);if(this.guard(e,t))return;const n=e.originalEvent,r=this.snapToGrid(n.clientX,n.clientY),{deltaX:s,deltaY:a}=Hw(n),l=this._events["paper:pinch"];if(e.ctrlKey&&l&&l.length>0)n.preventDefault(),this._mw_evt_buffer.event=e,this._mw_evt_buffer.deltas.push(a),this._processMouseWheelEvtBuf();else{const c=Math.max(-1,Math.min(1,n.wheelDelta));t?t.mousewheel(e,r.x,r.y,c):this.trigger("blank:mousewheel",e,r.x,r.y,c),this.trigger("paper:pan",e,s,a)}},onevent:function(e){var t=e.currentTarget,n=t.getAttribute("event");if(n){var r=this.findView(t);if(r){if(e=Et(e),this.guard(e,r))return;var s=this.snapToGrid(e.clientX,e.clientY);r.onevent(e,n,s.x,s.y)}}},magnetEvent:function(e,t){var n=e.currentTarget,r=n.getAttribute("magnet");if(r){var s=this.findView(n);if(s){if(e=Et(e),this.guard(e,s))return;var a=this.snapToGrid(e.clientX,e.clientY);t.call(this,s,e,n,a.x,a.y)}}},onmagnet:function(e){if(e.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const t=new ce.Event(e.originalEvent,{type:"contextmenu",data:e.data,currentTarget:e.currentTarget});this.magnetContextMenuTrigger(t),t.isPropagationStopped()&&e.stopPropagation()}else this.magnetEvent(e,function(t,n,r,s,a){t.onmagnet(n,s,a)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(t,n,r,s,a){t.magnetpointerdblclick(n,r,s,a)})},magnetcontextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(e)},magnetContextMenuTrigger:function(e){this.magnetEvent(e,function(t,n,r,s,a){t.magnetcontextmenu(n,r,s,a)})},onlabel:function(e){var t=e.currentTarget,n=this.findView(t);if(!n||(e=Et(e),this.guard(e,n)))return;const r=this.customEventTrigger(e,n,t);if(r){if(r.isPropagationStopped())return;e.data=r.data}var s=this.snapToGrid(e.clientX,e.clientY);n.onlabel(e,s.x,s.y)},getPointerArgs(e){const t=Et(e),{x:n,y:r}=this.snapToGrid(t.clientX,t.clientY);return[t,n,r]},delegateDragEvents:function(e,t){t||(t={}),this.eventData({data:t},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,t)},guard:function(e,t){if(e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t))return!0;if(e.data&&e.data.guarded!==void 0)return e.data.guarded;const{target:n}=e;return this.GUARDED_TAG_NAMES.includes(n.tagName)?!0:!(t&&t.model&&t.model instanceof $n||this.el===n||this.svg.contains(n))},setGridSize:function(e){const{options:t}=this;return t.gridSize=e,t.drawGrid&&!t.drawGridSize&&this.getLayerView(It.GRID).renderGrid(),this},setGrid:function(e){return this.getLayerView(It.GRID).setGrid(e),this},updateBackgroundImage:function(e){e=e||{};var t=e.position||"center",n=e.size||"auto auto",r=this.scale(),s=this.translate();if($e(t)){var a=s.tx+r.sx*(t.x||0),l=s.ty+r.sy*(t.y||0);t=a+"px "+l+"px"}$e(n)&&(n=new de(n).scale(r.sx,r.sy),n=n.width+"px "+n.height+"px");const{background:c}=this.childNodes;c.style.backgroundSize=n,c.style.backgroundPosition=t},drawBackgroundImage:function(e,t){if(!(e instanceof HTMLImageElement)){this.childNodes.background.style.backgroundImage="";return}if(!(!this._background||this._background.id!==t.id)){t=t||{};var n,r=t.size,s=t.repeat||"no-repeat",a=t.opacity||1,l=Math.abs(t.quality)||1,c=this.constructor.backgroundPatterns[Km(s)];if(Xe(c)){e.width*=l,e.height*=l;var f=c(e,t);if(!(f instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=f.toDataURL("image/png"),s="repeat",$e(r)?(r.width*=f.width/e.width,r.height*=f.height/e.height):r===void 0&&(t.size={width:f.width/l,height:f.height/l})}else n=e.src,r===void 0&&(t.size={width:e.width,height:e.height});this.childNodes.background.style.opacity=a,this.childNodes.background.style.backgroundRepeat=s,this.childNodes.background.style.backgroundImage=`url(${n})`,this.updateBackgroundImage(t)}},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(e=e||{},this.updateBackgroundColor(e.color),e.image){e=this._background=tn(e),qi(e);var t=document.createElement("img");t.onload=this.drawBackgroundImage.bind(this,t,e),t.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,Vn(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!$e(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var t=e.id,n=e.name;if(t||(t=n+this.svg.id+Fa(JSON.stringify(e))),!this.isDefined(t)){var r=Qw,s=r[n]&&r[n](e.args||{});if(!s)throw new Error("Non-existing filter "+n);var a=Se({filterUnits:"userSpaceOnUse"},e.attrs,{id:t});ne(s,a).appendTo(this.defs)}return t},defineGradient:function(e){if(!$e(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:t,defs:n}=this,{type:r,id:s=r+t.id+Fa(JSON.stringify(e)),stops:a,attrs:l={}}=e;if(this.isDefined(s))return s;const c=He(a).map(({offset:p,color:g,opacity:d})=>ne("stop").attr({offset:p,"stop-color":g,"stop-opacity":Number.isFinite(d)?d:1})),f=ne(r,l,c);return f.id=s,f.appendTo(n),s},definePattern:function(e){if(!$e(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:t,defs:n}=this,{id:r=t.id+Fa(JSON.stringify(e)),markup:s,attrs:a={}}=e;if(!s)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const l=ne("pattern",{patternUnits:"userSpaceOnUse"});if(l.id=r,l.attr(a),typeof s=="string")l.append(ne(s));else{const{fragment:c}=el(s);l.append(c)}return l.appendTo(n),r},defineMarker:function(e){if(!$e(e))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:t,defs:n}=this,{id:r=t.id+Fa(JSON.stringify(e)),markup:s,attrs:a={},markerUnits:l="userSpaceOnUse"}=e;if(this.isDefined(r))return r;const c=ne("marker",{orient:"auto",overflow:"visible",markerUnits:l});c.id=r,c.attr(a);let f;if(s){let d;if(typeof s=="string")d=ne(s),d=Array.isArray(d)?d:[d];else{const{fragment:x}=el(s);d=ne(x).children()}d.length>1?f=ne("g").append(d):f=d[0]}else{const{type:d="path"}=e;f=ne(d)}const p=go(e,"type","id","markup","attrs","markerUnits");return Object.keys(p).forEach(d=>{const x=p[d],w=f.attr(d);if(w==null)f.attr(d,x);else switch(d){case"transform":f.attr(d,x+" "+w);break}}),f.appendTo(c),c.appendTo(n),r},customEventTrigger:function(e,t,n=t.el){const r=e.target.closest("[event]");if(r&&n!==r&&t.el.contains(r)){const s=Et(new ce.Event(e.originalEvent,{data:e.data,currentTarget:r}));return this.onevent(s),s.isDefaultPrevented()&&e.preventDefault(),s}return null}},{sorting:Ui,Layers:It,backgroundPatterns:{flipXy:function(e){var t=document.createElement("canvas"),n=e.width,r=e.height;t.width=2*n,t.height=2*r;var s=t.getContext("2d");return s.drawImage(e,0,0,n,r),s.setTransform(-1,0,0,-1,t.width,t.height),s.drawImage(e,0,0,n,r),s.setTransform(-1,0,0,1,t.width,0),s.drawImage(e,0,0,n,r),s.setTransform(1,0,0,-1,0,t.height),s.drawImage(e,0,0,n,r),t},flipX:function(e){var t=document.createElement("canvas"),n=e.width,r=e.height;t.width=n*2,t.height=r;var s=t.getContext("2d");return s.drawImage(e,0,0,n,r),s.translate(2*n,0),s.scale(-1,1),s.drawImage(e,0,0,n,r),t},flipY:function(e){var t=document.createElement("canvas"),n=e.width,r=e.height;t.width=n,t.height=r*2;var s=t.getContext("2d");return s.drawImage(e,0,0,n,r),s.translate(0,2*r),s.scale(1,-1),s.drawImage(e,0,0,n,r),t},watermark:function(e,t){t=t||{};var n=e.width,r=e.height,s=document.createElement("canvas");s.width=n*3,s.height=r*3;for(var a=s.getContext("2d"),l=Rt(t.watermarkAngle)?-t.watermarkAngle:-20,c=qt(l),f=s.width/4,p=s.height/4,g=0;g<4;g++)for(var d=0;d<4;d++)(g+d)%2>0&&(a.setTransform(1,0,0,1,(2*g-1)*f,(2*d-1)*p),a.rotate(c),a.drawImage(e,-n/2,-r/2,n,r));return s}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",render:function(e,t){ne(e).attr({width:t.thickness,height:t.thickness,fill:t.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",render:function(e,t){ne(e).attr({fill:t.color})},update:function(e,t,n){const{sx:r,sy:s}=n.scale(),a=r<=1?t.thickness:t.thickness/r,l=s<=1?t.thickness:t.thickness/s;ne(e).attr({width:a,height:l})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",render:function(e,t){var n,r=t.width,s=t.height,a=t.thickness;r-a>=0&&s-a>=0?n=["M",r,0,"H0 M0 0 V0",s].join(" "):n="M 0 0 0 0",ne(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",render:function(e,t){var n,r=t.width,s=t.height,a=t.thickness;r-a>=0&&s-a>=0?n=["M",r,0,"H0 M0 0 V0",s].join(" "):n="M 0 0 0 0",ne(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",render:function(e,t){var n,r=t.width,s=t.height,a=t.thickness;r-a>=0&&s-a>=0?n=["M",r,0,"H0 M0 0 V0",s].join(" "):n="M 0 0 0 0",ne(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}}]}});function kn(e,t,n,r){switch(e){case"full-circle":return`
            <circle
        cx="${t+r/2}"
        cy="${n+r/2}"
        r="${r/2}"
        stroke="#737475"
        stroke-width="1"
        fill="#737475"
      />`;case"empty-circle":return`
        <circle
    cx="${t+r/2}"
    cy="${n+r/2}"
    r="${r/2}"
    stroke="#737475"
    stroke-width="1"
    fill="none"
  />`;case"excel":return`
            <g transform="translate(${t}, ${n}) scale(${r/48})">
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="25" height="25" viewBox="0 0 48 48">
<path fill="#169154" d="M29,6H15.744C14.781,6,14,6.781,14,7.744v7.259h15V6z"></path><path fill="#18482a" d="M14,33.054v7.202C14,41.219,14.781,42,15.743,42H29v-8.946H14z"></path><path fill="#0c8045" d="M14 15.003H29V24.005000000000003H14z"></path><path fill="#17472a" d="M14 24.005H29V33.055H14z"></path><g><path fill="#29c27f" d="M42.256,6H29v9.003h15V7.744C44,6.781,43.219,6,42.256,6z"></path><path fill="#27663f" d="M29,33.054V42h13.257C43.219,42,44,41.219,44,40.257v-7.202H29z"></path><path fill="#19ac65" d="M29 15.003H44V24.005000000000003H29z"></path><path fill="#129652" d="M29 24.005H44V33.055H29z"></path></g><path fill="#0c7238" d="M22.319,34H5.681C4.753,34,4,33.247,4,32.319V15.681C4,14.753,4.753,14,5.681,14h16.638 C23.247,14,24,14.753,24,15.681v16.638C24,33.247,23.247,34,22.319,34z"></path><path fill="#fff" d="M9.807 19L12.193 19 14.129 22.754 16.175 19 18.404 19 15.333 24 18.474 29 16.123 29 14.013 25.07 11.912 29 9.526 29 12.719 23.982z"></path>
</svg>
</g>
            `;case"play":return`
                    <g transform="translate(${t}, ${n}) scale(${r/480})">
<svg width="200px" height="200px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle opacity="0.5" cx="12" cy="12" r="10" stroke="#1C274C" stroke-width="1.5"/>
<path d="M13.8876 9.9348C14.9625 10.8117 15.5 11.2501 15.5 12C15.5 12.7499 14.9625 13.1883 13.8876 14.0652C13.5909 14.3073 13.2966 14.5352 13.0261 14.7251C12.7888 14.8917 12.5201 15.064 12.2419 15.2332C11.1695 15.8853 10.6333 16.2114 10.1524 15.8504C9.6715 15.4894 9.62779 14.7336 9.54038 13.2222C9.51566 12.7947 9.5 12.3757 9.5 12C9.5 11.6243 9.51566 11.2053 9.54038 10.7778C9.62779 9.26636 9.6715 8.51061 10.1524 8.1496C10.6333 7.78859 11.1695 8.11466 12.2419 8.76679C12.5201 8.93597 12.7888 9.10831 13.0261 9.27492C13.2966 9.46483 13.5909 9.69274 13.8876 9.9348Z" stroke="#1C274C" stroke-width="1.5"/>
</svg>
</g>`;case"layer":return`
                     <g transform="translate(${t}, ${n}) scale(${r/480})">

     <svg width="200px" height="200px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17.4 10L21 12L17.4 14M17.4 10L12 13L6.6 10M17.4 10L21 8L12 3L3 8L6.6 10M6.6 10L3 12L6.6 14M17.4 14L21 16L12 21L3 16L6.6 14M17.4 14L12 17L6.6 14" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</g>
 `;case"layer-blue":return`
                     <g @selector="layerBlue" transform="translate(${t}, ${n}) scale(${r/480})">

     <svg width="200px" height="200px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path  d="M17.4 10L21 12L17.4 14M17.4 10L12 13L6.6 10M17.4 10L21 8L12 3L3 8L6.6 10M6.6 10L3 12L6.6 14M17.4 14L21 16L12 21L3 16L6.6 14M17.4 14L12 17L6.6 14" stroke="#3173FF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</g>
 `;case"collapse":return`
        
                     <g @selector="collapseIcon" transform="translate(${t}, ${n}) scale(${r/480})">

        <svg fill="#000000" width="200px" height="200px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M8.70710678,12 L19.5,12 C19.7761424,12 20,12.2238576 20,12.5 C20,12.7761424 19.7761424,13 19.5,13 L8.70710678,13 L11.8535534,16.1464466 C12.0488155,16.3417088 12.0488155,16.6582912 11.8535534,16.8535534 C11.6582912,17.0488155 11.3417088,17.0488155 11.1464466,16.8535534 L7.14644661,12.8535534 C6.95118446,12.6582912 6.95118446,12.3417088 7.14644661,12.1464466 L11.1464466,8.14644661 C11.3417088,7.95118446 11.6582912,7.95118446 11.8535534,8.14644661 C12.0488155,8.34170876 12.0488155,8.65829124 11.8535534,8.85355339 L8.70710678,12 L8.70710678,12 Z M4,5.5 C4,5.22385763 4.22385763,5 4.5,5 C4.77614237,5 5,5.22385763 5,5.5 L5,19.5 C5,19.7761424 4.77614237,20 4.5,20 C4.22385763,20 4,19.7761424 4,19.5 L4,5.5 Z"/>
</svg>
</g>
        `;case"clock":return`
                     <g @selector="clock" transform="translate(${t}, ${n}) scale(${r/480})">
                     <svg fill="#737475" height="200px" width="200px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 490 490" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M245,0C109.5,0,0,109.5,0,245s109.5,245,245,245s245-109.5,245-245S380.5,0,245,0z M245,449.3 c-112.6,0-204.3-91.7-204.3-204.3S132.4,40.7,245,40.7S449.3,132.4,449.3,245S357.6,449.3,245,449.3z"></path> <path d="M290.9,224.1h-25v-95.9c0-11.5-9.4-20.9-20.9-20.9s-20.9,9.4-20.9,20.9V245c0,11.5,9.4,20.9,20.9,20.9h45.9 c11.5,0,20.9-9.4,20.9-20.9S302.3,224.1,290.9,224.1z"></path> </g> </g> </g></svg>
                     </g>`;case"commit":return`
            <g @selector="commit" transform="translate(${t}, ${n}) scale(${r/480})">
            <svg fill="#737475" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" stroke="#737475"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title>ionicons-v5-d</title><path d="M448,224H380a128,128,0,0,0-247.9,0H64a32,32,0,0,0,0,64h68.05A128,128,0,0,0,380,288H448a32,32,0,0,0,0-64ZM256,320a64,64,0,1,1,64-64A64.07,64.07,0,0,1,256,320Z"></path></g></svg>
            </g>`;case"bright":return`
                <g @selector="bright" transform="translate(${t}, ${n}) scale(${r/480})">
                <svg viewBox="0 0 117 117" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title></title> <desc></desc> <defs></defs> <g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"> <g fill-rule="nonzero" id="sun"> <path d="M58.5,86.6 C74,86.6 86.5,74 86.5,58.6 C86.5,43.2 73.9,30.6 58.5,30.6 C43.1,30.6 30.5,43.2 30.5,58.6 C30.5,74 43,86.6 58.5,86.6 Z M58.5,38.7 C69.5,38.7 78.4,47.6 78.4,58.6 C78.4,69.6 69.5,78.5 58.5,78.5 C47.5,78.5 38.6,69.6 38.6,58.6 C38.6,47.6 47.5,38.7 58.5,38.7 Z" fill="#737475" id="Shape"></path> <path d="M62.6,17.6 L62.6,4.7 C62.6,2.4 60.8,0.6 58.5,0.6 C56.2,0.6 54.4,2.4 54.4,4.7 L54.4,17.6 C54.4,19.9 56.2,21.7 58.5,21.7 C60.8,21.7 62.6,19.9 62.6,17.6 Z" fill="#747272" id="Shape"></path> <path d="M54.4,99.6 L54.4,112.5 C54.4,114.8 56.2,116.6 58.5,116.6 C60.8,116.6 62.6,114.8 62.6,112.5 L62.6,99.6 C62.6,97.3 60.8,95.5 58.5,95.5 C56.2,95.5 54.4,97.3 54.4,99.6 Z" fill="#747272" id="Shape"></path> <path d="M90.4,32.5 L99.5,23.4 C101.1,21.8 101.1,19.2 99.5,17.6 C97.9,16 95.3,16 93.7,17.6 L84.6,26.7 C83,28.3 83,30.9 84.6,32.5 C85.4,33.3 86.4,33.7 87.5,33.7 C88.6,33.7 89.6,33.3 90.4,32.5 Z" fill="#747272" id="Shape"></path> <path d="M17.5,99.6 C18.3,100.4 19.3,100.8 20.4,100.8 C21.4,100.8 22.5,100.4 23.3,99.6 L32.4,90.5 C34,88.9 34,86.3 32.4,84.7 C30.8,83.1 28.2,83.1 26.6,84.7 L17.5,93.8 C15.9,95.4 15.9,98 17.5,99.6 Z" fill="#747272" id="Shape"></path> <path d="M116.5,58.6 C116.5,56.3 114.7,54.5 112.4,54.5 L99.5,54.5 C97.2,54.5 95.4,56.3 95.4,58.6 C95.4,60.9 97.2,62.7 99.5,62.7 L112.4,62.7 C114.6,62.7 116.5,60.9 116.5,58.6 Z" fill="#747272" id="Shape"></path> <path d="M4.6,62.7 L17.5,62.7 C19.8,62.7 21.6,60.9 21.6,58.6 C21.6,56.3 19.8,54.5 17.5,54.5 L4.6,54.5 C2.3,54.5 0.5,56.3 0.5,58.6 C0.5,60.9 2.4,62.7 4.6,62.7 Z" fill="#747272" id="Shape"></path> <path d="M96.6,100.8 C97.6,100.8 98.7,100.4 99.5,99.6 C101.1,98 101.1,95.4 99.5,93.8 L90.4,84.7 C88.8,83.1 86.2,83.1 84.6,84.7 C83,86.3 83,88.9 84.6,90.5 L93.7,99.6 C94.5,100.4 95.6,100.8 96.6,100.8 Z" fill="#747272" id="Shape"></path> <path d="M32.4,32.5 C34,30.9 34,28.3 32.4,26.7 L23.3,17.6 C21.7,16 19.1,16 17.5,17.6 C15.9,19.2 15.9,21.8 17.5,23.4 L26.6,32.5 C27.4,33.3 28.4,33.7 29.5,33.7 C30.6,33.7 31.6,33.3 32.4,32.5 Z" fill="#747272" id="Shape"></path> </g> </g> </g></svg>
                </g>`;case"ticket":return`
                <g @selector="ticket" transform="translate(${t}, ${n}) scale(${r/480})">
                <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M16 2H0V6C1.10457 6 2 6.89543 2 8C2 9.10457 1.10457 10 0 10V14H16V10C14.8954 10 14 9.10457 14 8C14 6.89543 14.8954 6 16 6V2ZM8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10Z" fill="#737475"></path> </g></svg>
                </g>`;default:return""}}class pn extends bt{defaults(){return{...super.defaults,hidden:!1}}isHidden(){return!!this.get("hidden")}static isUMLElement(t){return t instanceof pn}}class Ng extends pn{defaults(){return{...super.defaults(),type:"UMLInitialNode",size:{width:65,height:37},attrs:{body:{fill:"#030F2E",stroke:"#030F2E",strokeWidth:2,width:"calc(w)",height:"calc(h)",rx:4,ry:4,padding:10},label:{text:"Start",fill:"white",fontSize:14,fontWeight:500,textVerticalAnchor:"middle",textAnchor:"middle",fontFamily:"sans-serif",x:"calc(w/2)",y:"calc(h/2)"},port:{cx:"calc(0.5 * w)",cy:"calc(h)",fill:"#2BD4BD",stroke:"#FFFFFFF",strokeWidth:10,r:5},portOuter:{cx:"calc(0.5 * w)",cy:"calc(h)",fill:"#FFFFFF",stroke:"#FFFFFF",strokeWidth:10,r:3}}}}preinitialize(){this.markup=Nr`
            <rect @selector="body" />
            <text @selector="label" />
            <circle @selector="portOuter" />
            <circle @selector="port" />
        `}}class mb extends pn{defaults(){return{...super.defaults(),type:"UMLEndNode",size:{width:65,height:37},attrs:{body:{fill:"#030F2E",stroke:"#030F2E",strokeWidth:2,width:"calc(w)",height:"calc(h)",rx:4,ry:4,padding:10},label:{text:"End",fill:"white",fontSize:14,fontWeight:500,textVerticalAnchor:"middle",textAnchor:"middle",fontFamily:"sans-serif",x:"calc(w/2)",y:"calc(h/2)"},port:{cx:"calc(0.5 * w)",cy:"0",fill:"#2BD4BD",stroke:"#FFFFFFF",strokeWidth:10,r:5},portOuter:{cx:"calc(0.5 * w)",cy:"0",fill:"#FFFFFF",stroke:"#FFFFFF",strokeWidth:10,r:3}}}}preinitialize(){this.markup=Nr`
            <rect @selector="body" />
            <text @selector="label" />
            <circle @selector="portOuter" />
            <circle @selector="port" />
        `}}class vb extends pn{defaults(){return{...super.defaults(),type:"UMLActionNode",size:{width:300,height:150},attrs:{body:{fill:"#FFC107",stroke:"#FFC107",strokeWidth:2,rx:15,ry:15},label:{text:"Action",fill:"black",fontSize:16,fontWeight:"bold",textVerticalAnchor:"middle",textAnchor:"start",fontFamily:"sans-serif"},port:{cx:"calc(0.5 * w)",cy:"calc(h)",fill:"#2BD4BD",stroke:"#FFFFFFF",strokeWidth:10,r:5},portOuter:{cx:"calc(0.5 * w)",cy:"calc(h)",fill:"#FFFFFF",stroke:"#FFFFFF",strokeWidth:10,r:3}}}}preinitialize(){const t=kn("excel",8,100,48),n=kn("play",270,20,48);this.markup=Nr`
            <rect @selector="body" />
            <text @selector="label" />
            <circle @selector="icon1" />
            <text @selector="text1" />
            <circle @selector="icon2" />
            <text @selector="text2" />
            ${t}
            ${n}
            <circle @selector="portOuter" />
            <circle @selector="port" />

        `}}class yb extends pn{constructor(...t){super(...t),this.on("change:collapsed",this.onCollapseChange,this),this.onCollapseChange()}onCollapseChange(){const t=this.isCollapsed(),n=t?280:308,r=t?110:300;this.resize(n,r),this.attr({label:{x:t?120:150,y:t?50:80,textWrap:{width:t?"80%":"calc(w - 30)",height:t?"30%":"100%",ellipsis:!0}},clock:{display:t?"none":"block"},commit:{display:t?"none":"block"},bright:{display:t?"none":"block"},ticket:{display:t?"none":"block"},line:{display:t?"none":"block"},info1:{display:t?"none":"block"},info2:{display:t?"none":"block"},info3:{display:t?"none":"block"},info4:{display:t?"none":"block"},rectangleBox:{display:t?"none":"block"},description:{display:t?"none":"block"},collapseIcon:{transform:t?"translate(266,61) rotate(180) scale(0.208)":"translate(280,48) scale(0.125)"}})}toggleCollapse(){this.set("collapsed",!this.isCollapsed())}isCollapsed(){return!!this.get("collapsed")}defaults(){return{...super.defaults(),type:"UMLInformationNode",collapsed:!0,size:{width:400,height:300},attrs:{body:{fill:"#E6E6E6",stroke:"#FFFFFFF",strokeWidth:2,rx:15,ry:15,event:"info:collapse"},label:{text:"Information",fill:"black",color:"black",fontSize:16,fontWeight:"bold",textAnchor:"start",fontFamily:"sans-serif"},collapseIcon:{event:"info:collapse"}}}}preinitialize(){const t=kn("collapse",300,48,60),n=kn("clock",20,163,35),r=kn("commit",75,150,15),s=kn("bright",135,150,15),a=kn("ticket",185,150,15);this.markup=Nr`
            <rect @selector="body" />
            <text @selector="label" />
            ${t}
            <line @selector="line" x1="20" y1="150" x2="280" y2="150" stroke="#99bbff" stroke-width="2" />
            ${n}
            <text @selector="info1"/>
            ${r}
            <text @selector="info2"/>
            ${s}
            <text @selector="info3"/>
            ${a}
            <text @selector="info4"/>
            
            <rect @selector="rectangleBox" x="20" y="200" width="280" height="60" fill="#e6ecff" rx="4" ry="4" />
            <text @selector="description"/>

            
        `}}const Og=60,Xa=45,xb=8,Gi=Xa-xb*2,Ig={"+":`M ${Gi/2} 4 V ${Gi-4} M 4 ${Gi/2} H ${Gi-4}`,"-":`M 4 ${Gi/2} H ${Gi-4}`};class kc extends bt{defaults(){return{...super.defaults,type:"UMLSwimlane",collapsed:!1,expandedHeight:null,sizeMap:{width:350,height:2750,collapsedWidth:50},attrs:{body:{fill:"transparent",stroke:"#E6E6E6",strokeWidth:1,width:"calc(w)",height:"calc(h)"},header:{stroke:"transparent",height:Xa,width:"calc(w)",event:"header:collapse"},divider:{stroke:"transparent",strokeWidth:2,d:`M 0 ${Xa} H calc(w)`},label:{text:"Swimlane",fill:"#333",fontSize:Og*.4,fontWeight:"bold",textVerticalAnchor:"middle",textAnchor:"start",fontFamily:"sans-serif",x:"calc(0.33*w)",event:"header:collapse",textDecoration:"underline"}}}}preinitialize(...t){const n=kn("layer-blue",10,15,60);this.markup=Nr`
            <g>
              <rect @selector="body" />
              <rect @selector="header" />
              <path @selector="divider" />
              <text @selector="label" />
              ${n}
              </g>
          `}constructor(...t){super(...t),this.on("change:collapsed",this.onCollapseChange,this),this.onCollapseChange()}toggleCollapse(){this.set("collapsed",!this.isCollapsed())}isCollapsed(){return!!this.get("collapsed")}onCollapseChange(){const t=this.get("sizeMap"),n=this.isCollapsed(),r=n?0:t.width;this.resize(r,t.height),this.attr({buttonSign:{d:n?Ig["+"]:Ig["-"]},layerBlue:{display:n?"none":"block"},label:n?{fontSize:0}:{writingMode:"lr",textAnchor:"middle",y:Xa/2,fontSize:Og*.4}})}updateChildrenVisibility(){const t=this.isCollapsed();this.getEmbeddedCells().forEach(n=>n.set("hidden",t))}}const qs=60;class Rg extends bt{defaults(){return{...super.defaults,type:"UMLPool",attrs:{body:{fill:"#FFFFFF",width:"calc(w)",height:"calc(h)"},header:{stroke:"#333",strokeWidth:2,fill:"#333",height:qs,width:"calc(w)"},label:{fill:"#fff",fontSize:qs*.7,fontWeight:"bold",textVerticalAnchor:"middle",textAnchor:"middle",fontFamily:"sans-serif",x:"calc(w / 2)",y:qs/2,textWrap:{ellipsis:!0,width:"calc(w - 20)",maxLineCount:1}}}}}preinitialize(...t){this.markup=Nr`
              <rect @selector="body" />
              <rect @selector="header" />
              <text @selector="label" />
          `}layoutSwimlanes(t){let n=0,r=60;t.forEach(s=>{s.updateChildrenVisibility(),s.position(n,r,{deep:!0,parentRelative:!0}),n+=s.size().width,r+=qs}),this.fitEmbeds({padding:{top:qs}})}}class Fg extends pn{defaults(){return{...super.defaults(),type:"UMLActivity",size:{width:48,height:48},attrs:{body:{fill:"white",stroke:"#0000001A",strokeWidth:2,width:"calc(w)",height:"calc(h)",rx:8,ry:8},label:{text:"Activity",fill:"black",fontSize:16,fontWeight:"bold",textVerticalAnchor:"middle",textAnchor:"middle",fontFamily:"sans-serif",x:"calc(w/2)",y:"calc(h/2)"}}}}preinitialize(){const t=kn("layer",10,13,60);this.markup=Nr`
              <rect @selector="body" />
              ${t}
          `}}function wb(e,t,n){const r=n.sourceBBox,s=n.targetBBox,a=n.sourceAnchor,l=n.targetAnchor,{x:c,y:f}=s,{x:p,y:g}=r,d=a.clone(),x=t.spacing||28;console.log(e);const w=r.sideNearestToPoint(a);switch(w){case"left":d.x=p-x;break;case"right":d.x=p+r.width+x;break;case"top":d.y=g-x;break;case"bottom":d.y=g+r.height+x;break}const E=l.clone(),T=s.sideNearestToPoint(l);switch(T){case"left":E.x=s.x-x;break;case"right":E.x=s.x+s.width+x;break;case"top":E.y=s.y-x;break;case"bottom":E.y=s.y+s.height+x;break}const{x:P,y:C}=d,{x:L,y:M}=E,F=c+s.width,$=f+s.height,X=(c+F)/2,y=(f+$)/2,S=p+r.width,A=g+r.height,_=(p+S)/2,R=(g+A)/2,G=(_<X?S+c:F+p)/2,j=(R<y?A+f:$+g)/2,J=p-x,re=S+x,I=c-x,B=F+x,N=g-x,D=A+x;if(w==="left"&&T==="right"){if(p<F){let k=j;return P<c&&($>=N&&y<R?k=Math.min(f-x,N):f<=D&&y>=R&&(k=Math.max($+x,D))),[{x:P,y:C},{x:P,y:k},{x:L,y:k},{x:L,y:M}]}const H=(P+L)/2;return[{x:H,y:C},{x:H,y:M}]}else if(w==="right"&&T==="left"){if(p>F){let k=j;return P>F&&($>=N&&y<R?k=Math.min(f-x,N):f<=D&&y>=R&&(k=Math.max($+x,D))),[{x:P,y:C},{x:P,y:k},{x:L,y:k},{x:L,y:M}]}const H=(P+L)/2;return[{x:H,y:C},{x:H,y:M}]}else if(w==="top"&&T==="bottom"){if(C<M){let k=G,q=C;return C<f&&(F>=J&&X<_?k=Math.min(c-x,J):c<=re&&X>=_&&(k=Math.max(F+x,re))),[{x:P,y:q},{x:k,y:q},{x:k,y:M},{x:L,y:M}]}const H=(C+M)/2;return[{x:P,y:H},{x:L,y:H}]}else if(w==="bottom"&&T==="top"){if(C-x>M){let k=G,q=C;return C>$&&(F>=J&&X<_?k=Math.min(c-x,J):c<=re&&X>=_&&(k=Math.max(F+x,re))),[{x:P,y:q},{x:k,y:q},{x:k,y:M},{x:L,y:M}]}const H=(C+M)/2;return[{x:P,y:H},{x:L,y:H}]}else if(w==="top"&&T==="top"){let H,k=Math.min((A+f)/2,M),q=Math.min((g+$)/2,C);if(M<C){if(P>=B||P<=I)return[{x:P,y:Math.min(C,M)},{x:L,y:Math.min(C,M)}];L>P?H=Math.min(P,I):H=Math.max(P,B)}else{if(L>=re||L<=J)return[{x:P,y:Math.min(C,M)},{x:L,y:Math.min(C,M)}];X>=_?H=Math.max(L,re):H=Math.min(L,J)}return[{x:P,y:q},{x:H,y:q},{x:H,y:k},{x:L,y:k}]}else if(w==="bottom"&&T==="bottom"){if(c>=re||F<=J)return[{x:P,y:Math.max(C,M)},{x:L,y:Math.max(C,M)}];let H,k,q;return M>C?(k=Math.max((A+f)/2,M),q=Math.max((A+f)/2,C),L>P?H=Math.min(P,I):H=Math.max(P,B)):(k=Math.max((g+$)/2,M),q=Math.max((g+$)/2,C),X>=_?H=Math.max(L,re):H=Math.min(L,J)),[{x:P,y:q},{x:H,y:q},{x:H,y:k},{x:L,y:k}]}else if(w==="left"&&T==="left"){let H,k=Math.min((S+c)/2,L),q=Math.min((p+F)/2,P);const xe=g-x,se=A+x,fe=f-x,he=$+x;return L>P?M<=C?H=Math.min(xe,M):H=Math.max(se,M):M>=C?H=Math.min(fe,C):H=Math.max(he,C),[{x:q,y:C},{x:q,y:H},{x:k,y:H},{x:k,y:M}]}else if(w==="right"&&T==="right"){let H,k=Math.max((p+F)/2,L),q=Math.max((S+c)/2,P);const xe=g-x,se=A+x,fe=f-x,he=$+x;return L<P?M<=C?H=Math.min(xe,M):H=Math.max(se,M):M>=C?H=Math.min(fe,C):H=Math.max(he,C),[{x:q,y:C},{x:q,y:H},{x:k,y:H},{x:k,y:M}]}else if(w==="top"&&T==="right"){if(C>M){if(P<L){let k=(g+$)/2;return k>y&&k<$+x&&P<c-x&&(k=f-x),[{x:P,y:k},{x:L,y:k},{x:L,y:M}]}return[{x:P,y:M}]}const H=G;if(P>L&&A>=M)return[{x:P,y:C},{x:H,y:C},{x:H,y:M}];if(H>J&&C<$){const k=Math.min(g,f)-x,q=Math.max(S,F)+x;return[{x:P,y:k},{x:q,y:k},{x:q,y:M}]}return[{x:P,y:C},{x:H,y:C},{x:H,y:M}]}else if(w==="top"&&T==="left"){if(C>M){if(P>L){let k=(g+$)/2;return k>y&&k<$+x&&P>F+x&&(k=f-x),[{x:P,y:k},{x:L,y:k},{x:L,y:M}]}return[{x:P,y:M}]}const H=G;if(P<L&&A>=M)return[{x:P,y:C},{x:H,y:C},{x:H,y:M}];if(H<re&&C<$){const k=Math.min(g,f)-x,q=Math.min(p,c)-x;return[{x:P,y:k},{x:q,y:k},{x:q,y:M}]}return[{x:P,y:C},{x:H,y:C},{x:H,y:M}]}else if(w==="bottom"&&T==="right"){if(C<M){if(P<L){let k=(A+f)/2;return k<y&&k>f-x&&P<c-x&&(k=$+x),[{x:P,y:k},{x:L,y:k},{x:L,y:M}]}return[{x:P,y:M}]}else if(p<L){const k=Math.max(A,$)+x,q=Math.max(S,F)+x;return[{x:P,y:k},{x:q,y:k},{x:q,y:M}]}const H=G;return[{x:P,y:C},{x:H,y:C},{x:H,y:M}]}else if(w==="bottom"&&T==="left"){if(C<M){if(P>L){let k=(A+f)/2;return k<y&&k>f-x&&P>F+x&&(k=$+x),[{x:P,y:k},{x:L,y:k},{x:L,y:M}]}return[{x:P,y:M}]}else if(S>L){const k=Math.max(A,$)+x,q=Math.min(p,c)-x;return[{x:P,y:k},{x:q,y:k},{x:q,y:M}]}const H=G;return[{x:P,y:C},{x:H,y:C},{x:H,y:M}]}else if(w==="left"&&T==="bottom"){if(P>L&&C>=M)return[{x:L,y:C}];if(P>F&&C<M){const q=G;return[{x:q,y:C},{x:q,y:M},{x:L,y:M}]}const H=Math.min(p,c)-x;let k=Math.max(A,$)+x;return L<=S&&M<C?(k=($+g)/2,[{x:P,y:C},{x:P,y:k},{x:L,y:k}]):[{x:H,y:C},{x:H,y:k},{x:L,y:k}]}else if(w==="left"&&T==="top"){if(P>L&&C<=M)return[{x:L,y:C}];if(P>F&&C>M){const q=(p+F)/2;return[{x:q,y:C},{x:q,y:M},{x:L,y:M}]}const H=Math.min(p,c)-x;let k=Math.min(g,f)-x;return L<=S&&M>C?(k=(f+A)/2,[{x:P,y:C},{x:P,y:k},{x:L,y:k}]):[{x:H,y:C},{x:H,y:k},{x:L,y:k}]}else if(w==="right"&&T==="top"){if(P<L&&C<=M)return[{x:L,y:C}];let H=(S+c)/2;if(S<c&&C>M)return[{x:H,y:C},{x:H,y:M},{x:L,y:M}];if(H<S+x&&A>f){H=Math.max(F+x,P);const q=Math.min(g,f)-x;return[{x:H,y:C},{x:H,y:q},{x:L,y:q}]}const k=(A+f)/2;if(k<=A&&L<p){const q=Math.max(S,F)+x,xe=Math.min(g,f)-x;return[{x:q,y:C},{x:q,y:xe},{x:L,y:xe}]}return[{x:P,y:C},{x:P,y:k},{x:L,y:k}]}else if(w==="right"&&T==="bottom"){let H=(S+c)/2;if(S<H)return C<M?[{x:H,y:C},{x:H,y:M},{x:L,y:M}]:[{x:L,y:C}];if(H<S+x&&g<$){H=Math.max(F+x,P);const q=Math.max(A,$)+x;return[{x:H,y:C},{x:H,y:q},{x:L,y:q}]}const k=(g+$)/2;if(k>=g&&L<p){const q=Math.max(S,F)+x,xe=Math.max(A,$)+x;return[{x:q,y:C},{x:q,y:xe},{x:L,y:xe}]}return[{x:P,y:C},{x:P,y:k},{x:L,y:k}]}}function Sb(){const e=Ys.useRef(null),t=Ys.useRef(null);return Ys.useEffect(()=>{e.current&&e.current.fitToViewer()},[]),Ys.useEffect(()=>{var Me;const n=le=>function(we,ie,z,Z,K,ye){const{model:Re}=we;if(!pn.isUMLElement(Re)||!Re.isHidden())return qc[le].call(this,we,ie,z,Z,K,ye);const De=Re.getParentCell();if(!De)return null;const sn=De.getBBox(),Mt=Re.getBBox();let xt=Mt.y;switch(le){case"left":case"right":xt+=Mt.height/2;break;case"bottom":xt+=Mt.height;break;case"top":default:xt+=Mt.height/2}xt+=Z.dy||0;const Ze=1;let je=sn.x;const{model:Pt}=ye.getEndView(K==="source"?"target":"source");return Pt.position().x>sn.x?je+=sn.width-Ze:je+=Ze,new V(je,xt)},a={width:350,height:3250,collapsedWidth:50},l={...lE,UMLPool:Rg,UMLSwimlane:kc,UMLInitialNode:Ng,UMLActivity:Fg},c=[{title:"Subprocess",color:"#ffffff",text:"#191919",mainColor:"#FFFFFF"},{title:"Task",color:"#ffffff",text:"#191919",mainColor:"#FFFFFF"},{title:"Action",color:"#ffffff",text:"#191919",mainColor:"#FFFFFF"},{title:"Subaction",color:"#ffffff",text:"#191919",mainColor:"#FFFFFF"},{title:"Event",color:"#ffffff",text:"#191919",mainColor:"#FFFFFF"}],f=new Mf({},{cellNamespace:l}),p=new Mg({gridSize:5,width:800,height:3350,model:f,async:!0,sorting:Mg.sorting.APPROX,defaultRouter:wb,defaultConnectionPoint:{name:"anchor"},cellViewNamespace:l,restrictTranslate:le=>{const we=le.model.getParentCell();if(!we)return!1;const{x:ie,y:z,width:Z,height:K}=we.getBBox();return new de(ie,z+60,Z,K-60).inflate(-5).toJSON()},interactive:le=>{const{model:we}=le;return{linkMove:!1,elementMove:pn.isUMLElement(we)}},viewport:le=>{const we=le.model;if(we.isLink()){const ie=we.getSourceElement(),z=we.getTargetElement();return!pn.isUMLElement(ie)||!pn.isUMLElement(z)?!0:!ie.isHidden()||!z.isHidden()}return pn.isUMLElement(we)?!we.isHidden():!0},elementView:Qi.extend({presentationAttributes:Qi.addPresentationAttributes({hidden:["UPDATE"]})}),anchorNamespace:{...qc,left:n("left"),right:n("right"),top:n("top"),bottom:n("bottom")}});function g(le,we,ie){const z=new Ng;return ie.embed(z),z.addTo(f),z.position(le,we+60,{parentRelative:!0}),z}function d(le,we,ie){const z=new mb;return ie.embed(z),z.addTo(f),z.position(le,we+60,{parentRelative:!0}),z}function x(le,we,ie,z){const Z=new Fg({attrs:{body:{fill:le?"#FFFFFF":"#F2F2F2",event:le?"none":"swimlane:collapse"}}});return z.embed(Z),Z.addTo(f),Z.position(we,ie+60,{parentRelative:!0}),Z}function w(le,we,{sourceSide:ie,dx:z=0,dy:Z=0},{targetSide:K,dx:ye=0,dy:Re=0},De="",sn,Mt,xt){const Ze=new kv({source:{id:le.id,anchor:{name:ie,args:{dx:z,dy:Z}}},target:{id:we.id,anchor:{name:K,args:{dx:ye,dy:Re}}},defaultLabel:{markup:Nr`
          
                      <g>
            <rect @selector="labelBody" />
            
            ${ie==="bottom"&&K==="right"?kn(xt,20,14,10):kn(xt,-15,16,10)}
           <text @selector="labelText"></text>
        </g>
                  `,attrs:{labelText:{fill:"#00000",fontSize:12,fontFamily:"sans-serif",fontWeight:"bold",textAnchor:"start",textVerticalAnchor:"middle",x:"35",y:"20"},labelBody:{rx:4,ry:4,ref:"labelText",x:"calc(x-20)",y:"calc(y - 10)",width:"calc(w + 25)",height:"calc(h + 17)",fill:"#F2F2F2",stroke:"#D3D3D3",strokeWidth:1}}}});if(De){const je=K=="left";let Pt="middle";if(je)switch(ie){case"left":Pt="end";break;case"right":Pt="start";break}else switch(K){case"left":Pt="end";break;case"right":Pt="start";break}const ci={distance:je?225:-60};Ze.attr({line:{stroke:"#A1A1AA"}}),Ze.connector("rounded"),Ze.labels([{attrs:{labelText:{text:sn+"/"+Mt,textAnchor:Pt}},position:ci}])}return Ze.addTo(f),Ze}function E(le,we,ie,z){const Z={attrs:{body:{fill:"#ffc299",stroke:"#ffffff",strokeWidth:2,width:"calc(w)",height:"calc(h)",rx:15,ry:15,event:"swimlane:collapse",...z==null?void 0:z.body},label:{text:z==null?void 0:z.label,fill:"black",fontSize:16,fontWeight:"bold",textVerticalAnchor:"middle",textAnchor:"middle",fontFamily:"sans-serif",y:"calc(h/5)",x:"calc(0.35 * w)"}}};z!=null&&z.info&&z.info.forEach((ye,Re)=>{Z.attrs[`text${Re+1}`]={text:ye.text,fill:"black",fontSize:14,fontFamily:"sans-serif",fontWeight:"bold",textVerticalAnchor:"middle",textAnchor:"middle",x:ye.icon.x+45,y:ye.icon.y+20},Z.attrs[`icon${Re+1}`]={cx:ye.icon.x,cy:ye.icon.y+20,r:ye.icon.r,fill:ye.icon.isFill?"#737475":"none",stroke:"#737475",strokeWidth:2}});const K=new vb(Z);return ie.embed(K),K.addTo(f),K.position(le,we+60,{parentRelative:!0}),K}function T(le,we,ie,z){const Z=new yb({attrs:{body:{fill:"#ffffff",stroke:"#F1f1f1",strokeWidth:2,width:"calc(w)",height:"calc(h)",rx:15,ry:15},header:{color:"#ffffff",text:z==null?void 0:z.header,fontSize:26,fontWeight:"bold",textVerticalAnchor:"middle",textAnchor:"middle",fontFamily:"sans-serif",y:"60",x:"110"},label:{text:z==null?void 0:z.label,color:"#000000",fontSize:20,fontFamily:"sans-serif",fontWeight:"bold",textVerticalAnchor:"middle",textAnchor:"middle",x:"130",y:"100"},description:{text:z==null?void 0:z.description.text,color:"#668cff",fill:"black",fontSize:14,fontFamily:"sans-serif",fontWeight:"bold",textVerticalAnchor:"middle",textAnchor:"middle",x:z==null?void 0:z.description.x,y:z==null?void 0:z.description.y}}});return z==null||z.info.forEach((K,ye)=>{Z.attr(`info${ye+1}`,{text:K.text,fill:"black",fontSize:14,fontFamily:"sans-serif",fontWeight:"bold",textVerticalAnchor:"middle",textAnchor:"middle",x:K.icon.x+25,y:K.icon.y+1}),Z.attr(`icon${ye+1}`,{cx:K.icon.x,cy:K.icon.y,r:K.icon.r,fill:K.icon.isFill?"#737475":"none",stroke:"#737475",strokeWidth:2})}),ie.embed(Z),Z.addTo(f),Z.position(le,we+60,{parentRelative:!0}),Z}const P=new Rg({attrs:{label:{}}});P.addTo(f);const C=c.map((le,we)=>{let ie=3250;switch(we){case 0:ie=3350;break;case 1:ie=3250;break;case 2:ie=2650;break;case 3:ie=2e3;break;case 4:ie=1340;break}const z=new kc({sizeMap:{width:350,height:ie,collapsedWidth:50},attrs:{label:{text:le.title,fill:le.text||"#333"},header:{fill:le.color},body:{fill:le.mainColor},button:{fill:le.mainColor},buttonSign:{stroke:le.text||"#333"}}});return P.embed(z),z.addTo(f),z}),[L,M,F,$,X]=C;C.forEach(le=>{let we=40;(le===$||le===X)&&(we=10);const ie=T(we,10,le,{header:"Subaction",label:"Common Path for claim",info:[{icon:{x:25,y:170,r:8,isFill:!0},text:"23"},{icon:{x:85,y:170,r:8,isFill:!1},text:"3.1"},{icon:{x:145,y:170,r:8,isFill:!1},text:"5"},{icon:{x:195,y:170,r:8,isFill:!0},text:"23"}],description:{text:"The claim is based on common path",x:150,y:215}});(le===$||le===X)&&ie.toggleCollapse()});const y=g(170,300,L),S=x(!0,180,465,L);w(y,S,{sourceSide:"bottom"},{targetSide:"top"},"label","28.8 min","72%","empty-circle");const A=x(!1,180,635,L);w(S,A,{sourceSide:"bottom"},{targetSide:"top"},"label","74 min","68%","full-circle");const _=x(!0,180,3050,L),R=d(175,3200,L);w(_,R,{sourceSide:"bottom"},{targetSide:"top"},"label","28.8 min","72%","empty-circle");const G=g(140,295,M);w(A,G,{sourceSide:"bottom"},{targetSide:"left"},"label","74.7 min","68%","empty-circle");const j=x(!1,150,450,M),J=x(!1,150,2600,M),re=x(!1,150,2750,M),I=d(145,2900,M);w(G,j,{sourceSide:"bottom"},{targetSide:"top"},"label","74.7 min","68%","empty-circle"),w(J,re,{sourceSide:"bottom"},{targetSide:"top"},"label","74.7 min","68%","empty-circle"),w(re,I,{sourceSide:"bottom"},{targetSide:"top"},"label","74.7 min","68%","empty-circle"),w(I,_,{sourceSide:"bottom"},{targetSide:"right"},"label","74.7 min","68%","empty-circle");const B=g(140,355,F),N=x(!1,150,490,F),D=x(!0,150,2190,F),H=x(!0,150,2350,F),k=x(!0,150,2500,F),q=d(145,2650,F);w(j,N,{sourceSide:"bottom"},{targetSide:"left"},"label","74.7 min","68%","full-circle"),w(D,H,{sourceSide:"bottom"},{targetSide:"top"},"label","74.7 min","68%","full-circle"),w(H,k,{sourceSide:"bottom"},{targetSide:"top"},"label","74.7 min","68%","full-circle"),w(k,q,{sourceSide:"bottom"},{targetSide:"top"},"label","74.7 min","68%","full-circle"),w(B,N,{sourceSide:"bottom"},{targetSide:"top"},"label","74.7 min","68%","full-circle"),w(q,J,{sourceSide:"bottom"},{targetSide:"right"},"label","74.7 min","68%","full-circle");const xe=g(140,440,$),se=E(30,580,$,{label:"Open ID Verification Tab",info:[{icon:{x:20,y:52,r:8,isFill:!0},text:"74.7 min"},{icon:{x:120,y:52,r:8,isFill:!1},text:"133(68%)"}],body:{fill:"#FFFFFF",stroke:"#F1f1f1",strokeWidth:2}}),fe=E(30,1450,$,{label:"Open ID Verification Tab",info:[{icon:{x:20,y:52,r:8,isFill:!0},text:"74.7 min"},{icon:{x:120,y:52,r:8,isFill:!1},text:"133(68%)"}],body:{fill:"#FFFFFF",stroke:"#F1f1f1",strokeWidth:2}}),he=E(30,1700,$,{label:"Open ID Verification Tab",info:[{icon:{x:20,y:52,r:8,isFill:!0},text:"74.7 min"},{icon:{x:120,y:52,r:8,isFill:!1},text:"133(68%)"}],body:{fill:"#FEC49A",stroke:"#FEC49A",strokeWidth:2}}),me=d(145,1970,$);w(xe,se,{sourceSide:"bottom"},{targetSide:"top"},"label","74.7 min","68%","full-circle"),w(N,xe,{sourceSide:"bottom"},{targetSide:"left"},"label","74.7 min","68%","full-circle"),w(fe,he,{sourceSide:"bottom"},{targetSide:"top"},"label","74.7 min","68%","full-circle"),w(he,me,{sourceSide:"bottom"},{targetSide:"top"},"label","74.7 min","68%","full-circle"),w(me,D,{sourceSide:"bottom"},{targetSide:"right"},"label","74.7 min","68%","full-circle");const pe=g(40,340,X),Ee=E(30,480,X,{label:"Open ID Verification Tab",info:[{icon:{x:20,y:52,r:8,isFill:!0},text:"74.7 min"},{icon:{x:120,y:52,r:8,isFill:!1},text:"133(68%)"}],body:{fill:"#F4F4F5",stroke:"#F1f1f1",strokeWidth:2}}),Le=E(30,750,X,{label:"Open ID Verification Tab",info:[{icon:{x:20,y:52,r:8,isFill:!0},text:"74.7 min"},{icon:{x:120,y:52,r:8,isFill:!1},text:"133(68%)"}],body:{fill:"#FE9B71",stroke:"#FE9B71",strokeWidth:2}}),ke=E(30,950,X,{label:"Open ID Verification Tab",info:[{icon:{x:20,y:52,r:8,isFill:!0},text:"74.7 min"},{icon:{x:120,y:52,r:8,isFill:!1},text:"133(68%)"}],body:{fill:"#FEC49A",stroke:"#FEC49A",strokeWidth:2}}),Be=d(110,1200,X);if(w(pe,Ee,{sourceSide:"bottom"},{targetSide:"top"},"label","74.7 min","68%","full-circle"),w(Ee,Le,{sourceSide:"bottom"},{targetSide:"top"},"label","74.7 min","68%","full-circle"),w(Le,ke,{sourceSide:"bottom"},{targetSide:"top"},"label","74.7 min","68%","full-circle"),w(ke,Be,{sourceSide:"bottom"},{targetSide:"top"},"label","74.7 min","68%","full-circle"),w(se,pe,{sourceSide:"bottom"},{targetSide:"left"},"label","74.7 min","68%","full-circle"),w(Be,fe,{sourceSide:"bottom"},{targetSide:"right"},"label","74.7 min","68%","full-circle"),p.on("swimlane:collapse",({model:le},we)=>{we.stopPropagation(),le instanceof kc||(le=le.getParentCell());const ie=C.findIndex(z=>z===le);C[ie+1].isCollapsed()?(C[ie+1].toggleCollapse(),P.layoutSwimlanes(C)):C.forEach((z,Z)=>{Z>ie&&(z.toggleCollapse(),P.layoutSwimlanes(C))})}),p.on("info:collapse",({model:le},we)=>{we.stopPropagation(),le.toggleCollapse()}),p.on("header:collapse",({model:le},we)=>{we.stopPropagation();const ie=C.findIndex(z=>z.id===le.id);C.forEach((z,Z)=>{Z>ie&&(z.toggleCollapse(),P.layoutSwimlanes(C))})}),P.layoutSwimlanes(C),p.transformToFitContent({contentArea:new de(0,0,50*2+C.length*a.width,1)}),p.fitToContent({contentArea:new de(-50,-50,50*2+C.length*a.width-20,50*3+a.height+60),allowNewOrigin:"any"}),t.current)return(Me=t.current)==null||Me.appendChild(p.el),()=>{p.remove()}},[]),Wi.jsx(Wi.Fragment,{children:Wi.jsx("div",{id:"paper-contianer",children:Wi.jsx("div",{id:"paper",ref:t})})})}W0.createRoot(document.getElementById("root")).render(Wi.jsx(Ys.StrictMode,{children:Wi.jsx(Sb,{})}));
